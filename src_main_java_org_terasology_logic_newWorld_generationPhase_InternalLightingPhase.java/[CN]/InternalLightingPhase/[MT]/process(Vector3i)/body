{
  NewChunk chunk=chunkProvider.getChunk(pos);
  chunk.lock();
  try {
    InternalLightProcessor.generateInternalLighting(chunk);
    chunk.setChunkState(NewChunk.State.LightPropagationPending);
  }
  finally {
    chunk.unlock();
  }
}
