{
  if (_activeBlocks.isEmpty())   return false;
  BlockPosition pos=_activeBlocks.iterator().next();
  _activeBlocks.remove(pos);
  if (!_parent.canBlockSeeTheSky(pos.x,pos.y,pos.z))   return false;
  ChunkGeneratorTerrain.BIOME_TYPE biome=_parent.getActiveBiome(pos.x,pos.z);
  if (biome != ChunkGeneratorTerrain.BIOME_TYPE.SNOW) {
    byte bLeft=_parent.getBlock(pos.x - 1,pos.y,pos.z);
    byte bRight=_parent.getBlock(pos.x + 1,pos.y,pos.z);
    byte bUp=_parent.getBlock(pos.x,pos.y,pos.z + 1);
    byte bDown=_parent.getBlock(pos.x,pos.y,pos.z - 1);
    if (bLeft == GRASS_TYPE || bRight == GRASS_TYPE || bDown == GRASS_TYPE || bUp == GRASS_TYPE) {
      _parent.setBlock(pos.x,pos.y,pos.z,GRASS_TYPE,false,true);
    }
    if (bLeft == DIRT_TYPE) {
      addActiveBlock(new BlockPosition(pos.x - 1,pos.y,pos.z));
    }
    if (bRight == DIRT_TYPE) {
      addActiveBlock(new BlockPosition(pos.x + 1,pos.y,pos.z));
    }
    if (bUp == DIRT_TYPE) {
      addActiveBlock(new BlockPosition(pos.x,pos.y,pos.z + 1));
    }
    if (bDown == DIRT_TYPE) {
      addActiveBlock(new BlockPosition(pos.x,pos.y,pos.z - 1));
    }
  }
  return true;
}
