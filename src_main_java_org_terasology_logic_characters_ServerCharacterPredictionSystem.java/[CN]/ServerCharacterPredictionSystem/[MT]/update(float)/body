{
  if (nextSendState < timer.getTimeInMs()) {
    for (    Map.Entry<EntityRef,CircularBuffer<CharacterStateEvent>> entry : characterStates.entrySet()) {
      if (entry.getValue().size() > 0) {
        entry.getKey().send(entry.getValue().getLast());
      }
    }
    nextSendState+=TIME_BETWEEN_STATE_REPLICATE;
  }
  long renderTime=timer.getTimeInMs() - RENDER_DELAY;
  for (  Map.Entry<EntityRef,CircularBuffer<CharacterStateEvent>> entry : characterStates.entrySet()) {
    if (entry.getKey().equals(localPlayer.getCharacterEntity())) {
      continue;
    }
    setToTime(renderTime,entry.getKey(),entry.getValue());
  }
}
