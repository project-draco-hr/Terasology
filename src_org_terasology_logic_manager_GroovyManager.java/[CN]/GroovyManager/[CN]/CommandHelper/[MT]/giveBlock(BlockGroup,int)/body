{
  if (quantity < 1)   return;
  BlockItemFactory factory=new BlockItemFactory(Terasology.getInstance().getCurrentGameState().getEntityManager());
  EntityRef item=factory.newInstance(blockGroup);
  ItemComponent itemComp=item.getComponent(ItemComponent.class);
  itemComp.stackCount=(byte)quantity;
  InventorySystem inventorySystem=CoreRegistry.get(ComponentSystemManager.class).get(InventorySystem.class);
  if (!inventorySystem.addItem(Terasology.getInstance().getActivePlayer().getEntity(),item)) {
    item.destroy();
  }
}
