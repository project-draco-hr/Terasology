{
  inputSystem=new InputSystem();
  InputConfig inputConfig=CoreRegistry.get(Config.class).getInputConfig();
  CoreRegistry.put(InputSystem.class,inputSystem);
  componentSystemManager.register(inputSystem,"engine:InputSystem");
  registerButtonBinds(ModManager.ENGINE_PACKAGE,modManager.getEngineReflections().getTypesAnnotatedWith(RegisterBindButton.class),inputConfig);
  registerAxisBinds(ModManager.ENGINE_PACKAGE,modManager.getEngineReflections().getTypesAnnotatedWith(RegisterBindAxis.class));
  for (  Mod mod : modManager.getActiveMods()) {
    registerButtonBinds(mod.getModInfo().getId(),mod.getReflections().getTypesAnnotatedWith(RegisterBindButton.class),inputConfig);
    registerAxisBinds(mod.getModInfo().getId(),mod.getReflections().getTypesAnnotatedWith(RegisterBindAxis.class));
  }
  for (int i=0; i < 9; ++i) {
    String inventorySlotBind="engine:toolbarSlot" + i;
    inputSystem.registerBindButton(inventorySlotBind,"Inventory Slot " + (i + 1),new ToolbarSlotButton(i));
    if (inputConfig.hasInputs(inventorySlotBind)) {
      for (      Input input : inputConfig.getInputs(inventorySlotBind)) {
        inputSystem.linkBindButtonToInput(input,inventorySlotBind);
      }
    }
 else {
      inputSystem.linkBindButtonToKey(Keyboard.KEY_1 + i,inventorySlotBind);
    }
  }
}
