{
  eventSystem.process();
  for (  ComponentSystem system : componentSystemManager.iterateAll()) {
    system.shutdown();
  }
  GUIManager.getInstance().closeAllWindows();
  try {
    CoreRegistry.get(WorldPersister.class).save(new File(PathManager.getInstance().getWorldSavePath(CoreRegistry.get(WorldProvider.class).getTitle()),ENTITY_DATA_FILE),WorldPersister.SaveFormat.Binary);
  }
 catch (  IOException e) {
    logger.log(Level.SEVERE,"Failed to save entities",e);
  }
  dispose();
  entityManager.clear();
}
