{
  componentLibrary=new ComponentLibraryImpl();
  componentLibrary.registerTypeHandler(BlockFamily.class,new BlockFamilyTypeHandler());
  componentLibrary.registerTypeHandler(Color4f.class,new Color4fTypeHandler());
  componentLibrary.registerTypeHandler(Quat4f.class,new Quat4fTypeHandler());
  componentLibrary.registerTypeHandler(Sound.class,new SoundTypeHandler(AudioManager.getInstance()));
  componentLibrary.registerTypeHandler(Vector3f.class,new Vector3fTypeHandler());
  componentLibrary.registerTypeHandler(Vector2f.class,new Vector2fTypeHandler());
  componentLibrary.registerTypeHandler(Vector3i.class,new Vector3iTypeHandler());
  _entityManager=new PojoEntityManager(componentLibrary);
  _entityManager.setEventSystem(new PojoEventSystem(_entityManager));
  CoreRegistry.put(EntityManager.class,_entityManager);
  _componentSystemManager=new ComponentSystemManager();
  CoreRegistry.put(ComponentSystemManager.class,_componentSystemManager);
  PrefabManager prefabManager=new PojoPrefabManager();
  CoreRegistry.put(PrefabManager.class,prefabManager);
  _entityManager.setPrefabManager(prefabManager);
  CoreRegistry.put(WorldPersister.class,new WorldPersister(componentLibrary,_entityManager));
  componentLibrary.registerComponentClass(ExplosionActionComponent.class);
  componentLibrary.registerComponentClass(PlaySoundActionComponent.class);
  componentLibrary.registerComponentClass(TunnelActionComponent.class);
  componentLibrary.registerComponentClass(AABBCollisionComponent.class);
  componentLibrary.registerComponentClass(BlockComponent.class);
  componentLibrary.registerComponentClass(BlockItemComponent.class);
  componentLibrary.registerComponentClass(BlockParticleEffectComponent.class);
  componentLibrary.registerComponentClass(CameraComponent.class);
  componentLibrary.registerComponentClass(CharacterMovementComponent.class);
  componentLibrary.registerComponentClass(CharacterSoundComponent.class);
  componentLibrary.registerComponentClass(HealthComponent.class);
  componentLibrary.registerComponentClass(InventoryComponent.class);
  componentLibrary.registerComponentClass(ItemComponent.class);
  componentLibrary.registerComponentClass(LightComponent.class);
  componentLibrary.registerComponentClass(LocalPlayerComponent.class);
  componentLibrary.registerComponentClass(LocationComponent.class);
  componentLibrary.registerComponentClass(MeshComponent.class);
  componentLibrary.registerComponentClass(PlayerComponent.class);
  componentLibrary.registerComponentClass(SimpleAIComponent.class);
  componentLibrary.registerComponentClass(AccessInventoryActionComponent.class);
  loadPrefabs();
  _componentSystemManager.register(new BlockEntityRegistry());
  _componentSystemManager.register(new CharacterMovementSystem());
  _componentSystemManager.register(new SimpleAISystem());
  _componentSystemManager.register(new ItemSystem());
  _componentSystemManager.register(new CharacterSoundSystem());
  _localPlayerSys=new LocalPlayerSystem();
  _componentSystemManager.register(_localPlayerSys);
  _componentSystemManager.register(new FirstPersonRenderer());
  _componentSystemManager.register(new HealthSystem());
  _componentSystemManager.register(new BlockEntitySystem());
  _componentSystemManager.register(new BlockParticleEmitterSystem());
  _componentSystemManager.register(new BlockDamageRenderer());
  _componentSystemManager.register(new InventorySystem());
  _componentSystemManager.register(new MeshRenderer());
  _componentSystemManager.register(new ExplosionAction());
  _componentSystemManager.register(new PlaySoundAction());
  _componentSystemManager.register(new TunnelAction());
  _componentSystemManager.register(new AccessInventoryAction());
  _hud=new UIHeadsUpDisplay();
  _hud.setVisible(true);
  _pauseMenu=new UIPauseMenu();
  _loadingScreen=new UILoadingScreen();
  _statusScreen=new UIStatusScreen();
  _inventoryScreen=new UIInventoryScreen();
  _metrics=new UIMetrics();
  _metrics.setVisible(true);
  _guiScreens.add(_metrics);
  _guiScreens.add(_hud);
  _guiScreens.add(_pauseMenu);
  _guiScreens.add(_loadingScreen);
  _guiScreens.add(_inventoryScreen);
  _guiScreens.add(_statusScreen);
}
