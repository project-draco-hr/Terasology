{
  KeyEvent event;
switch (state) {
case UP:
    event=KeyUpEvent.create(key,delta,target);
  break;
case DOWN:
event=KeyDownEvent.create(key,delta,target);
break;
case REPEAT:
event=KeyRepeatEvent.create(key,delta,target);
break;
default :
return false;
}
logger.info("Sending event: " + event.getState() + ", "+ event.getKeyName());
localPlayer.getEntity().send(event);
return event.isConsumed();
}
