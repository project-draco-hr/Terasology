{
  SeaLevelTemperatureFacet temperature=region.getRegionFacet(SeaLevelTemperatureFacet.class);
  HumidityFacet humidityFacet=region.getRegionFacet(HumidityFacet.class);
  Vector3i border=region.getBorderForFacet(BiomeFacet.class);
  BiomeFacet biomeFacet=new BiomeFacet(region.getRegion(),border);
  for (  Vector2i pos : biomeFacet.getRelativeRegion()) {
    float temp=temperature.get(pos);
    float hum=temp * humidityFacet.get(pos);
    if (temp >= 0.5f && hum < 0.3f) {
      biomeFacet.set(pos,WorldBiomeProvider.Biome.DESERT);
    }
 else     if (hum >= 0.3f && hum <= 0.6f && temp >= 0.5f) {
      biomeFacet.set(pos,WorldBiomeProvider.Biome.PLAINS);
    }
 else     if (temp <= 0.3f && hum > 0.5f) {
      biomeFacet.set(pos,WorldBiomeProvider.Biome.SNOW);
    }
 else     if (hum >= 0.2f && hum <= 0.6f && temp < 0.5f) {
      biomeFacet.set(pos,WorldBiomeProvider.Biome.MOUNTAINS);
    }
 else {
      biomeFacet.set(pos,WorldBiomeProvider.Biome.FOREST);
    }
  }
  region.setRegionFacet(BiomeFacet.class,biomeFacet);
}
