{
  SeaLevelTemperatureFacet temperature=region.getRegionFacet(SeaLevelTemperatureFacet.class);
  HumidityFacet humidityFacet=region.getRegionFacet(HumidityFacet.class);
  float[] tempInternal=temperature.getInternal();
  float[] humidityInternal=humidityFacet.getInternal();
  BiomeFacet biomeFacet=new BiomeFacet(new Vector2i(region.getRegion().sizeX(),region.getRegion().sizeZ()));
  WorldBiomeProvider.Biome[] biomeInternal=biomeFacet.getInternal();
  for (int i=0; i < biomeInternal.length; ++i) {
    float temp=tempInternal[i];
    float hum=temp * humidityInternal[i];
    if (temp >= 0.5f && hum < 0.3f) {
      biomeInternal[i]=WorldBiomeProvider.Biome.DESERT;
    }
 else     if (hum >= 0.3f && hum <= 0.6f && temp >= 0.5f) {
      biomeInternal[i]=WorldBiomeProvider.Biome.PLAINS;
    }
 else     if (temp <= 0.3f && hum > 0.5f) {
      biomeInternal[i]=WorldBiomeProvider.Biome.SNOW;
    }
 else     if (hum >= 0.2f && hum <= 0.6f && temp < 0.5f) {
      biomeInternal[i]=WorldBiomeProvider.Biome.MOUNTAINS;
    }
 else {
      biomeInternal[i]=WorldBiomeProvider.Biome.FOREST;
    }
  }
  region.setRegionFacet(BiomeFacet.class,biomeFacet);
}
