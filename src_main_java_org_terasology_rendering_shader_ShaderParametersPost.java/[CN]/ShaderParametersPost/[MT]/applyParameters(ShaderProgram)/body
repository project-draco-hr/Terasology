{
  PostProcessingRenderer.FBO scene=PostProcessingRenderer.getInstance().getFBO("scene");
  GL13.glActiveTexture(GL13.GL_TEXTURE1);
  PostProcessingRenderer.getInstance().getFBO("sceneBloom1").bindTexture();
  if (Config.getInstance().getBlurIntensity() != 0) {
    GL13.glActiveTexture(GL13.GL_TEXTURE2);
    PostProcessingRenderer.getInstance().getFBO("sceneBlur1").bindTexture();
  }
  GL13.glActiveTexture(GL13.GL_TEXTURE3);
  glBindTexture(GL11.GL_TEXTURE_2D,texture.getId());
  GL13.glActiveTexture(GL13.GL_TEXTURE4);
  scene.bindDepthTexture();
  GL13.glActiveTexture(GL13.GL_TEXTURE0);
  PostProcessingRenderer.getInstance().getFBO("sceneTonemapped").bindTexture();
  program.setInt("texScene",0);
  program.setInt("texBloom",1);
  if (Config.getInstance().getBlurIntensity() != 0) {
    program.setInt("texBlur",2);
  }
  program.setInt("texVignette",3);
  program.setInt("texDepth",4);
  program.setFloat("viewingDistance",Config.getInstance().getActiveViewingDistance() * 8.0f);
  if (CoreRegistry.get(LocalPlayer.class).isValid()) {
    Vector3f cameraPos=CoreRegistry.get(WorldRenderer.class).getActiveCamera().getPosition();
    Block block=CoreRegistry.get(WorldProvider.class).getBlock(cameraPos);
    program.setInt("swimming",block.isLiquid() ? 1 : 0);
  }
}
