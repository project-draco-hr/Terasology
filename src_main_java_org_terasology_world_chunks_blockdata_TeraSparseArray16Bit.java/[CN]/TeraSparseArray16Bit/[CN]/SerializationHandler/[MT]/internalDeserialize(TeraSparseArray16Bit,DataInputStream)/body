{
  Preconditions.checkState(array.inflated == null,"The internal array 'inflated' of type 'short[][]' is expected to be null");
  Preconditions.checkState(array.deflated == null,"The internal array 'deflated' of type 'short[]' is expected to be null");
  if (in.readBoolean()) {
    final int sizeY=array.getSizeY();
    final int rowlen=array.getSizeXZ();
    final short[][] inflated=array.inflated=new short[sizeY][];
    final int rows=in.readInt();
    for (int i=0; i < rows; i++) {
      final int index=in.readInt();
      final short[] row=inflated[index]=new short[rowlen];
      for (int j=0; j < rowlen; j++) {
        row[j]=in.readShort();
      }
    }
    final short[] deflated=array.deflated=new short[sizeY];
    for (int i=0; i < sizeY; i++) {
      deflated[i]=in.readShort();
    }
  }
 else {
    array.fill=in.readShort();
  }
}
