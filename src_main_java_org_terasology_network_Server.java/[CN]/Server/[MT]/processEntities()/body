{
  TIntIterator dirtyIterator=netDirty.iterator();
  while (dirtyIterator.hasNext()) {
    int netId=dirtyIterator.next();
    EntityRef entity=networkSystem.getEntity(netId);
    if (isOwned(entity)) {
      EntityData.PackedEntity entityData=entitySerializer.serialize(entity,Collections.EMPTY_SET,changedComponents.get(netId),Collections.EMPTY_SET,new ClientComponentFieldCheck());
      if (entityData != null) {
        NetData.NetMessage message=NetData.NetMessage.newBuilder().setType(NetData.NetMessage.Type.UPDATE_ENTITY).setUpdateEntity(NetData.UpdateEntityMessage.newBuilder().setEntity(entityData).setNetId(netId)).build();
        send(message);
      }
    }
  }
  netDirty.clear();
}
