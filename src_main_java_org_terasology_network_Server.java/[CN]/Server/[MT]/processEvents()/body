{
  List<NetData.EventMessage> messages=Lists.newArrayListWithExpectedSize(queuedReceivedEvents.size());
  queuedReceivedEvents.drainTo(messages);
  for (  NetData.EventMessage message : messages) {
    Event event=eventSerializer.deserialize(message.getEvent());
    EntityRef target=EntityRef.NULL;
    if (message.hasTargetBlockPos()) {
      target=blockEntityRegistry.getOrCreateBlockEntityAt(NetworkUtil.convert(message.getTargetBlockPos()));
    }
 else     if (message.hasTargetId()) {
      target=networkSystem.getEntity(message.getTargetId());
    }
    if (target.exists()) {
      target.send(event);
    }
 else {
      queuedReceivedEvents.offer(message);
    }
  }
}
