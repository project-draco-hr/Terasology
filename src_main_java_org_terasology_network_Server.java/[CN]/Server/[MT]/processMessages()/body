{
  List<NetData.NetMessage> messages=Lists.newArrayListWithExpectedSize(queuedMessages.size());
  queuedMessages.drainTo(messages);
  for (  NetData.NetMessage message : messages) {
    if (message.hasTime()) {
      timer.updateServerTime(message.getTime(),false);
    }
    for (    NetData.RemoveEntityMessage removeEntity : message.getRemoveEntityList()) {
      int netId=removeEntity.getNetId();
      EntityRef entity=networkSystem.getEntity(netId);
      if (entity.exists()) {
        networkSystem.unregisterNetworkEntity(entity);
        logger.info("Destroying entity: {}",entity);
        entity.destroy();
      }
    }
    for (    NetData.CreateEntityMessage createEntity : message.getCreateEntityList()) {
      createEntityMessage(createEntity);
    }
    for (    NetData.UpdateEntityMessage updateEntity : message.getUpdateEntityList()) {
      updateEntity(updateEntity);
    }
    for (    NetData.EventMessage event : message.getEventList()) {
      processEvent(event);
    }
  }
}
