{
  Map<Class<? extends Component>,Integer> componentIdTable=Maps.newHashMap();
  for (  ClassMetadata<? extends Component> componentMetadata : componentLibrary) {
    int index=componentIdTable.size();
    componentIdTable.put(componentMetadata.getType(),index);
    world.addComponentClass(MetadataUtil.getComponentClassName(componentMetadata.getType()));
  }
  entitySerializer.setComponentIdMapping(componentIdTable);
  prefabSerializer.setComponentIdMapping(componentIdTable);
}
