{
  ArrayList<BlockPosition> blockPositions=gatherAdjacentBlockPositions(origin);
  boolean moved=false;
  for (int i=0; i < blockPositions.size(); i++) {
    BlockPosition p=blockPositions.get(i);
    byte blockType1=_parent.getWorldProvider().getBlockAtPosition(new Vector3d(p.x,p.y,p.z));
    AABB entityAABB=getAABB();
    if (BlockManager.getInstance().getBlock(blockType1).isPenetrable())     continue;
    if (!entityAABB.overlaps(Block.AABBForBlockAt(p.x,p.y,p.z))) {
      continue;
    }
    if (BlockManager.getInstance().getBlock(blockType1).isComplexCollider()) {
      AABB closestCollider=null;
      double closestDistance=Double.POSITIVE_INFINITY;
      for (      AABB aabb : BlockManager.getInstance().getBlock(blockType1).getColliders(p.x,p.y,p.z)) {
        double direction=origin.y - aabb.getPosition().y;
        if (entityAABB.overlaps(aabb)) {
          double newDist=0;
          if (direction >= 0)           newDist=MathHelper.fastAbs(aabb.getPosition().y - p.y - aabb.getDimensions().y- entityAABB.getDimensions().y);
 else           newDist=MathHelper.fastAbs(aabb.getPosition().y - p.y + aabb.getDimensions().y + entityAABB.getDimensions().y);
          if (newDist < closestDistance) {
            closestCollider=aabb;
            closestDistance=newDist;
          }
        }
      }
      if (closestCollider != null) {
        double direction=origin.y - closestCollider.getPosition().y;
        if (direction >= 0) {
          getPosition().y=closestCollider.getPosition().y + closestCollider.getDimensions().y + entityAABB.getDimensions().y;
          getPosition().y+=Math.ulp(getPosition().y);
        }
 else {
          getPosition().y=closestCollider.getPosition().y - closestCollider.getDimensions().y - entityAABB.getDimensions().y;
          getPosition().y-=Math.ulp(getPosition().y);
        }
        moved=true;
      }
    }
 else {
      double direction=origin.y - getPosition().y;
      if (direction >= 0)       getPosition().y=p.y + 0.50001f + entityAABB.getDimensions().y;
 else       getPosition().y=p.y - 0.50001f - entityAABB.getDimensions().y;
      moved=true;
    }
  }
  return moved;
}
