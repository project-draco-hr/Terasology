{
  ArrayList<RayBlockIntersection.Intersection> inters=new ArrayList<RayBlockIntersection.Intersection>();
  int blockPosX, blockPosY, blockPosZ;
  for (int x=-3; x <= 3; x++) {
    for (int y=-3; y <= 3; y++) {
      for (int z=-3; z <= 3; z++) {
        blockPosX=(int)(getPosition().x + (getPosition().x >= 0 ? 0.5f : -0.5f)) + x;
        blockPosY=(int)(getPosition().y + (getPosition().y >= 0 ? 0.5f : -0.5f)) + y;
        blockPosZ=(int)(getPosition().z + (getPosition().z >= 0 ? 0.5f : -0.5f)) + z;
        PerformanceMonitor.startActivity("Player Get Block");
        byte blockType=_parent.getWorldProvider().getBlock(blockPosX,blockPosY,blockPosZ);
        PerformanceMonitor.endActivity();
        if (BlockManager.getInstance().getBlock(blockType).isSelectionRayThrough()) {
          continue;
        }
        PerformanceMonitor.startActivity("Player Intersect Block");
        ArrayList<RayBlockIntersection.Intersection> iss=RayBlockIntersection.executeIntersection(_parent.getWorldProvider(),blockPosX,blockPosY,blockPosZ,calcEyePosition(),_viewingDirection);
        if (iss != null) {
          inters.addAll(iss);
        }
        PerformanceMonitor.endActivity();
      }
    }
  }
  PerformanceMonitor.startActivity("Player sort intersects");
  if (inters.size() > 0) {
    Collections.sort(inters);
    return inters.get(0);
  }
  PerformanceMonitor.endActivity();
  return null;
}
