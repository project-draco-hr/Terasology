{
  if (_godMode || DEMO_FLIGHT)   return 0;
  float speedFactor=1.0f;
  if (_activeWalkingSpeed > 0)   speedFactor=(float)TeraMath.clamp(java.lang.Math.max(java.lang.Math.abs(_velocity.x),java.lang.Math.abs(_velocity.z)) / _activeWalkingSpeed);
  return java.lang.Math.sin(_stepCounter * frequency + phaseOffset) * amplitude * speedFactor;
}
