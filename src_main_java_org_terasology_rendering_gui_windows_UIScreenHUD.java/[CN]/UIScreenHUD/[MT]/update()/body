{
  super.update();
  updateHealthBar(localPlayer.getCharacterEntity().getComponent(HealthComponent.class));
  CharacterComponent character=localPlayer.getCharacterEntity().getComponent(CharacterComponent.class);
  if (character == null) {
    toolbar.setVisible(false);
    leftGearWheel.setVisible(false);
    rightGearWheel.setVisible(false);
  }
 else {
    toolbar.setVisible(true);
    toolbar.setSelected(character.selectedTool);
    leftGearWheel.setVisible(true);
    rightGearWheel.setVisible(true);
  }
  boolean enableDebug=config.getSystem().isDebugEnabled();
  debugLine1.setVisible(enableDebug);
  debugLine2.setVisible(enableDebug);
  debugLine3.setVisible(enableDebug);
  debugLine4.setVisible(enableDebug);
  if (enableDebug) {
    CameraTargetSystem cameraTarget=CoreRegistry.get(CameraTargetSystem.class);
    double memoryUsage=((double)Runtime.getRuntime().totalMemory() - (double)Runtime.getRuntime().freeMemory()) / 1048576.0;
    Timer timer=CoreRegistry.get(Timer.class);
    debugLine1.setText(String.format("fps: %.2f, mem usage: %.2f MB, total mem: %.2f, max mem: %.2f",timer.getFps(),memoryUsage,Runtime.getRuntime().totalMemory() / 1048576.0,Runtime.getRuntime().maxMemory() / 1048576.0));
    if (entityManager != null) {
      debugLine2.setText(String.format("Active Entities: %s, Current Target: %s",entityManager.getActiveEntities(),cameraTarget.toString()));
    }
    debugLine3.setText(String.format("%s, %.2f",CoreRegistry.get(LocalPlayer.class).getPosition(),(character != null) ? character.yaw : 0));
    debugLine4.setText(String.format("total vus: %s | active threads: %s",ChunkTessellator.getVertexArrayUpdateCount(),CoreRegistry.get(GameEngine.class).getActiveTaskCount()));
  }
}
