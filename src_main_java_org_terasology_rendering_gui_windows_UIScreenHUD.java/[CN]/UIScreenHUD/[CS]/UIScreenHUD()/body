{
  setId("hud");
  maximize();
  addVisibilityListener(new VisibilityListener(){
    @Override public void changed(    UIDisplayElement element,    boolean visibility){
      if (visibility) {
        toolbar.setEntity(CoreRegistry.get(LocalPlayer.class).getEntity(),0,9);
      }
    }
  }
);
  _hearts=new UIImage[10];
  for (int i=0; i < 10; i++) {
    _hearts[i]=new UIImage(Assets.getTexture("engine:icons"));
    _hearts[i].setVisible(true);
    _hearts[i].setTextureSize(new Vector2f(9f,9f));
    _hearts[i].setTextureOrigin(new Vector2f(52f,0.0f));
    _hearts[i].setSize(new Vector2f(18f,18f));
    _hearts[i].setVerticalAlign(EVerticalAlign.BOTTOM);
    _hearts[i].setHorizontalAlign(EHorizontalAlign.CENTER);
    _hearts[i].setPosition(new Vector2f(18f * i - 212f,-52f));
    addDisplayElement(_hearts[i]);
  }
  crosshair=new UIImage(Assets.getTexture("engine:gui"));
  crosshair.setId("crosshair");
  crosshair.setTextureSize(new Vector2f(20f,20f));
  crosshair.setTextureOrigin(new Vector2f(24f,24f));
  crosshair.setSize(new Vector2f(40f,40f));
  crosshair.setHorizontalAlign(EHorizontalAlign.CENTER);
  crosshair.setVerticalAlign(EVerticalAlign.CENTER);
  crosshair.setVisible(true);
  debugLine1=new UILabel();
  debugLine1.setPosition(new Vector2f(4,4));
  debugLine2=new UILabel();
  debugLine2.setPosition(new Vector2f(4,22));
  debugLine3=new UILabel();
  debugLine3.setPosition(new Vector2f(4,38));
  debugLine4=new UILabel();
  debugLine4.setPosition(new Vector2f(4,54));
  toolbar=new UIItemContainer(10);
  toolbar.setId("toolbar");
  toolbar.setVisible(true);
  toolbar.setHorizontalAlign(EHorizontalAlign.CENTER);
  toolbar.setVerticalAlign(EVerticalAlign.BOTTOM);
  toolbar.setVisible(true);
  toolbar.setCellMargin(new Vector2f(0f,0f));
  toolbar.setBorderImage("engine:inventory",new Vector2f(0f,84f),new Vector2f(169f,83f),new Vector4f(4f,4f,4f,4f));
  leftGearWheel=new UIImage(Assets.getTexture("engine:inventory"));
  leftGearWheel.setSize(new Vector2f(36f,36f));
  leftGearWheel.setTextureOrigin(new Vector2f(121.0f,168.0f));
  leftGearWheel.setTextureSize(new Vector2f(27.0f,27.0f));
  leftGearWheel.setId("leftGearWheel");
  leftGearWheel.setVisible(true);
  leftGearWheel.setHorizontalAlign(EHorizontalAlign.CENTER);
  leftGearWheel.setVerticalAlign(EVerticalAlign.BOTTOM);
  leftGearWheel.setPosition(new Vector2f(leftGearWheel.getPosition().x - 240f,leftGearWheel.getPosition().y - 4f));
  rightGearWheel=new UIImage(Assets.getTexture("engine:inventory"));
  rightGearWheel.setSize(new Vector2f(36f,36f));
  rightGearWheel.setTextureOrigin(new Vector2f(121.0f,168.0f));
  rightGearWheel.setTextureSize(new Vector2f(27.0f,27.0f));
  rightGearWheel.setId("rightGearWheel");
  rightGearWheel.setVisible(true);
  rightGearWheel.setHorizontalAlign(EHorizontalAlign.CENTER);
  rightGearWheel.setVerticalAlign(EVerticalAlign.BOTTOM);
  rightGearWheel.setPosition(new Vector2f(rightGearWheel.getPosition().x + 240f,rightGearWheel.getPosition().y - 4f));
  initCraftUI();
  addDisplayElement(crosshair);
  addDisplayElement(craftingCloudBackground);
  addDisplayElement(craftingResultBackground);
  addDisplayElement(craftingArrow);
  addDisplayElement(rightGearWheel);
  addDisplayElement(leftGearWheel);
  addDisplayElement(miniInventory);
  addDisplayElement(debugLine1);
  addDisplayElement(debugLine2);
  addDisplayElement(debugLine3);
  addDisplayElement(debugLine4);
  addDisplayElement(toolbar);
  addDisplayElement(craftElement);
  CoreRegistry.get(EventSystem.class).registerEventHandler(this);
  update();
  layout();
}
