{
  PerformanceMonitor.startActivity("GenerateBlock");
  byte blockId=_chunk.getBlock(x,y,z);
  Block block=BlockManager.getInstance().getBlock(blockId);
  ChunkMesh.RENDER_TYPE renderType=ChunkMesh.RENDER_TYPE.BILLBOARD_AND_TRANSLUCENT;
  if (!block.isTranslucent())   renderType=ChunkMesh.RENDER_TYPE.OPAQUE;
  if (block.getTitle().equals("Water") || block.getTitle().equals("Ice"))   renderType=ChunkMesh.RENDER_TYPE.WATER_AND_ICE;
  Block.BLOCK_FORM blockForm=block.getBlockForm();
  if (block.getCenterMesh() != null) {
    Vector4f colorOffset=block.calcColorOffsetFor(Block.SIDE.TOP,temp,hum);
    generateVerticesForBlockSide(mesh,x,y,z,colorOffset,block.getCenterMesh(),renderType,blockForm);
  }
  boolean[] drawDir=new boolean[6];
  for (  Block.SIDE side : Block.SIDE.values()) {
    Vector3i offset=side.getVector3i();
    byte blockToCheckId=_chunk.getParent().getBlock(_chunk.getBlockWorldPosX(x + offset.x),y + offset.y,_chunk.getBlockWorldPosZ(z + offset.z));
    drawDir[side.ordinal()]=isSideVisibleForBlockTypes(blockToCheckId,blockId,side);
  }
  if (y == 0) {
    drawDir[Block.SIDE.BOTTOM.ordinal()]=false;
  }
  if (blockForm == Block.BLOCK_FORM.LOWERED_BLOCK) {
    for (    Block.SIDE side : Block.SIDE.horizontalSides()) {
      Vector3i offset=side.getVector3i();
      byte blockToCheckId=_chunk.getParent().getBlock(_chunk.getBlockWorldPosX(x + offset.x),y - 1,_chunk.getBlockWorldPosZ(z + offset.z));
      drawDir[side.ordinal()]|=isSideVisibleForBlockTypes(blockToCheckId,blockId,side);
    }
    byte blockToCheckId=_chunk.getParent().getBlock(_chunk.getBlockWorldPosX(x),y + 1,_chunk.getBlockWorldPosZ(z));
    drawDir[Block.SIDE.TOP.ordinal()]|=(BlockManager.getInstance().getBlock(blockToCheckId).getBlockForm() != Block.BLOCK_FORM.LOWERED_BLOCK);
  }
  for (  Block.SIDE dir : Block.SIDE.values()) {
    if (drawDir[dir.ordinal()]) {
      Vector4f colorOffset=block.calcColorOffsetFor(dir,temp,hum);
      generateVerticesForBlockSide(mesh,x,y,z,colorOffset,block.getSideMesh(dir),renderType,blockForm);
    }
  }
  PerformanceMonitor.endActivity();
}
