{
  ColumnLayout mainLayout=new ColumnLayout();
  mainLayout.setPadding(new Border(4,4,4,4));
  mainLayout.setFamily("option-grid");
  UISlider mouseSensitivity=new UISlider("mouseSensitivity");
  mouseSensitivity.setIncrement(0.025f);
  mouseSensitivity.setPrecision(3);
  mainLayout.addWidget(new UILabel("mouseLabel","heading-input","Mouse"));
  mainLayout.addWidget(new RowLayout(new UILabel("Mouse Sensitivity:"),mouseSensitivity).setColumnRatios(0.4f).setPadding(padding));
  mainLayout.addWidget(new RowLayout(new UILabel("Invert Mouse:"),new UICheckbox("mouseYAxisInverted")).setColumnRatios(0.4f).setPadding(padding));
  Map<String,InputCategory> inputCategories=Maps.newHashMap();
  Map<SimpleUri,RegisterBindButton> inputsById=Maps.newHashMap();
  for (  Module module : moduleManager.getModules()) {
    if (module.isCodeModule()) {
      for (      Class<?> holdingType : module.getReflections().getTypesAnnotatedWith(InputCategory.class)) {
        InputCategory inputCategory=holdingType.getAnnotation(InputCategory.class);
        inputCategories.put(module.getId() + ":" + inputCategory.id(),inputCategory);
      }
      for (      Class<?> bindEvent : module.getReflections().getTypesAnnotatedWith(RegisterBindButton.class)) {
        if (BindButtonEvent.class.isAssignableFrom(bindEvent)) {
          RegisterBindButton bindRegister=bindEvent.getAnnotation(RegisterBindButton.class);
          inputsById.put(new SimpleUri(module.getId(),bindRegister.id()),bindRegister);
        }
      }
    }
  }
  addInputSection(inputCategories.remove("engine:movement"),mainLayout,inputsById);
  addInputSection(inputCategories.remove("engine:interaction"),mainLayout,inputsById);
  addInputSection(inputCategories.remove("engine:inventory"),mainLayout,inputsById);
  addInputSection(inputCategories.remove("engine:general"),mainLayout,inputsById);
  for (  InputCategory category : inputCategories.values()) {
    addInputSection(category,mainLayout,inputsById);
  }
  ScrollableArea area=new ScrollableArea();
  area.setContent(mainLayout);
  ColumnLayout footerGrid=new ColumnLayout("footer");
  footerGrid.setColumns(2);
  footerGrid.addWidget(new UIButton("reset","Restore Defaults"));
  footerGrid.addWidget(new UIButton("close","Back"));
  footerGrid.setPadding(new Border(4,4,0,0));
  RelativeLayout layout=new RelativeLayout();
  layout.addWidget(new UIImage("title",Assets.getTexture("engine:terasology")),HorizontalHint.create().fixedWidth(512).center(),VerticalHint.create().fixedHeight(128).alignTop(48));
  layout.addWidget(new UILabel("subtitle","title","Input Settings"),HorizontalHint.create().center(),VerticalHint.create().fixedHeight(48).alignTopRelativeTo("title",VerticalAlign.BOTTOM));
  layout.addWidget(area,HorizontalHint.create().fixedWidth(640).center(),VerticalHint.create().alignTopRelativeTo("subtitle",VerticalAlign.BOTTOM).alignBottomRelativeTo("footer",VerticalAlign.TOP,48));
  layout.addWidget(footerGrid,HorizontalHint.create().center().fixedWidth(400),VerticalHint.create().fixedHeight(48).alignBottom(48));
  setContents(layout);
}
