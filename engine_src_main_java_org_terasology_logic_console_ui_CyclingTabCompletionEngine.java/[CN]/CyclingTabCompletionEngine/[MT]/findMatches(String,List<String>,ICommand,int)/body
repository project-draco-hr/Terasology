{
  if (suggestedIndex <= 0) {
    updateCommandNamesIfNecessary();
    List<String> matches=Lists.newArrayList(CamelCaseMatcher.getMatches(commandName,commandNames));
    Collections.sort(matches);
    return matches.toArray(new String[matches.size()]);
  }
  List<String> finishedParameters=Lists.newArrayList();
  for (int i=0; i < suggestedIndex - 1; i++) {
    finishedParameters.add(commandParameters.get(i));
  }
  String currentValue=commandParameters.size() >= suggestedIndex ? commandParameters.get(suggestedIndex - 1) : null;
  EntityRef sender=CoreRegistry.get(LocalPlayer.class).getClientEntity();
  try {
    return command.suggestRaw(currentValue,finishedParameters,sender);
  }
 catch (  CommandSuggestionException e) {
    Throwable cause=e.getCause();
    String causeMessage=e.getLocalizedMessage();
    e.printStackTrace();
    if (causeMessage == null || causeMessage.isEmpty()) {
      causeMessage=cause.getMessage();
      if (causeMessage == null || causeMessage.isEmpty()) {
        causeMessage=cause.toString();
        if (causeMessage == null || causeMessage.isEmpty()) {
          return null;
        }
      }
    }
    console.addMessage("Error when suggesting command: " + causeMessage,CoreMessageType.ERROR);
    return null;
  }
}
