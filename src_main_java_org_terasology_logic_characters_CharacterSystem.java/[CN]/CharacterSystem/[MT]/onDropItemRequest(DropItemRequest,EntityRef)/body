{
  if (!event.getItem().exists() || !networkSystem.getOwnerEntity(event.getItem()).equals(networkSystem.getOwnerEntity(character))) {
    return;
  }
  EntityRef itemEntity=inventoryManager.removeItem(event.getInventoryEntity(),event.getItem(),1);
  if (networkSystem.getMode().isAuthority()) {
    Vector3f impulse=event.getImpulse();
    Vector3f newPosition=event.getNewPosition();
    ItemComponent item=itemEntity.getComponent(ItemComponent.class);
    EntityManager entityManager=CoreRegistry.get(EntityManager.class);
    BlockItemComponent blockItem=itemEntity.getComponent(BlockItemComponent.class);
    if (blockItem == null) {
      DroppedItemFactory droppedItemFactory=new DroppedItemFactory(entityManager);
      EntityRef droppedItem=droppedItemFactory.newInstance(new Vector3f(newPosition),item.icon,200,itemEntity);
      if (!droppedItem.equals(EntityRef.NULL)) {
        droppedItem.send(new ImpulseEvent(new Vector3f(impulse)));
      }
    }
 else {
      DroppedBlockFactory droppedBlockFactory=new DroppedBlockFactory(entityManager);
      EntityRef droppedBlock=droppedBlockFactory.newInstance(new Vector3f(newPosition),blockItem.blockFamily,20,blockItem.placedEntity);
      if (droppedBlock.exists()) {
        droppedBlock.send(new ImpulseEvent(new Vector3f(impulse)));
        blockItem.placedEntity=EntityRef.NULL;
        itemEntity.saveComponent(blockItem);
        itemEntity.destroy();
      }
    }
  }
}
