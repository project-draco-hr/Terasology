{
  if (event.getMouseButton() == MouseInput.MOUSE_RIGHT) {
    model.get().getItem(index).setExpanded(!model.get().getItem(index).isExpanded());
    Tree<T> selectedItem=model.get().getItem(selectedIndex.get());
    model.get().resetItems();
    int newIndex=model.get().indexOf(selectedItem);
    if (newIndex == -1) {
      selectedIndex.set(null);
    }
 else {
      selectedIndex.set(newIndex);
    }
    return true;
  }
 else   if (isEnabled()) {
    if (event.getMouseButton() == MouseInput.MOUSE_LEFT) {
      if (selectedIndex.get() != null && selectedIndex.get().equals(index)) {
        selectedIndex.set(null);
      }
 else {
        selectedIndex.set(index);
      }
      return true;
    }
  }
  return false;
}
