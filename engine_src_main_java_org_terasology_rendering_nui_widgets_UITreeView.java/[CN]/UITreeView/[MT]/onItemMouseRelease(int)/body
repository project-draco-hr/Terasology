{
  if (draggedItemIndex.get() != null && mouseOverItemIndex.get() != null) {
    Tree<T> child=model.get().getItem(draggedItemIndex.get());
    Tree<T> parent=model.get().getItem(mouseOverItemIndex.get());
    if (mouseOverItemType.get() == MouseOverItemType.TOP) {
      child.getParent().removeChild(child);
      parent.getParent().addChild(parent.getParent().indexOf(parent),child);
    }
 else     if (mouseOverItemType.get() == MouseOverItemType.CENTER) {
      child.getParent().removeChild(child);
      parent.addChild(child);
    }
 else {
      child.getParent().removeChild(child);
      parent.getParent().addChild(parent.getParent().indexOf(parent) + 1,child);
    }
    fireUpdateListeners();
  }
  if (draggedItemIndex.get() != null) {
    if (draggedItemIndex.get() != index) {
      selectedIndex.set(null);
    }
    draggedItemIndex.set(null);
  }
  if (mouseOverItemIndex.get() != null) {
    mouseOverItemIndex.set(null);
    mouseOverItemType.set(null);
  }
}
