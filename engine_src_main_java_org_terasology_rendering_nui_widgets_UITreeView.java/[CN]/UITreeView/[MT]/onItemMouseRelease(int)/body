{
  if (state.getDraggedItemIndex() != null && state.getMouseOverItemIndex() != null) {
    Tree<T> child=model.get().getItem(state.getDraggedItemIndex());
    Tree<T> parent=model.get().getItem(state.getMouseOverItemIndex());
    if (state.getMouseOverItemType() == MouseOverItemType.TOP) {
      child.getParent().removeChild(child);
      parent.getParent().addChild(parent.getParent().indexOf(parent),child);
    }
 else     if (state.getMouseOverItemType() == MouseOverItemType.CENTER) {
      child.getParent().removeChild(child);
      parent.addChild(child);
    }
 else {
      child.getParent().removeChild(child);
      parent.getParent().addChild(parent.getParent().indexOf(parent) + 1,child);
    }
    fireUpdateListeners();
  }
  if (state.getDraggedItemIndex() != null) {
    state.setSelectedIndex(null);
    state.setDraggedItemIndex(null);
  }
  if (state.getMouseOverItemIndex() != null) {
    state.setMouseOverItemIndex(null);
    state.setMouseOverItemType(null);
  }
}
