{
  canvas.setPart(TREE_ITEM);
  model.get().setEnumerateExpandedOnly(false);
  Vector2i result=new Vector2i();
  for (int i=0; i < model.get().getElementCount(); i++) {
    Tree<T> item=model.get().getElement(i);
    Vector2i preferredSize=canvas.getCurrentStyle().getMargin().grow(itemRenderer.getPreferredSize(item.getValue(),canvas).addX(item.getDepth() * itemIndent.get()));
    result.x=Math.max(result.x,preferredSize.x);
    result.y+=preferredSize.y;
  }
  model.get().setEnumerateExpandedOnly(true);
  return result;
}
