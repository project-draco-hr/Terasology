{
  if (draggedItemIndex != null && mouseOverItemIndex != null) {
    Tree<T> child=model.get().getItem(draggedItemIndex);
    Tree<T> parent=model.get().getItem(mouseOverItemIndex);
    if (mouseOverItemType == MouseOverItemType.TOP) {
      child.getParent().removeChild(child);
      parent.getParent().addChild(parent.getParent().indexOf(parent),child);
    }
 else     if (mouseOverItemType == MouseOverItemType.CENTER) {
      child.getParent().removeChild(child);
      parent.addChild(child);
    }
 else {
      child.getParent().removeChild(child);
      parent.getParent().addChild(parent.getParent().indexOf(parent) + 1,child);
    }
    fireUpdateListeners();
  }
  if (draggedItemIndex != null) {
    selectedIndex.set(null);
    draggedItemIndex=null;
  }
  if (mouseOverItemIndex != null) {
    model.get().getItem(mouseOverItemIndex).setSelected(false);
    mouseOverItemIndex=null;
  }
}
