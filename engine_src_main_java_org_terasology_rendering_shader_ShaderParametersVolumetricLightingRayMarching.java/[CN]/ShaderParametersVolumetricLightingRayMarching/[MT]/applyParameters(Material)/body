{
  super.applyParameters(program);
  int texId=0;
  DefaultRenderingProcess.FBO sceneOpaque=DefaultRenderingProcess.getInstance().getFBO("sceneOpaque");
  if (CoreRegistry.get(Config.class).getRendering().isVolumetricLighting()) {
    if (sceneOpaque != null) {
      GL13.glActiveTexture(GL13.GL_TEXTURE0 + texId);
      sceneOpaque.bindDepthTexture();
      program.setInt("texSceneOpaqueDepth",texId++,true);
    }
    DefaultRenderingProcess.FBO volumetricLighting=DefaultRenderingProcess.getInstance().getFBO("volumetricLighting");
    program.setFloat2("texelSize",1.0f / volumetricLighting.width,1.0f / volumetricLighting.height,true);
    GL13.glActiveTexture(GL13.GL_TEXTURE0 + texId);
    DefaultRenderingProcess.getInstance().bindFboDepthTexture("sceneShadowMap");
    program.setInt("texSceneShadowMap",texId++,true);
    Camera activeCamera=CoreRegistry.get(WorldRenderer.class).getActiveCamera();
    Camera lightCamera=CoreRegistry.get(WorldRenderer.class).getLightCamera();
    if (lightCamera != null && activeCamera != null) {
      program.setMatrix4("invViewProjMatrix",activeCamera.getInverseViewProjectionMatrix(),true);
      program.setMatrix4("lightViewMatrix",lightCamera.getViewMatrix(),true);
      program.setMatrix4("lightProjMatrix",lightCamera.getProjectionMatrix(),true);
      program.setMatrix4("lightViewProjMatrix",lightCamera.getViewProjectionMatrix(),true);
      Vector3f activeCameraToLightSpace=new Vector3f();
      activeCameraToLightSpace.sub(activeCamera.getPosition(),lightCamera.getPosition());
      program.setFloat3("activeCameraToLightSpace",activeCameraToLightSpace.x,activeCameraToLightSpace.y,activeCameraToLightSpace.z,true);
    }
    program.setFloat4("volumetricLightingSettings",volLightingDensity,volLightingDecay,volLightingPhi,volLightingScattering,true);
    if (CoreRegistry.get(Config.class).getRendering().isCloudShadows()) {
      Texture clouds=Assets.getTexture("engine:perlinNoiseTileable");
      GL13.glActiveTexture(GL13.GL_TEXTURE0 + texId);
      glBindTexture(GL11.GL_TEXTURE_2D,clouds.getId());
      program.setInt("texSceneClouds",texId++,true);
    }
  }
}
