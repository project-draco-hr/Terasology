{
  for (  UIItemCell cell : cells) {
    removeDisplayElement(cell);
  }
  cells.clear();
  EntityManager entityManager=CoreRegistry.get(EntityManager.class);
  PrefabManager prefMan=CoreRegistry.get(PrefabManager.class);
  Iterator<Prefab> it=prefMan.listPrefabs().iterator();
  while (it.hasNext()) {
    Prefab prefab=it.next();
    EntityRef entity=entityManager.create(prefab);
    if (entity.exists() && entity.getComponent(ItemComponent.class) != null) {
      UIItemCell cell=new UIItemCell(null,cellSize);
      cell.setDrag(false);
      cell.setItem(entity,0);
      cell.setDisplayItemCount(false);
      cell.setVisible(true);
      cell.addClickListener(clickListener);
      cells.add(cell);
      container.addDisplayElement(cell);
    }
  }
  BlockItemFactory blockFactory=new BlockItemFactory(entityManager);
  List<List<BlockUri>> blocks=new ArrayList<List<BlockUri>>();
  blocks.add(sortItems(BlockManager.getInstance().listRegisteredBlockUris()));
  blocks.add(sortItems(BlockManager.getInstance().listAvailableBlockUris()));
  blocks.add(sortItems(BlockManager.getInstance().listShapelessBlockUris()));
  for (  List<BlockUri> blockList : blocks) {
    for (    BlockUri block : blockList) {
      EntityRef entity=blockFactory.newInstance(BlockManager.getInstance().getBlockFamily(block.getFamilyUri()),99);
      if (entity.exists()) {
        UIItemCell cell=new UIItemCell(null,cellSize);
        cell.setDrag(false);
        cell.setItem(entity,0);
        cell.setDisplayItemCount(false);
        cell.setVisible(true);
        cell.addClickListener(clickListener);
        cells.add(cell);
        container.addDisplayElement(cell);
      }
    }
  }
}
