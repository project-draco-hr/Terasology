{
  LocalPlayer localPlayer=CoreRegistry.get(LocalPlayer.class);
  if (localPlayer == null)   return;
  GroovyHelpManager helpMan=new GroovyHelpManager();
  LocalPlayerComponent localPlayerComponent=localPlayer.getEntity().getComponent(LocalPlayerComponent.class);
  if (!isMinionSelected()) {
    helpMan.spawnCube(localPlayerComponent.selectedMinion);
    EntityRef minion=getSelectedMinion();
    MeshComponent meshComponent=minion.getComponent(MeshComponent.class);
    meshComponent.Name="Begla";
    meshComponent.ID=localPlayerComponent.selectedMinion;
    minion.saveComponent(meshComponent);
  }
 else {
    SimpleMinionAIComponent minionai=getSelectedMinion().getComponent(SimpleMinionAIComponent.class);
    if (minionai != null) {
      if (helpMan.calcSelectedBlock() != null) {
        Vector3i centerPos=helpMan.calcSelectedBlock().getBlockPosition();
        minionai.followingPlayer=false;
        minionai.movementTarget=new Vector3f(centerPos.x,centerPos.y,centerPos.z);
      }
    }
  }
}
