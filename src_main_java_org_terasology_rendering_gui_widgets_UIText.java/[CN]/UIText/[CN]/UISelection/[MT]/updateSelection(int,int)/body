{
  if (start != end) {
    rectangles.clear();
    int charIndex=start;
    while (charIndex < end) {
      int nextLineStart=findNextChar(charIndex,'\n',false);
      Vector2f pos=toDisplayPosition(charIndex);
      pos.y-=cursor.getSize().y;
      Vector2f size=new Vector2f(calcTextWidth(text.getText().substring(charIndex,Math.min(end,nextLineStart))),cursor.getSize().y);
      rectangles.add(new Vector2f[]{pos,size});
      charIndex=nextLineStart;
    }
    selectionRectangle.setVisible(true);
  }
 else {
    selectionRectangle.setVisible(false);
  }
}
