{
  boolean scrollbarVisibility=isScrollbarVisible();
  String str=getText();
  String clampedText=string;
  if (maxLength > 0) {
    if (str.length() >= maxLength) {
      return 0;
    }
    if (str.length() + string.length() > maxLength) {
      clampedText=string.substring(0,maxLength - str.length());
    }
  }
  setText(str + clampedText);
  calcContentHeight();
  if (scrollbarVisibility != isScrollbarVisible()) {
    setText(getText());
  }
  return clampedText.length();
}
