{
  Optional<String> idOpt=extractId(text);
  if (idOpt.isPresent()) {
    String id=idOpt.get();
    ResourceUrn uri=new ResourceUrn(id);
    SimpleUri projectUri=new SimpleUri(uri.getModuleName(),uri.getResourceName());
    TranslationProject project=getProject(projectUri);
    if (project != null) {
      Optional<String> opt=project.translate(uri.getFragmentName(),otherLocale);
      if (opt.isPresent()) {
        return opt.get();
      }
    }
    logger.warn("Invalid id '{}'",id);
    return "?" + id + "?";
  }
  return text;
}
