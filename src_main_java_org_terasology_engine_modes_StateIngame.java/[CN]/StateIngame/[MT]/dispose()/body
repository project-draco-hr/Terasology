{
  boolean saveWorld=CoreRegistry.get(NetworkSystem.class).getMode().isAuthority();
  networkSystem.shutdown();
  eventSystem.process();
  componentSystemManager.shutdown();
  guiManager.closeAllWindows();
  if (saveWorld) {
    try {
      CoreRegistry.get(WorldPersister.class).save(new File(PathManager.getInstance().getCurrentWorldPath(),TerasologyConstants.ENTITY_DATA_FILE),WorldPersister.SaveFormat.Binary);
    }
 catch (    IOException e) {
      logger.error("Failed to save entities",e);
    }
  }
  entityManager.clear();
  if (worldRenderer != null) {
    worldRenderer.dispose();
    worldRenderer=null;
  }
}
