{
  for (  EntityRef entity : entityManager.iteratorEntities(CharacterMovementComponent.class,LocationComponent.class)) {
    LocationComponent location=entity.getComponent(LocationComponent.class);
    if (!worldProvider.isBlockActive(location.getWorldPosition()))     continue;
    CharacterMovementComponent movementComp=entity.getComponent(CharacterMovementComponent.class);
    updatePosition(delta,entity,location,movementComp);
    updateSwimStatus(location,movementComp);
    entity.saveComponent(location);
    entity.saveComponent(movementComp);
  }
}
