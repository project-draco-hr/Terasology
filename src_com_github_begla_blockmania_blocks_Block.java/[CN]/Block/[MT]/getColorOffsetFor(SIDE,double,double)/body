{
  Vector4f color=new Vector4f(1.0f,1.0f,1.0f,1.0f);
  if (getColorSource() == COLOR_SOURCE.COLOR_LUT)   color.set(colorForTemperatureAndHumidity(temperature,humidity));
 else   if (getColorSource() == COLOR_SOURCE.FOLIAGE_LUT) {
    color.set(foliageColorForTemperatureAndHumidity(temperature,humidity));
  }
  color.x*=getColorOffset()[side.ordinal()].x;
  color.y*=getColorOffset()[side.ordinal()].y;
  color.z*=getColorOffset()[side.ordinal()].z;
  color.w*=getColorOffset()[side.ordinal()].w;
  return color;
}
