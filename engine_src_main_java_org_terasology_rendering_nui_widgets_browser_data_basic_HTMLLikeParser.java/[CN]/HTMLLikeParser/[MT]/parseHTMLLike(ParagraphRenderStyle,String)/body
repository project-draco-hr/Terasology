{
  if (text == null) {
    return Collections.emptyList();
  }
  StringReader reader=new StringReader(text);
  List<ParagraphData> result=new LinkedList<>();
  int character;
  try {
    StringBuilder sb=new StringBuilder();
    Font font=null;
    Color color=null;
    String hyperlink=null;
    HyperlinkParagraphData hyperlinkParagraphData=new HyperlinkParagraphData(paragraphRenderStyle);
    while ((character=reader.read()) != -1) {
      char c=(char)character;
      if (c == '\n') {
        hyperlinkParagraphData.append(sb.toString(),new DefaultTextRenderStyle(font,color),hyperlink);
        result.add(hyperlinkParagraphData);
        sb.setLength(0);
        hyperlinkParagraphData=new HyperlinkParagraphData(paragraphRenderStyle);
        font=null;
        color=null;
        hyperlink=null;
      }
 else       if (c == '<') {
        char nextChar=(char)reader.read();
        if (nextChar == '/') {
          char id=(char)reader.read();
          if (id == 'f') {
            if (sb.length() > 0) {
              hyperlinkParagraphData.append(sb.toString(),new DefaultTextRenderStyle(font,color),hyperlink);
              sb.setLength(0);
            }
            font=null;
          }
 else           if (id == 'c') {
            if (sb.length() > 0) {
              hyperlinkParagraphData.append(sb.toString(),new DefaultTextRenderStyle(font,color),hyperlink);
              sb.setLength(0);
            }
            color=null;
          }
 else           if (id == 'h') {
            if (sb.length() > 0) {
              hyperlinkParagraphData.append(sb.toString(),new DefaultTextRenderStyle(font,color),hyperlink);
              sb.setLength(0);
            }
            hyperlink=null;
          }
 else {
            throw new IllegalArgumentException("Unable to parse text - " + text);
          }
          reader.read();
        }
 else         if (nextChar == 'f') {
          if (sb.length() > 0) {
            hyperlinkParagraphData.append(sb.toString(),new DefaultTextRenderStyle(font,color),hyperlink);
            sb.setLength(0);
          }
          reader.read();
          font=Assets.getFont(readUntilCharacter(reader,'>'));
        }
 else         if (nextChar == 'c') {
          if (sb.length() > 0) {
            hyperlinkParagraphData.append(sb.toString(),new DefaultTextRenderStyle(font,color),hyperlink);
            sb.setLength(0);
          }
          reader.read();
          color=new Color(Integer.parseInt(readUntilCharacter(reader,'>'),16));
        }
 else         if (nextChar == 'h') {
          if (sb.length() > 0) {
            hyperlinkParagraphData.append(sb.toString(),new DefaultTextRenderStyle(font,color),hyperlink);
            sb.setLength(0);
          }
          reader.read();
          hyperlink=readUntilCharacter(reader,'>');
        }
 else         if (nextChar == 'l') {
          readUntilCharacter(reader,'>');
          sb.append('\n');
        }
      }
 else       if (c == '&') {
        String escape=readUntilCharacter(reader,';');
        if (escape.equals("gt")) {
          sb.append('>');
        }
 else         if (escape.equals("lt")) {
          sb.append('<');
        }
 else         if (escape.equals("amp")) {
          sb.append('&');
        }
 else {
          throw new IllegalArgumentException("Unknown escape sequence - " + escape);
        }
      }
 else {
        sb.append(c);
      }
    }
    if (sb.length() > 0) {
      hyperlinkParagraphData.append(sb.toString(),new DefaultTextRenderStyle(font,color),hyperlink);
    }
    result.add(hyperlinkParagraphData);
  }
 catch (  IOException exp) {
  }
  return result;
}
