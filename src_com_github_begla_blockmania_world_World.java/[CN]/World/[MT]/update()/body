{
  FastSet<Chunk> visibleChunks;
synchronized (_updateThread) {
    visibleChunks=_visibleChunks;
  }
  _player.update();
  _chunkUpdateManager.updateDisplayLists();
  _cloudOffset.x+=_windDirection.x;
  _cloudOffset.y+=_windDirection.y;
  if (_cloudOffset.x >= _clouds.length * 16 / 2 || _cloudOffset.x <= -(_clouds.length * 16 / 2)) {
    _windDirection.x=-_windDirection.x;
  }
 else   if (_cloudOffset.y >= _clouds.length * 32 / 2 || _cloudOffset.y <= -(_clouds.length * 32 / 2)) {
    _windDirection.y=-_windDirection.y;
  }
  if (Helper.getInstance().getTime() - _lastWindUpdate > _nextWindUpdateInSeconds * 1000) {
    _windDirection.x=(float)_rand.randomDouble() / 4f;
    _windDirection.y=(float)_rand.randomDouble() / 4f;
    _nextWindUpdateInSeconds=(short)(Math.abs(_rand.randomInt()) % 16 + 32);
    _lastWindUpdate=Helper.getInstance().getTime();
  }
  for (  Chunk c : visibleChunks) {
    c.update();
  }
  _chunkUpdateManager.updateVisibleChunks(visibleChunks);
}
