{
  ShaderManager.getInstance().enableShader("chunk");
  glEnable(GL_TEXTURE_2D);
  TextureManager.getInstance().bindTexture("terrain");
  updateVisibleChunks();
  for (FastSet.Record n=_visibleChunks.head(), end=_visibleChunks.tail(); (n=n.getNext()) != end; ) {
    Chunk c=_visibleChunks.valueOf(n);
    c.render(false);
    if (Configuration.getSettingBoolean("CHUNK_OUTLINES")) {
      c.getAABB().render();
    }
  }
  for (FastSet.Record n=_visibleChunks.head(), end=_visibleChunks.tail(); (n=n.getNext()) != end; ) {
    for (int i=0; i < 2; i++) {
      if (i == 0) {
        glColorMask(false,false,false,false);
      }
 else {
        glColorMask(true,true,true,true);
      }
      _visibleChunks.valueOf(n).render(true);
    }
  }
  glDisable(GL_TEXTURE_2D);
  ShaderManager.getInstance().enableShader(null);
}
