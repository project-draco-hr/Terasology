{
  if (_chunkCache.size() <= capacity()) {
    return;
  }
  FastList<Chunk> cachedChunks;
synchronized (this) {
    cachedChunks=new FastList(_chunkCache.values());
  }
  Collections.sort(cachedChunks);
  while (cachedChunks.size() > capacity()) {
    Chunk chunkToDelete=cachedChunks.removeLast();
synchronized (this) {
      _chunkCache.remove(chunkToDelete.getChunkId());
      chunkToDelete.setCached(false);
    }
    chunkToDelete.writeChunkToDisk();
    chunkToDelete.dispose();
  }
}
