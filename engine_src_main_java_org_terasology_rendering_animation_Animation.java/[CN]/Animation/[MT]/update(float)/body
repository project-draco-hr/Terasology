{
  if (currentState != AnimState.RUNNING) {
    return;
  }
  elapsedTime+=delta;
  while (elapsedTime > duration) {
    elapsedTime-=duration;
    currentFrame++;
    if (repeatMode == RepeatMode.RUN_ONCE) {
      animator.apply(1f);
      end();
      return;
    }
  }
  float ipol=timeModifier.apply(elapsedTime / duration);
  animator.apply(ipol);
}
