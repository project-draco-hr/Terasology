{
  Preconditions.checkNotNull(array,"The parameter 'array' must not be null");
  final Entry entry=get(array.getClass());
  if (entry == null)   throw new UnsupportedOperationException("Unable to encode the supplied array of class: " + array.getClass().getName());
  final ChunksProtobuf.TeraArray.Builder b=ChunksProtobuf.TeraArray.newBuilder();
  final ByteBuffer buf=entry.handler.serialize(array,null);
  buf.rewind();
  b.setData(ByteString.copyFrom(buf));
  b.setType(entry.protobufType);
  if (entry.protobufType == ChunksProtobuf.Type.Unknown)   b.setClassName(entry.arrayClassName);
  return b.build();
}
