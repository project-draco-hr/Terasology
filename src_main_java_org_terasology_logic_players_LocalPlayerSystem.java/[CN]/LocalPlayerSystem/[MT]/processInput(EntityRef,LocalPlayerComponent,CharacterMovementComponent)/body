{
  Vector3f relMove=new Vector3f(relativeMovement);
  relMove.y=0;
  Quat4f viewRot=new Quat4f();
switch (characterMovementComponent.mode) {
case WALKING:
    QuaternionUtil.setEuler(viewRot,TeraMath.DEG_TO_RAD * localPlayerComponent.viewYaw,0,0);
  QuaternionUtil.quatRotate(viewRot,relMove,relMove);
break;
default :
QuaternionUtil.setEuler(viewRot,TeraMath.DEG_TO_RAD * localPlayerComponent.viewYaw,TeraMath.DEG_TO_RAD * localPlayerComponent.viewPitch,0);
QuaternionUtil.quatRotate(viewRot,relMove,relMove);
relMove.y+=relativeMovement.y;
break;
}
entity.send(new CharacterMoveInputEvent(inputSequenceNumber++,localPlayerComponent.viewPitch,localPlayerComponent.viewYaw,relMove,run,jump));
}
