{
  if (!localPlayer.isValid())   return;
  EntityRef entity=localPlayer.getCharacterEntity();
  LocalPlayerComponent localPlayerComponent=entity.getComponent(LocalPlayerComponent.class);
  CharacterMovementComponent characterMovementComponent=entity.getComponent(CharacterMovementComponent.class);
  CharacterComponent characterComp=entity.getComponent(CharacterComponent.class);
  LocationComponent location=entity.getComponent(LocationComponent.class);
  if (localPlayerComponent.isDead) {
    return;
  }
  processInput(entity,localPlayerComponent,characterMovementComponent);
  updateCamera(localPlayerComponent,characterMovementComponent,characterComp,location);
  localPlayerComponent.handAnimation=Math.max(0,localPlayerComponent.handAnimation - 2.5f * delta);
  entity.saveComponent(localPlayerComponent);
}
