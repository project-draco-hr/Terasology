{
  Component oldComponent=store.put(entityId,component);
  if (eventSystem != null) {
    if (oldComponent == null) {
      eventSystem.send(createEntityRef(entityId),AddComponentEvent.newInstance(),component);
    }
 else {
      eventSystem.send(createEntityRef(entityId),ChangedComponentEvent.newInstance(),component);
    }
  }
  notifyChangeSubscribers(getEntity(entityId));
  return component;
}
