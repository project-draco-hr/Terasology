{
  if (!widgetList.isEmpty()) {
    Vector2i availableSize=canvas.size();
    int numRows=TeraMath.ceilToInt((float)widgetList.size() / columns);
    if (numRows > 0) {
      availableSize.y-=verticalSpacing * (numRows - 1);
    }
    if (columns > 0) {
      availableSize.x-=horizontalSpacing * (columns - 1);
    }
    Vector2i rowSize=availableSize;
    rowSize.y/=numRows;
    Vector2i currentOffset=new Vector2i();
    int currentColumn=0;
    for (    UIWidget widget : widgetList) {
      Vector2i cellSize=new Vector2i(rowSize);
      cellSize.x*=columnWidths[currentColumn];
      if (widget != null) {
        Vector2i drawSize=new Vector2i(cellSize);
        Rect2i drawRegion=Rect2i.createFromMinAndSize(currentOffset.x,currentOffset.y,drawSize.x,drawSize.y);
        canvas.drawElement(widget,drawRegion);
      }
      if (++currentColumn == columns) {
        currentColumn=0;
        currentOffset.x=0;
        currentOffset.y+=cellSize.y + verticalSpacing;
      }
 else {
        currentOffset.x+=cellSize.x + horizontalSpacing;
      }
    }
  }
}
