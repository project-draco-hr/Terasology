{
  if (!widgetList.isEmpty()) {
    Vector2i availableSize=canvas.size();
    int numRows=TeraMath.ceilToInt((float)widgetList.size() / columns);
    if (numRows > 0) {
      availableSize.y-=verticalSpacing * (numRows - 1);
    }
    if (columns > 0) {
      availableSize.x-=horizontalSpacing * (columns - 1);
    }
    Iterator<List<UIWidget>> rows=getRowIterator();
    int rowOffsetY=0;
    while (rows.hasNext()) {
      List<UIWidget> row=rows.next();
      RowInfo rowInfo=calculateRowSize(row,canvas,availableSize);
      int cellOffsetX=0;
      for (int i=0; i < row.size(); ++i) {
        UIWidget widget=row.get(i);
        Vector2i widgetSize=rowInfo.widgetSizes.get(i);
        if (widget != null) {
          int cellOffsetY=rowOffsetY + rowAlignment.getOffset(widgetSize.y,rowInfo.size.y);
          Rect2i drawRegion=Rect2i.createFromMinAndSize(cellOffsetX,cellOffsetY,widgetSize.x,widgetSize.y);
          canvas.drawElement(widget,drawRegion);
        }
        cellOffsetX+=widgetSize.x + horizontalSpacing;
      }
      rowOffsetY+=rowInfo.size.y + verticalSpacing;
    }
  }
}
