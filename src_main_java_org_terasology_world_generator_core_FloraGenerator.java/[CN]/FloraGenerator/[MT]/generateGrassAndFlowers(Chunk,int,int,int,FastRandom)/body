{
  Block targetBlock=c.getBlock(x,y,z);
  if ((targetBlock.equals(grassBlock) || targetBlock.equals(sandBlock) || targetBlock.equals(snowBlock)) && c.getBlock(x,y + 1,z).equals(airBlock)) {
    double grassRand=(random.randomDouble() + 1.0) / 2.0;
    double grassProb=1.0;
    WorldBiomeProvider.Biome biome=biomeProvider.getBiomeAt(c.getBlockWorldPosX(x),c.getBlockWorldPosZ(z));
switch (biome) {
case PLAINS:
      grassProb=1.0 - config.getPlainsGrassDensity();
    break;
case MOUNTAINS:
  grassProb=1.0 - config.getMountainGrassDensity();
break;
case FOREST:
grassProb=1.0 - config.getForestGrassDensity();
break;
case SNOW:
grassProb=1.0 - config.getSnowGrassDensity();
break;
case DESERT:
grassProb=1.0 - config.getDesertGrassDensity();
break;
}
if (grassRand > grassProb) {
double rand=random.standNormalDistrDouble();
if (rand > -0.4 && rand < 0.4) {
c.setBlock(x,y + 1,z,tallGrass1);
}
 else if (rand > -0.6 && rand < 0.6) {
c.setBlock(x,y + 1,z,tallGrass2);
}
 else {
c.setBlock(x,y + 1,z,tallGrass3);
}
double flowerRand=random.randomDouble();
if (random.standNormalDistrDouble() < -2) {
int index=random.randomIntAbs(flowers.size());
c.setBlock(x,y + 1,z,flowers.get(index));
}
}
}
}
