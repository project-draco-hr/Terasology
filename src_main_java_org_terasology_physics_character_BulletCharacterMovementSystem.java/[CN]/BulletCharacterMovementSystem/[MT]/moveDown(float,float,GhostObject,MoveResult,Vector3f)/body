{
  float stepDist=-stepDownAmount + fallAmount;
{
    SweepCallback callback=sweep(position,new Vector3f(position.x,position.y + stepDist - VERTICAL_PENETRATION_LEEWAY,position.z),collider,VERTICAL_PENETRATION_LEEWAY);
    if (callback.hasHit()) {
      float actualDist=Math.min(0,(stepDist - VERTICAL_PENETRATION_LEEWAY) * callback.closestHitFraction + VERTICAL_PENETRATION_LEEWAY);
      position.y+=actualDist;
      if (fallAmount < 0) {
        result.hitBottom=true;
      }
    }
 else {
      position.y+=stepDist;
    }
  }
}
