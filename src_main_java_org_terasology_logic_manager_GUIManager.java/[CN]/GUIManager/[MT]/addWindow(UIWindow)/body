{
  if (window != null) {
    logger.debug("Added window with ID \"{}\"",window.getId());
    renderer.addDisplayElementToPosition(0,window);
    window.initialise();
    EntityManager entityManager=CoreRegistry.get(EntityManager.class);
    if (entityManager != null) {
      for (      EntityRef worldEntity : CoreRegistry.get(EntityManager.class).getEntitiesWith(WorldComponent.class)) {
        worldEntity.send(new UIWindowOpenedEvent(window));
      }
    }
  }
  return window;
}
