{
  FloatBuffer pixels=BufferUtils.createFloatBuffer(4);
  FBO scene=PostProcessingRenderer.getInstance().getFBO("scene1");
  scene.bindTexture();
  glGetTexImage(GL11.GL_TEXTURE_2D,0,GL12.GL_BGRA,GL11.GL_FLOAT,pixels);
  scene.unbindTexture();
  _sceneLuminance=0.2126f * pixels.get(2) + 0.7152f * pixels.get(1) + 0.0722f * pixels.get(0);
  if (_sceneLuminance > 0.0f) {
    _exposure=(float)TeraMath.lerp(_exposure,TARGET_LUMINANCE / _sceneLuminance,ADJUSTMENT_SPEED);
  }
  float maxExposure=MAX_EXPOSURE;
  if (CoreRegistry.get(WorldRenderer.class).getSkysphere().getDaylight() == 0.0) {
    maxExposure=MAX_EXPOSURE_NIGHT;
  }
  if (_exposure > maxExposure) {
    _exposure=maxExposure;
  }
  if (_exposure < MIN_EXPOSURE) {
    _exposure=MIN_EXPOSURE;
  }
}
