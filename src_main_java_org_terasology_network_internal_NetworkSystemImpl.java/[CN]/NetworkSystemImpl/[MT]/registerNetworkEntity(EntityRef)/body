{
  if (mode == NetworkMode.NONE) {
    return;
  }
  NetworkComponent netComponent=entity.getComponent(NetworkComponent.class);
  if (mode == NetworkMode.SERVER) {
    netComponent.setNetworkId(nextNetId++);
    entity.saveComponent(netComponent);
  }
  logger.debug("Registered Network Entity: {}",entity);
  if (NULL_NET_ID != netIdToEntityId.put(netComponent.getNetworkId(),entity.getId())) {
    logger.error("Registered duplicate network id");
  }
  if (mode == NetworkMode.SERVER) {
switch (netComponent.replicateMode) {
case OWNER:
      NetClient clientPlayer=getNetOwner(entity);
    if (clientPlayer != null) {
      clientPlayer.setNetInitial(netComponent.getNetworkId());
    }
  break;
default :
for (NetClient client : netClientList) {
  client.setNetInitial(netComponent.getNetworkId());
}
break;
}
if (netComponent.owner.exists()) {
ownerLookup.put(entity,netComponent.owner);
ownedLookup.put(netComponent.owner,entity);
}
}
}
