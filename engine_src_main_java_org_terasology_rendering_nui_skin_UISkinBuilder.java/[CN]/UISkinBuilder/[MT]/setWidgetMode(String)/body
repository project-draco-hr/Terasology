{
  if (currentWidget == null) {
    throw new IllegalStateException("Widget class must be set before widget mode");
  }
  saveStyle();
  modes.put(currentWidget,mode);
  currentMode=mode;
  return this;
}
