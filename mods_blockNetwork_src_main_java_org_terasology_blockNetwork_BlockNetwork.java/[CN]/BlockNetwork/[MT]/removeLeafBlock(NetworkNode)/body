{
  logger.info("Removing leaf node: " + networkNode.toString());
  validateNotMutating();
  mutating=true;
  try {
    if (!leafNodes.remove(networkNode.location,networkNode))     throw new IllegalArgumentException("Leaf node not found in the BlockNetwork");
    final Iterator<SimpleNetwork> networkIterator=networks.iterator();
    while (networkIterator.hasNext()) {
      final SimpleNetwork network=networkIterator.next();
      if (network.hasLeafNode(networkNode)) {
        boolean degenerate=network.removeLeafNode(networkNode);
        if (!degenerate)         notifyLeafNodesRemoved(network,Collections.singleton(networkNode));
 else {
          NetworkNode onlyLeafNode=network.getLeafNodes().iterator().next();
          notifyLeafNodesRemoved(network,Sets.<NetworkNode>newHashSet(networkNode,onlyLeafNode));
          networkIterator.remove();
          notifyNetworkRemoved(network);
        }
      }
    }
  }
  finally {
    mutating=false;
  }
}
