{
  boolean complete=true;
  Vector3i newChunkPos=calcCamChunkOffset();
  Vector3i viewingDistance=config.getRendering().getViewDistance().getChunkDistance();
  chunkProvider.completeUpdate();
  chunkProvider.beginUpdate();
  for (  Vector3i pos : Region3i.createFromCenterExtents(newChunkPos,new Vector3i(viewingDistance.x / 2,viewingDistance.y / 2,viewingDistance.z / 2))) {
    RenderableChunk chunk=chunkProvider.getChunk(pos);
    if (chunk == null) {
      complete=false;
    }
 else     if (chunk.isDirty()) {
      ChunkView view=worldProvider.getLocalView(chunk.getPosition());
      if (view == null) {
        continue;
      }
      chunk.setDirty(false);
      ChunkMesh[] newMeshes=new ChunkMesh[VERTICAL_SEGMENTS];
      for (int seg=0; seg < VERTICAL_SEGMENTS; seg++) {
        newMeshes[seg]=chunkTessellator.generateMesh(view,ChunkConstants.SIZE_Y / VERTICAL_SEGMENTS,seg * (ChunkConstants.SIZE_Y / VERTICAL_SEGMENTS));
      }
      chunk.setPendingMesh(newMeshes);
      if (chunk.getPendingMesh() != null) {
        for (int j=0; j < chunk.getPendingMesh().length; j++) {
          chunk.getPendingMesh()[j].generateVBOs();
        }
        if (chunk.getMesh() != null) {
          for (int j=0; j < chunk.getMesh().length; j++) {
            chunk.getMesh()[j].dispose();
          }
        }
        chunk.setMesh(chunk.getPendingMesh());
        chunk.setPendingMesh(null);
      }
      return false;
    }
  }
  return complete;
}
