{
  if (json.isJsonPrimitive()) {
    JsonPrimitive primitive=json.getAsJsonPrimitive();
    if (primitive.isBoolean()) {
      return new Tree<>(new JsonNode(name,json.getAsBoolean(),ElementType.PRIMITIVE));
    }
 else     if (primitive.isNumber()) {
      return new Tree<>(new JsonNode(name,json.getAsNumber(),ElementType.PRIMITIVE));
    }
 else     if (primitive.isString()) {
      return new Tree<>(new JsonNode(name,json.getAsString(),ElementType.PRIMITIVE));
    }
 else {
      return new Tree<>(new JsonNode(name,null,ElementType.PRIMITIVE));
    }
  }
 else   if (json.isJsonArray()) {
    Tree<JsonNode> tree=new Tree<>(new JsonNode(name,null,ElementType.ARRAY));
    JsonArray array=json.getAsJsonArray();
    for (int i=0; i < array.size(); i++) {
      tree.addChild(serialize(array.get(i)));
    }
    return tree;
  }
 else   if (json.isJsonObject()) {
    Tree<JsonNode> tree=new Tree<>(new JsonNode(name,null,ElementType.OBJECT));
    JsonObject object=json.getAsJsonObject();
    for (    Map.Entry<String,JsonElement> entry : object.entrySet()) {
      tree.addChild(serialize(entry.getKey(),entry.getValue()));
    }
    return tree;
  }
 else {
    return new Tree<>(new JsonNode(name,null,ElementType.NULL));
  }
}
