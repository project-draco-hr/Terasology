{
  Vector3f lightPosition=new Vector3f(activeCamera.getPosition().x,0.0f,activeCamera.getPosition().z);
  float texelSize=1.0f / config.getRendering().getShadowMapResolution();
  texelSize*=2.0f;
  lightCamera.getViewProjectionMatrix().transformVector(lightPosition);
  lightPosition.set(TeraMath.fastFloor(lightPosition.x / texelSize) * texelSize,0.0f,TeraMath.fastFloor(lightPosition.z / texelSize) * texelSize);
  lightCamera.getInverseViewProjectionMatrix().transformVector(lightPosition);
  float stepSize=50f;
  Vector3f sunDirection=skysphere.getQuantizedSunDirection(stepSize);
  Vector3f sunPosition=new Vector3f(sunDirection);
  sunPosition.scale(256.0f + 64.0f);
  lightPosition.add(sunPosition);
  lightCamera.getPosition().set(lightPosition);
  Vector3f negSunDirection=new Vector3f(sunDirection);
  negSunDirection.scale(-1.0f);
  lightCamera.getViewingDirection().set(negSunDirection);
}
