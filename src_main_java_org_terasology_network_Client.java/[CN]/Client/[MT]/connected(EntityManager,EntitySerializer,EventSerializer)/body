{
  if (awaitingConnectMessage) {
    awaitingConnectMessage=false;
    this.entitySerializer=entitySerializer;
    this.eventSerializer=eventSerializer;
    clientEntity=entityManager.create("engine:client");
    CoreRegistry.get(EventSystem.class).registerEventReceiver(this,ChunkUnloadedEvent.class,WorldComponent.class);
    EntityRef clientInfo=entityManager.create("engine:clientInfo");
    DisplayInformationComponent displayInfo=clientInfo.getComponent(DisplayInformationComponent.class);
    displayInfo.name=name;
    clientInfo.saveComponent(displayInfo);
    ClientComponent clientComponent=clientEntity.getComponent(ClientComponent.class);
    clientComponent.clientInfo=clientInfo;
    clientEntity.saveComponent(clientComponent);
  }
}
