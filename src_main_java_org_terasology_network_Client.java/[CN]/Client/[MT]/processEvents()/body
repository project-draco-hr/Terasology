{
  List<NetData.EventMessage> messages=Lists.newArrayListWithExpectedSize(queuedEvents.size());
  queuedEvents.drainTo(messages);
  for (  NetData.EventMessage message : messages) {
    Event event=eventSerializer.deserialize(message.getEvent());
    EntityRef target=networkSystem.getEntity(message.getTargetId());
    if (target.exists()) {
      if (networkSystem.getOwner(target).equals(this)) {
        if (event instanceof NetworkEvent) {
          ((NetworkEvent)event).setClient(clientEntity);
        }
        target.send(event);
      }
 else {
        logger.warn("Received event {} for non-owned entity {} from {}",event,target,this);
      }
    }
 else {
      queuedEvents.offer(message);
    }
  }
}
