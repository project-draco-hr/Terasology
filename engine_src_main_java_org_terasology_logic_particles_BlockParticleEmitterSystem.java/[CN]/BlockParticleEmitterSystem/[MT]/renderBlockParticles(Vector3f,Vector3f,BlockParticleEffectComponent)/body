{
  float temperature=worldProvider.getBiomeProvider().getTemperatureAt((int)worldPos.x,(int)worldPos.z);
  float humidity=worldProvider.getBiomeProvider().getHumidityAt((int)worldPos.x,(int)worldPos.z);
  glPushMatrix();
  glTranslated(worldPos.x - cameraPosition.x,worldPos.y - cameraPosition.y,worldPos.z - cameraPosition.z);
  for (  Particle particle : particleEffect.particles) {
    glPushMatrix();
    glTranslatef(particle.position.x,particle.position.y,particle.position.z);
    applyOrientation();
    glScalef(particle.size,particle.size,particle.size);
    float light=worldRenderer.getRenderingLightValueAt(new Vector3f(worldPos.x + particle.position.x,worldPos.y + particle.position.y,worldPos.z + particle.position.z));
    renderParticle(particle,particleEffect.blockType.getArchetypeBlock(),temperature,humidity,light);
    glPopMatrix();
  }
  glPopMatrix();
}
