{
  List<Chunk> chunks=CoreRegistry.get(WorldRenderer.class).getChunksInProximity();
  HashSet<RigidBody> newBodies=new HashSet<RigidBody>();
  boolean updatedThisFrame=false;
  for (int i=0; i < 32 && i < chunks.size(); i++) {
    final Chunk chunk=chunks.get(i);
    if (chunk != null) {
      if (!updatedThisFrame && updateRigidBody(chunk)) {
        updatedThisFrame=true;
      }
      RigidBody c=chunk.getRigidBody();
      if (c != null) {
        newBodies.add(c);
        if (!_chunks.contains(c)) {
          _discreteDynamicsWorld.addRigidBody(c);
        }
      }
    }
  }
  for (  RigidBody body : _chunks) {
    if (!newBodies.contains(body)) {
      _discreteDynamicsWorld.removeRigidBody(body);
    }
  }
  _chunks=newBodies;
}
