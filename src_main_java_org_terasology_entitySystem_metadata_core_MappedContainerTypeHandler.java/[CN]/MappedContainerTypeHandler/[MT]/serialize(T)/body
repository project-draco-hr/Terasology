{
  if (value == null)   return null;
  EntityData.Value.Builder result=EntityData.Value.newBuilder();
  for (  FieldMetadata fieldInfo : fields.values()) {
    EntityData.Value fieldValue=fieldInfo.serialize(value);
    if (fieldValue != null) {
      result.addNameValue(EntityData.NameValue.newBuilder().setName(fieldInfo.getName()).setValue(fieldValue).build());
    }
  }
  return result.build();
}
