{
  Vector2f textAbsPos=text.getAbsolutePosition();
  Vector2f clampedMousePos=new Vector2f(Math.max(mousePos.x,textAbsPos.x),Math.max(mousePos.y,textAbsPos.y));
  Vector2f relative=new Vector2f(clampedMousePos.x - textAbsPos.x,clampedMousePos.y - textAbsPos.y);
  if (clampedMousePos.y >= (textAbsPos.y + getSize().y + getScrollPosition())) {
    return text.getText().length();
  }
 else   if (clampedMousePos.y <= textAbsPos.y) {
    return 0;
  }
 else {
    return toTextPositionLocal(relative);
  }
}
