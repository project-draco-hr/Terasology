{
  for (  DrawOperation operation : drawOnTopOperations) {
    operation.draw();
  }
  drawOnTopOperations.clear();
  Util.checkGLError();
  if (!subregionStack.isEmpty()) {
    logger.error("UI Subregions are not being correctly ended");
    while (!subregionStack.isEmpty()) {
      subregionStack.pop().close();
    }
  }
  Iterator<Map.Entry<TextCacheKey,Map<Material,Mesh>>> textIterator=cachedText.entrySet().iterator();
  while (textIterator.hasNext()) {
    Map.Entry<TextCacheKey,Map<Material,Mesh>> entry=textIterator.next();
    if (!usedText.contains(entry.getKey())) {
      for (      Mesh mesh : entry.getValue().values()) {
        Assets.dispose(mesh);
      }
      textIterator.remove();
    }
  }
  usedText.clear();
  glMatrixMode(GL_MODELVIEW);
  glPopMatrix();
  glMatrixMode(GL_PROJECTION);
  glPopMatrix();
  glMatrixMode(GL_MODELVIEW);
  glEnable(GL_DEPTH_TEST);
  glDisable(GL_BLEND);
  checkGLError();
}
