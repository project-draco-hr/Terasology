{
  if (element == null || !element.isVisible()) {
    return;
  }
  String family=(element.getFamily() != null) ? element.getFamily() : state.family;
  UIStyle newStyle=state.skin.getStyleFor(family,element.getClass(),element.getMode());
  Rect2i regionArea=applySizesToRegion(region,newStyle);
  try (SubRegion ignored=subRegionForWidget(element,regionArea,false)){
    if (element.isSkinAppliedByCanvas()) {
      drawBackground();
      try (SubRegion withMargin=subRegionForWidget(element,newStyle.getMargin().shrink(Rect2i.createFromMinAndSize(Vector2i.zero(),regionArea.size())),false)){
        element.onDraw(this);
      }
     }
 else {
      element.onDraw(this);
    }
  }
 }
