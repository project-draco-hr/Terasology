{
  BufferedReader reader=new BufferedReader(new InputStreamReader(stream));
  FontHeader header=parseHeader(uri,reader.readLine());
  FontCommon common=parseCommon(uri,reader.readLine());
  List<FontPage> pages=Lists.newArrayList();
  for (int i=0; i < common.pages; ++i) {
    pages.add(parsePage(uri,reader.readLine()));
  }
  int charCount=getCharacterCount(uri,reader.readLine());
  List<FontChar> characters=Lists.newArrayListWithCapacity(charCount);
  for (int i=0; i < charCount; ++i) {
    characters.add(parseCharacter(uri,reader.readLine()));
  }
  List<Texture> textures=Lists.newArrayListWithCapacity(common.pages);
  for (  FontPage page : pages) {
    textures.add(Assets.getTexture(uri.getPackage(),page.textureFile.substring(0,page.textureFile.lastIndexOf('.'))));
  }
  Font result=new Font(uri);
  result.setLineHeight(common.lineHeight);
  for (  FontChar character : characters) {
    Texture tex=textures.get(character.page);
    FontCharacter finalChar=new FontCharacter(((float)character.x) / tex.getWidth(),((float)character.y) / tex.getHeight(),character.width,character.height,character.xOffset,character.yOffset,character.xAdvance,tex);
    result.setCharacter(character.id,finalChar);
  }
  return result;
}
