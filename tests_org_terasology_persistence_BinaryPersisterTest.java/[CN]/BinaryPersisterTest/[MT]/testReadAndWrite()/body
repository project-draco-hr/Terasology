{
  persistenceManager.registerPersistableClasses(TestPersistable.class);
  TestPersistable testPersist=new TestPersistable();
  testPersist.doubleVal=3.5;
  testPersist.stringVal="Test";
  testPersist.vector3dVal=new Vector3d(1,2,3);
  LevelWriter writer=createLevelWriter();
  writer.write(testPersist);
  writer.close();
  assertFalse(writer.isInErrorState());
  LevelReader reader=createLevelReader();
  assertTrue(reader.hasNext());
  TestPersistable result=(TestPersistable)reader.next();
  assertFalse(reader.hasNext());
  assertEquals(testPersist.doubleVal,result.doubleVal,0.0001);
  assertEquals(testPersist.stringVal,result.stringVal);
  assertEquals(testPersist.vector3dVal,result.vector3dVal);
}
