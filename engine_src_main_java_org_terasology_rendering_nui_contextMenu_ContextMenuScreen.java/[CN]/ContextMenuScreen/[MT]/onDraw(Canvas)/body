{
  canvas.addInteractionRegion(mainListener);
  Vector2i currentPosition=null;
  int currentWidth=0;
  for (  ContextMenuLevel level : menuLevels) {
    if (level.isVisible()) {
      if (currentPosition == null) {
        currentPosition=new Vector2i(level.getPosition());
      }
 else {
        currentPosition.addX(currentWidth);
      }
      UIWidget menuWidget=level.getMenuWidget();
      Rect2i region=Rect2i.createFromMinAndSize(currentPosition,canvas.calculatePreferredSize(menuWidget));
      double percentageThreshold=0.9;
      if (region.maxY() > canvas.getRegion().height() * percentageThreshold) {
        region=Rect2i.createFromMinAndMax(region.minX(),region.minY() - (region.maxY() - canvas.getRegion().height()) - (int)(canvas.getRegion().height() * (1 - percentageThreshold)),region.maxX(),canvas.getRegion().height());
      }
      currentWidth=canvas.calculatePreferredSize(menuWidget).getX() - 8;
      canvas.drawWidget(level.getMenuWidget(),region);
    }
  }
}
