{
  if (Terasology.getInstance().getTimeInMs() - lastInteraction < 200) {
    return;
  }
  for (  EntityRef entity : entityManager.iteratorEntities(LocalPlayerComponent.class,InventoryComponent.class)) {
    LocalPlayerComponent localPlayer=entity.getComponent(LocalPlayerComponent.class);
    InventoryComponent inventory=entity.getComponent(InventoryComponent.class);
    if (localPlayer.isDead)     continue;
    EntityRef selectedItemEntity=inventory.itemSlots.get(localPlayer.selectedTool);
    if (Mouse.isButtonDown(0) || button == 0) {
      if (selectedItemEntity != null) {
        ItemComponent item=selectedItemEntity.getComponent(ItemComponent.class);
switch (item.usage) {
case OnBlock:
          useItemOnBlock(entity,selectedItemEntity);
        break;
default :
      attack(entity,selectedItemEntity);
    break;
}
}
 else {
attack(entity,selectedItemEntity);
}
lastInteraction=Terasology.getInstance().getTimeInMs();
}
 else if (Mouse.isButtonDown(1) || button == 1) {
attack(entity,selectedItemEntity);
lastInteraction=Terasology.getInstance().getTimeInMs();
}
}
}
