{
  if (networkSystem.getMode().isAuthority()) {
    InventoryComponent from=fromInventory.getComponent(InventoryComponent.class);
    InventoryComponent to=toInventory.getComponent(InventoryComponent.class);
    if (from != null && to != null) {
      moveItemAmountCommon(fromInventory,from,fromSlot,toInventory,to,toSlot,amount);
    }
  }
 else {
    MoveItemAmountRequest request=new MoveItemAmountRequest(fromInventory,fromSlot,toInventory,toSlot,amount,nextChangeId++);
    localPlayer.getClientEntity().send(request);
    pendingMoves.addLast(request);
    InventoryComponent from=getPredictedInventoryComponent(request.getFromInventory());
    InventoryComponent to=getPredictedInventoryComponent(request.getToInventory());
    moveItemAmountCommon(fromInventory,from,request.getFromSlot(),toInventory,to,request.getToSlot(),amount);
  }
}
