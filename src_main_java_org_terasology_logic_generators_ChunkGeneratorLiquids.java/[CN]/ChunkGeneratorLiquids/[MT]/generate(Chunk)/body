{
  boolean grassGenerated=false, lavaGenerated=false;
  for (int y=Chunk.CHUNK_DIMENSION_Y - 1; y >= 0; y-=2) {
    String title=BlockManager.getInstance().getBlock(c.getBlock(8,y,8)).getTitle();
    BlockPosition blockWorldPos=new BlockPosition(c.getBlockWorldPosX(8),y,c.getBlockWorldPosZ(8));
    boolean set=false;
    if ((title.equals("Grass") || title.equals("Snow")) && !grassGenerated && y >= 32 && _parent.getParent().getRandom().randomDouble() > 0.8) {
      _parent.getParent().setBlock(blockWorldPos.x,blockWorldPos.y,blockWorldPos.z,BlockManager.getInstance().getBlock("Water").getId(),true,true,true);
      set=true;
      grassGenerated=true;
    }
 else     if (title.equals("Stone") && !lavaGenerated && c.getBlock(8,y + 1,8) == 0x0) {
      _parent.getParent().setBlock(blockWorldPos.x,blockWorldPos.y,blockWorldPos.z,BlockManager.getInstance().getBlock("Lava").getId(),true,true,true);
      set=true;
      lavaGenerated=true;
    }
    if (set) {
      LiquidSimulator sim=new LiquidSimulator(_parent.getParent());
      sim.addActiveBlock(blockWorldPos);
      sim.simulateAll();
    }
    if (lavaGenerated)     return;
  }
}
