{
  int counter=0;
  float intens=0f;
  Vector3f origin=VectorPool.getVector(x,y,z);
  ArrayList<Vector3f> positions=new ArrayList<Vector3f>();
  positions.add(VectorPool.getVector(x + dirX + 1,y + dirY,z + dirZ));
  positions.add(VectorPool.getVector(x + dirX - 1,y + dirY,z + dirZ));
  positions.add(VectorPool.getVector(x + dirX,y + dirY,z + dirZ + 1));
  positions.add(VectorPool.getVector(x + dirX,y + dirY,z + dirZ - 1));
  positions.add(VectorPool.getVector(x + dirX + 1,y + dirY,z + dirZ + 1));
  positions.add(VectorPool.getVector(x + dirX + 1,y + dirY,z + dirZ - 1));
  positions.add(VectorPool.getVector(x + dirX - 1,y + dirY,z + dirZ - 1));
  positions.add(VectorPool.getVector(x + dirX - 1,y + dirY,z + dirZ + 1));
  for (  Vector3f p : positions) {
    if (!p.equals(origin)) {
      if (Block.getBlockForType(_parent.getBlock(getBlockWorldPosX((int)p.x),getBlockWorldPosY((int)p.y),getBlockWorldPosZ((int)p.z))).isCastingShadows()) {
        counter++;
      }
    }
    VectorPool.putVector(p);
  }
  intens=Configuration.OCCLUSION_INTENS * (float)Math.sqrt(counter);
  return 1f - intens;
}
