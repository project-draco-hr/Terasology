{
  final List<MessageType> allowedTypes=Arrays.asList(types);
  return Collections2.filter(messageHistory,new Predicate<Message>(){
    @Override public boolean apply(    Message input){
      return allowedTypes.contains(input.getType());
    }
  }
);
}
