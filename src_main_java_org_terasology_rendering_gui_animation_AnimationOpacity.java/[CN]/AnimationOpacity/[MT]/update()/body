{
  if ((factor > 0 && currentOpacity < toOpacity) || (factor < 0 && currentOpacity > toOpacity)) {
    currentOpacity+=factor * speed * 0.01f;
    if (!target.isVisible() && currentOpacity > 0.05f) {
      target.setVisible(true);
    }
  }
 else {
    if (!isRepeat()) {
      currentOpacity=toOpacity;
      if (currentOpacity <= 0) {
        target.setVisible(false);
      }
      this.stop();
    }
 else {
      float tempOpacity=toOpacity;
      toOpacity=fromOpacity;
      fromOpacity=tempOpacity;
      currentOpacity=fromOpacity;
      factor*=-1;
    }
  }
}
