{
  ChunkView view=getProvider().getViewAround(getPosition());
  if (view == null) {
    return;
  }
  view.lock();
  try {
    if (!view.isValidView()) {
      return;
    }
    ChunkImpl chunk=getProvider().getChunkForProcessing(getPosition());
    if (chunk.getChunkState() != ChunkImpl.State.ADJACENCY_GENERATION_PENDING) {
      return;
    }
    getPipeline().getWorldGenerator().applySecondPass(getPosition(),view);
    chunk.setChunkState(ChunkImpl.State.INTERNAL_LIGHT_GENERATION_PENDING);
    getPipeline().requestReview(Region3i.createFromCenterExtents(getPosition(),ChunkConstants.SECOND_PASS_EXTENTS));
  }
  finally {
    view.unlock();
  }
}
