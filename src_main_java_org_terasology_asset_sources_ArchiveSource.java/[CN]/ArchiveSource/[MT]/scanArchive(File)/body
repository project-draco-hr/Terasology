{
  ZipFile archive;
  if (file.getName().endsWith(".jar")) {
    archive=new JarFile(file,false);
  }
 else {
    archive=new ZipFile(file);
  }
  Enumeration<? extends ZipEntry> lister=archive.entries();
  while (lister.hasMoreElements()) {
    ZipEntry entry=lister.nextElement();
    String entryPath=entry.getName();
    if (entryPath.startsWith(basePath)) {
      String key=entryPath.substring(basePath.length());
      AssetUri uri=getUri(key);
      if (uri == null || !uri.isValid())       continue;
      logger.info("Discovered resource " + uri);
      URL url=new URL("jar:file:" + file.getAbsolutePath() + "!/"+ entryPath);
      addItem(uri,url);
    }
  }
}
