{
  EntityRef item=getTransferItem();
  if (item.exists()) {
    ItemComponent itemComponent=item.getComponent(ItemComponent.class);
    InventoryManager inventoryManager=CoreRegistry.get(InventoryManager.class);
    if (!inventoryManager.giveItem(itemComponent.container,getTransferItem())) {
      item.destroy();
    }
    CharacterComponent charComp=CoreRegistry.get(LocalPlayer.class).getCharacterEntity().getComponent(CharacterComponent.class);
    charComp.transferSlot=EntityRef.NULL;
    CoreRegistry.get(LocalPlayer.class).getCharacterEntity().saveComponent(charComp);
  }
}
