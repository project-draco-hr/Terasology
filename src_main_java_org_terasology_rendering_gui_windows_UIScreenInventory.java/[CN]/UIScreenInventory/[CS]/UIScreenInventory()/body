{
  setId("inventory");
  setBackgroundColor(new Color(0,0,0,200));
  setModal(true);
  setCloseBinds(new String[]{InventoryButton.ID});
  setCloseKeys(new int[]{Keyboard.KEY_ESCAPE});
  maximize();
  addVisibilityListener(new VisibilityListener(){
    @Override public void changed(    UIDisplayElement element,    boolean visibility){
      if (visibility) {
        toolbar.setEntity(CoreRegistry.get(LocalPlayer.class).getEntity(),0,9);
        inventory.setEntity(CoreRegistry.get(LocalPlayer.class).getEntity(),10);
        GUIManager.getInstance().getWindowById("hud").getElementById("leftGearWheel").setVisible(false);
        GUIManager.getInstance().getWindowById("hud").getElementById("rightGearWheel").setVisible(false);
        layout();
        inventory.setPosition(new Vector2f(Display.getWidth() / 2 - inventory.getSize().x / 2,Display.getHeight() + 5f));
        inventory.setAnimation(new AnimationMove(new Vector2f(Display.getWidth() / 2 - inventory.getSize().x / 2,Display.getHeight() - 192f),20f));
        inventory.getAnimation(AnimationMove.class).start();
        leftGearWheel.setAnimation(new AnimationRotate(-120f,10f));
        leftGearWheel.getAnimation(AnimationRotate.class).start();
        rightGearWheel.setAnimation(new AnimationRotate(120f,10f));
        rightGearWheel.getAnimation(AnimationRotate.class).start();
      }
 else {
        GUIManager.getInstance().getWindowById("hud").getElementById("leftGearWheel").setVisible(true);
        GUIManager.getInstance().getWindowById("hud").getElementById("rightGearWheel").setVisible(true);
      }
    }
  }
);
  addMouseButtonListener(new MouseButtonListener(){
    @Override public void wheel(    UIDisplayElement element,    int wheel,    boolean intersect){
    }
    @Override public void up(    UIDisplayElement element,    int button,    boolean intersect){
    }
    @Override public void down(    UIDisplayElement element,    int button,    boolean intersect){
      if (button == 0) {
        UIItemCell.reset();
      }
    }
  }
);
  CoreRegistry.get(GameType.class).onCreateInventoryHook(this);
  toolbar=new UIItemContainer(10);
  toolbar.setVisible(true);
  toolbar.setHorizontalAlign(EHorizontalAlign.CENTER);
  toolbar.setVerticalAlign(EVerticalAlign.BOTTOM);
  toolbar.setCellMargin(new Vector2f(0f,0f));
  toolbar.setBorderImage("engine:inventory",new Vector2f(0f,84f),new Vector2f(169f,83f),new Vector4f(4f,4f,4f,4f));
  inventory=new UIItemContainer(10);
  inventory.setVisible(true);
  inventory.setCellMargin(new Vector2f(0f,0f));
  inventory.setBorderImage("engine:inventory",new Vector2f(0f,84f),new Vector2f(169f,61f),new Vector4f(5f,4f,3f,4f));
  leftGearWheel=new UIImage(AssetManager.loadTexture("engine:inventory"));
  leftGearWheel.setSize(new Vector2f(36f,36f));
  leftGearWheel.setTextureOrigin(new Vector2f(121.0f,168.0f));
  leftGearWheel.setTextureSize(new Vector2f(27.0f,27.0f));
  leftGearWheel.setVisible(true);
  leftGearWheel.setHorizontalAlign(EHorizontalAlign.CENTER);
  leftGearWheel.setVerticalAlign(EVerticalAlign.BOTTOM);
  leftGearWheel.setPosition(new Vector2f(leftGearWheel.getPosition().x - 240f,leftGearWheel.getPosition().y - 4f));
  rightGearWheel=new UIImage(AssetManager.loadTexture("engine:inventory"));
  rightGearWheel.setSize(new Vector2f(36f,36f));
  rightGearWheel.setTextureOrigin(new Vector2f(121.0f,168.0f));
  rightGearWheel.setTextureSize(new Vector2f(27.0f,27.0f));
  rightGearWheel.setVisible(true);
  rightGearWheel.setHorizontalAlign(EHorizontalAlign.CENTER);
  rightGearWheel.setVerticalAlign(EVerticalAlign.BOTTOM);
  rightGearWheel.setPosition(new Vector2f(rightGearWheel.getPosition().x + 240f,rightGearWheel.getPosition().y - 4f));
  addDisplayElement(rightGearWheel);
  addDisplayElement(leftGearWheel);
  addDisplayElement(inventory);
  addDisplayElement(toolbar);
}
