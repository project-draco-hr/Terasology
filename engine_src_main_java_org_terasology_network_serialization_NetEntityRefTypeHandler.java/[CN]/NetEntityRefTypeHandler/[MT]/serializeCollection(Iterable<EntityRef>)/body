{
  EntityData.Value.Builder result=EntityData.Value.newBuilder();
  for (  EntityRef ref : value) {
    BlockComponent blockComponent=ref.getComponent(BlockComponent.class);
    if (blockComponent != null) {
      Vector3i blockPos=blockComponent.getPosition();
      result.addValue(EntityData.Value.newBuilder().addInteger(blockPos.x).addInteger(blockPos.y).addInteger(blockPos.z));
    }
 else {
      NetworkComponent netComponent=ref.getComponent(NetworkComponent.class);
      if (netComponent != null) {
        result.addInteger(netComponent.getNetworkId());
      }
 else {
        result.addInteger(0);
      }
    }
  }
  return result.build();
}
