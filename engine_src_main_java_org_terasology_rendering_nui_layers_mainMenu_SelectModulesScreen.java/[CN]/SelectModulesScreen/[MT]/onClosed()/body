{
  ModuleConfig moduleConfig=config.getDefaultModSelection();
  moduleConfig.clear();
  for (  ModuleSelectionInfo info : sortedModules) {
    if (info.isSelected() && info.isExplicitSelection()) {
      moduleConfig.addModule(info.getMetadata().getId());
    }
  }
  if (!modulesLookup.get(config.getWorldGeneration().getDefaultGenerator().getModuleName()).isSelected()) {
    config.getWorldGeneration().setDefaultGenerator(new SimpleUri());
  }
  config.save();
}
