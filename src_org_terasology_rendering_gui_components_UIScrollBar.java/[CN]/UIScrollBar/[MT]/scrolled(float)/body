{
  if (_max < (getScrollBarPosition() + mousePos - _prevMousePos + getScrollBarSize())) {
    mousePos=_max - getScrollBarSize() + _prevMousePos - getScrollBarPosition();
  }
 else   if (_min > (getScrollBarPosition() + mousePos - _prevMousePos)) {
    mousePos=_min + _prevMousePos - getScrollBarPosition();
  }
  _scrollShift=(mousePos - _prevMousePos) / _step;
  setScrollBarPosition((getScrollBarPosition() + mousePos - _prevMousePos));
  _prevMousePos=mousePos;
  for (int i=0; i < _scrollListeners.size(); i++) {
    _scrollListeners.get(i).scrolled(this);
  }
}
