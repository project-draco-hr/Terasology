{
  if (type.isKeepActive()) {
    temporaryBlockEntities.remove(blockEntity);
  }
 else   if (oldType.isKeepActive() && isTemporaryBlock(blockEntity,type)) {
    temporaryBlockEntities.add(blockEntity);
  }
  EntityRef regionEntity=blockRegionLookup.get(pos);
  if (regionEntity != null) {
    regionEntity.send(new OnChangedBlock(pos,type,oldType));
  }
  updateBlockEntityComponents(blockEntity,oldType,type);
  blockEntity.send(new OnChangedBlock(new Vector3i(pos),type,oldType));
}
