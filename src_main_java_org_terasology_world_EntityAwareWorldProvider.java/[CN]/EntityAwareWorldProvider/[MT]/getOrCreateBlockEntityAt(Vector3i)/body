{
  EntityRef blockEntity=getBlockEntityAt(blockPosition);
  if (!blockEntity.exists()) {
    Block block=getBlock(blockPosition.x,blockPosition.y,blockPosition.z);
    blockEntity=entityManager.create(block.getEntityPrefab());
    if (block.isEntityTemporary()) {
      tempBlocks.add(blockEntity);
    }
    blockEntity.addComponent(new LocationComponent(blockPosition.toVector3f()));
    blockEntity.addComponent(new BlockComponent(blockPosition,block.isEntityTemporary()));
    if (block.isDestructible()) {
      blockEntity.addComponent(new HealthComponent(block.getHardness(),2.0f,1.0f));
    }
  }
  return blockEntity;
}
