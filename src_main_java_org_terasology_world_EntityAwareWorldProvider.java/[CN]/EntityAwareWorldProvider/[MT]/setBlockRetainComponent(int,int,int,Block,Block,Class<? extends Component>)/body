{
  if (Thread.currentThread().equals(mainThread)) {
    Vector3i pos=new Vector3i(x,y,z);
    EntityRef blockEntity=getBlockEntityAt(pos);
    if (super.setBlock(x,y,z,type,oldType)) {
      updateBlockEntity(blockEntity,pos,oldType,type,false,Sets.newHashSet(components));
      return true;
    }
 else {
      processOffThreadChanges();
    }
  }
 else {
    if (super.setBlock(x,y,z,type,oldType)) {
      pendingChanges.add(new BlockChange(new Vector3i(x,y,z),oldType,type,false,components));
      return true;
    }
  }
  return false;
}
