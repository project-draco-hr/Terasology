{
  this.atlas=atlas;
  this.assetManager=assetManager;
  parser=new JsonParser();
  gson=new GsonBuilder().registerTypeAdapterFactory(new CaseInsensitiveEnumTypeAdapterFactory()).registerTypeAdapter(BlockDefinition.Tiles.class,new BlockTilesDefinitionHandler()).registerTypeAdapter(BlockDefinition.ColorSources.class,new BlockColorSourceDefinitionHandler()).registerTypeAdapter(BlockDefinition.ColorOffsets.class,new BlockColorOffsetDefinitionHandler()).registerTypeAdapter(Vector3f.class,new Vector3fHandler()).registerTypeAdapter(Vector4f.class,new Vector4fHandler()).create();
  cubeShape=(BlockShape)Assets.get(new AssetUri(AssetType.SHAPE,"engine:cube"));
  loweredShape=(BlockShape)Assets.get(new AssetUri(AssetType.SHAPE,"engine:loweredCube"));
  trimmedLoweredShape=(BlockShape)Assets.get(new AssetUri(AssetType.SHAPE,"engine:trimmedLoweredCube"));
  this.blockFamilyFactoryRegistry=blockFamilyFactoryRegistry;
}
