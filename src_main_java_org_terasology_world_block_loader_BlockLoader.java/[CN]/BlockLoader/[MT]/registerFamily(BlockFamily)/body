{
  blockFamilies.add(family);
  for (  Block block : family.listBlocks()) {
    if (blockIds.containsKey(block.getURI())) {
      block.setId(blockIds.get(block.getURI()));
      unresolvedBlocks.remove(block.getURI());
    }
 else {
      if (nextId == MAX_BLOCKS) {
        logger.severe("Out of block ids, too many blocks");
      }
 else {
        byte id=(byte)(nextId++);
        block.setId(id);
        blockIds.put(block.getURI(),id);
      }
    }
  }
}
