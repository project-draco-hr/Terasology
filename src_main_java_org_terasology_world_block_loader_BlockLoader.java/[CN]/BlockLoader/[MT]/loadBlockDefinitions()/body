{
  logger.info("Loading Blocks...");
  LoadBlockDefinitionResults result=new LoadBlockDefinitionResults();
  for (  AssetUri blockDefUri : Assets.list(AssetType.BLOCK_DEFINITION)) {
    try {
      JsonElement rawJson=readJson(blockDefUri);
      if (rawJson != null) {
        JsonObject blockDefJson=rawJson.getAsJsonObject();
        if (blockDefJson.has("template") && blockDefJson.get("template").getAsBoolean()) {
          continue;
        }
        logger.debug("Loading {}",blockDefUri);
        BlockDefinition blockDef=createBlockDefinition(inheritData(blockDefUri,blockDefJson));
        if (isShapelessBlockFamily(blockDef)) {
          result.shapelessDefinitions.add(new FreeformFamily(new BlockUri(blockDefUri.getPackage(),blockDefUri.getAssetName()),blockDef.categories));
        }
 else {
          if (blockDef.liquid) {
            blockDef.rotation=null;
            blockDef.shapes.clear();
            blockDef.shape=trimmedLoweredShape.getURI().getSimpleString();
          }
          if (blockDef.shapes.isEmpty()) {
            BlockFamilyFactory familyFactory=blockFamilyFactoryRegistry.getBlockFamilyFactory(blockDef.rotation);
            result.families.add(familyFactory.createBlockFamily(this,blockDefUri,blockDef,blockDefJson));
          }
 else {
            result.families.addAll(processMultiBlockFamily(blockDefUri,blockDef));
          }
        }
      }
    }
 catch (    JsonParseException|NullPointerException e) {
      logger.error("Failed to load block '{}'",blockDefUri,e);
    }
  }
  result.shapelessDefinitions.addAll(loadAutoBlocks());
  return result;
}
