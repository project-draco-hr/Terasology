{
  _gameInstance=gameEngine;
  entityManager=new EntitySystemBuilder().build();
  eventSystem=CoreRegistry.get(EventSystem.class);
  componentSystemManager=new ComponentSystemManager();
  CoreRegistry.put(ComponentSystemManager.class,componentSystemManager);
  cameraTargetSystem=new CameraTargetSystem();
  CoreRegistry.put(CameraTargetSystem.class,cameraTargetSystem);
  componentSystemManager.register(cameraTargetSystem,"engine:CameraTargetSystem");
  inputSystem=new InputSystem();
  CoreRegistry.put(InputSystem.class,inputSystem);
  componentSystemManager.register(inputSystem,"engine:InputSystem");
  LocalPlayerComponent localPlayerComp=new LocalPlayerComponent();
  CoreRegistry.put(LocalPlayerComponent.class,localPlayerComp);
  entityManager.create(localPlayerComp);
  CoreRegistry.put(LocalPlayer.class,new LocalPlayer(EntityRef.NULL));
  _mainMenu=new UIMenuMain();
  _mainMenu.setVisible(true);
  _selectWorldMenu=new UIMenuSelectWorld();
  _selectWorldMenu.setVisible(false);
  _configMenu=new UIMenuConfig();
  _configMenu.setVisible(false);
  _configMenuVideo=new UIMenuConfigVideo();
  _configMenuVideo.setVisible(false);
  _configMenuAudio=new UIMenuConfigAudio();
  _configMenuAudio.setVisible(false);
  _configMenuControls=new UIMenuConfigControls();
  _configMenuControls.setVisible(false);
  _configMenuMods=new UIMenuConfigMods();
  _configMenuMods.setVisible(false);
  GUIManager.getInstance().addWindow(_mainMenu,"menuMain");
  GUIManager.getInstance().addWindow(_selectWorldMenu,"selectWorld");
  GUIManager.getInstance().addWindow(_configMenu,"menuConfig");
  ;
  GUIManager.getInstance().addWindow(_configMenuVideo,"menuConfigVideo");
  GUIManager.getInstance().addWindow(_configMenuAudio,"menuConfigAudio");
  GUIManager.getInstance().addWindow(_configMenuControls,"menuConfigControls");
  GUIManager.getInstance().addWindow(_configMenuMods,"menuConfigMods");
}
