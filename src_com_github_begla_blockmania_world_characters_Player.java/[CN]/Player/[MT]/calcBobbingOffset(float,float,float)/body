{
  float speedFactor=1.0f;
  if (_activeWalkingSpeed > 0)   speedFactor=(float)MathHelper.clamp(Math.max(Math.abs(_velocity.x),Math.abs(_velocity.z)) / _activeWalkingSpeed);
  return Math.sin(_stepCounter * frequency + phaseOffset) * amplitude * speedFactor;
}
