{
  if (getParent() != null) {
    if (_selectedBlock != null) {
      if (_prevSelectedBlock != null) {
        if (_prevSelectedBlock.equals(_selectedBlock)) {
          _extractionCounter++;
        }
 else {
          resetExtraction();
          _extractionCounter++;
        }
      }
 else {
        _prevSelectedBlock=_selectedBlock;
        _extractionCounter++;
      }
      if (_extractionCounter >= 3) {
        BlockPosition blockPos=_selectedBlock.getBlockPosition();
        byte currentBlockType=getParent().getWorldProvider().getBlock(blockPos.x,blockPos.y,blockPos.z);
        getParent().getWorldProvider().setBlock(blockPos.x,blockPos.y,blockPos.z,(byte)0x0,true,true);
        byte upperBlockType=getParent().getWorldProvider().getBlock(blockPos.x,blockPos.y + 1,blockPos.z);
        if (BlockManager.getInstance().getBlock(upperBlockType).getBlockForm() == Block.BLOCK_FORM.BILLBOARD) {
          getParent().getWorldProvider().setBlock(blockPos.x,blockPos.y + 1,blockPos.z,(byte)0x0,true,true);
        }
        _parent.getBlockParticleEmitter().setOrigin(blockPos.toVector3f());
        _parent.getBlockParticleEmitter().emitParticles(256,currentBlockType);
        AudioManager.getInstance().getAudio("RemoveBlock").playAsSoundEffect(0.6f + (float)MathHelper.fastAbs(_parent.getWorldProvider().getRandom().randomDouble()) * 0.2f,0.5f + (float)MathHelper.fastAbs(_parent.getWorldProvider().getRandom().randomDouble()) * 0.3f,false);
        if (createPhysBlock && !BlockManager.getInstance().getBlock(currentBlockType).isTranslucent()) {
          Vector3f pos=blockPos.toVector3f();
          _parent.getBulletPhysicsRenderer().addBlock(pos,currentBlockType);
        }
        int chunkPosX=MathHelper.calcChunkPosX(blockPos.x);
        int chunkPosZ=MathHelper.calcChunkPosZ(blockPos.z);
        notifyObserversBlockRemoved(_parent.getWorldProvider().getChunkProvider().loadOrCreateChunk(chunkPosX,chunkPosZ),blockPos);
        resetExtraction();
      }
      AudioManager.getInstance().getAudio("PlaceBlock").playAsSoundEffect(0.8f + (float)MathHelper.fastAbs(_parent.getWorldProvider().getRandom().randomDouble()) * 0.2f,0.7f + (float)MathHelper.fastAbs(_parent.getWorldProvider().getRandom().randomDouble()) * 0.3f,false);
    }
  }
}
