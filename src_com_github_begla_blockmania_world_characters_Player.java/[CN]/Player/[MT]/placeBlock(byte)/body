{
  if (getParent() != null) {
    if (_selectedBlock != null) {
      Block centerBlock=BlockManager.getInstance().getBlock(getParent().getWorldProvider().getBlock(_selectedBlock.getBlockPosition().x,_selectedBlock.getBlockPosition().y,_selectedBlock.getBlockPosition().z));
      if (!centerBlock.isAllowBlockAttachment()) {
        return false;
      }
      BlockPosition blockPos=_selectedBlock.calcAdjacentBlockPos();
      if (Block.AABBForBlockAt(blockPos.x,blockPos.y,blockPos.z).overlaps(getAABB())) {
        return false;
      }
      getParent().getWorldProvider().setBlock(blockPos.x,blockPos.y,blockPos.z,type,true,true);
      AudioManager.getInstance().getAudio("PlaceBlock").playAsSoundEffect(0.8f + (float)MathHelper.fastAbs(_parent.getWorldProvider().getRandom().randomDouble()) * 0.2f,0.7f + (float)MathHelper.fastAbs(_parent.getWorldProvider().getRandom().randomDouble()) * 0.3f,false);
      int chunkPosX=MathHelper.calcChunkPosX(blockPos.x);
      int chunkPosZ=MathHelper.calcChunkPosZ(blockPos.z);
      notifyObserversBlockPlaced(_parent.getWorldProvider().getChunkProvider().loadOrCreateChunk(chunkPosX,chunkPosZ),blockPos);
      return true;
    }
  }
  return false;
}
