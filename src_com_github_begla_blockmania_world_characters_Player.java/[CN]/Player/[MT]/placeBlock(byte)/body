{
  if (getParent() != null) {
    RayBlockIntersection.Intersection is=calcSelectedBlock();
    if (is != null) {
      Block centerBlock=Block.getBlockForType(getParent().getBlock((int)is.getBlockPosition().x,(int)is.getBlockPosition().y,(int)is.getBlockPosition().z));
      if (!centerBlock.playerCanAttachBlocks()) {
        return;
      }
      Vector3f blockPos=is.calcAdjacentBlockPos();
      if (Block.AABBForBlockAt((int)blockPos.x,(int)blockPos.y,(int)blockPos.z).overlaps(getAABB())) {
        return;
      }
      getParent().setBlock((int)blockPos.x,(int)blockPos.y,(int)blockPos.z,type,true,false);
      AudioManager.getInstance().getAudio("PlaceRemoveBlock").playAsSoundEffect(0.7f + (float)Math.abs(_rand.randomDouble()) * 0.3f,0.7f + (float)Math.abs(_rand.randomDouble()) * 0.3f,false);
    }
  }
}
