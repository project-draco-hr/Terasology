{
  boolean debugEnabled=(Boolean)ConfigurationManager.getInstance().getConfig().get("System.Debug.debug");
  while (Keyboard.next()) {
    int key=Keyboard.getEventKey();
    if (!Keyboard.isRepeatEvent() && Keyboard.getEventKeyState()) {
      if (key == Keyboard.KEY_ESCAPE && !Keyboard.isRepeatEvent() && Keyboard.getEventKeyState()) {
        togglePauseMenu();
      }
      if (key == Keyboard.KEY_I && !Keyboard.isRepeatEvent() && Keyboard.getEventKeyState()) {
        toggleInventory();
      }
      if (key == Keyboard.KEY_F3 && !Keyboard.isRepeatEvent() && Keyboard.getEventKeyState()) {
        ConfigurationManager.getInstance().getConfig().put("System.Debug.debug",debugEnabled=!(debugEnabled));
      }
      if (key == Keyboard.KEY_F && !Keyboard.isRepeatEvent() && Keyboard.getEventKeyState()) {
        toggleViewingDistance();
      }
      if (debugEnabled) {
        if (key == Keyboard.KEY_UP && !Keyboard.isRepeatEvent() && Keyboard.getEventKeyState()) {
          getActiveWorldProvider().setTime(getActiveWorldProvider().getTime() + 0.005);
        }
        if (key == Keyboard.KEY_DOWN && !Keyboard.isRepeatEvent() && Keyboard.getEventKeyState()) {
          getActiveWorldProvider().setTime(getActiveWorldProvider().getTime() - 0.005);
        }
      }
      for (      UIDisplayElement screen : _guiScreens) {
        if (screenCanFocus(screen)) {
          screen.processKeyboardInput(key);
        }
      }
    }
    if (!screenHasFocus())     _activeWorldRenderer.getPlayer().processKeyboardInput(key,Keyboard.getEventKeyState(),Keyboard.isRepeatEvent());
  }
}
