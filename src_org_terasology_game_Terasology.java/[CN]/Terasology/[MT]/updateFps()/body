{
  long now=getTimeInMs();
  _delta=now - _lastLoopTime;
  _lastLoopTime=now;
  _lastFpsTime+=_delta;
  _fps++;
  if (_lastFpsTime >= 1000) {
    _lastFpsTime=0;
    _averageFps+=_fps;
    _averageFps/=2;
    _fps=0;
  }
}
