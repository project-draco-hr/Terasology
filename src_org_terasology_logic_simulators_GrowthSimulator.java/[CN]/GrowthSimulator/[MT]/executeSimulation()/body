{
  BlockPosition blockPos=tryRemoveFirstBlock();
  if (blockPos != null) {
    if (!_parent.canBlockSeeTheSky(blockPos.x,blockPos.y,blockPos.z))     return false;
    ChunkGeneratorTerrain.BIOME_TYPE biome=_parent.getActiveBiome(blockPos.x,blockPos.z);
    if (biome != ChunkGeneratorTerrain.BIOME_TYPE.SNOW) {
      byte bLeft=_parent.getBlock(blockPos.x - 1,blockPos.y,blockPos.z);
      byte bRight=_parent.getBlock(blockPos.x + 1,blockPos.y,blockPos.z);
      byte bUp=_parent.getBlock(blockPos.x,blockPos.y,blockPos.z + 1);
      byte bDown=_parent.getBlock(blockPos.x,blockPos.y,blockPos.z - 1);
      if (bLeft == GRASS_TYPE || bRight == GRASS_TYPE || bDown == GRASS_TYPE || bUp == GRASS_TYPE) {
        _parent.setBlock(blockPos.x,blockPos.y,blockPos.z,GRASS_TYPE,false,true);
      }
      if (bLeft == DIRT_TYPE) {
        addActiveBlock(new BlockPosition(blockPos.x - 1,blockPos.y,blockPos.z));
      }
      if (bRight == DIRT_TYPE) {
        addActiveBlock(new BlockPosition(blockPos.x + 1,blockPos.y,blockPos.z));
      }
      if (bUp == DIRT_TYPE) {
        addActiveBlock(new BlockPosition(blockPos.x,blockPos.y,blockPos.z + 1));
      }
      if (bDown == DIRT_TYPE) {
        addActiveBlock(new BlockPosition(blockPos.x,blockPos.y,blockPos.z - 1));
      }
    }
    return true;
  }
  return false;
}
