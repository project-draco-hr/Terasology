{
  CommandParameter[] editableParameters=constructParameters();
  if (editableParameters == null) {
    parameters=new CommandParameter[0];
    return;
  }
  requiredParameterCount=0;
  boolean optionalFound=false;
  for (int i=0; i < editableParameters.length; i++) {
    CommandParameter parameter=editableParameters[i];
    if (parameter.isVarargs() && i < editableParameters.length - 1) {
      throw new CommandInitializationException("A varargs parameter must be at the end. Invalid: " + i + "; "+ parameter.getName());
    }
    if (parameter.isRequired()) {
      if (!optionalFound) {
        requiredParameterCount++;
      }
 else {
        throw new CommandInitializationException("A command definition must not contain a required" + " parameter (" + i + "; "+ parameter.getName()+ ") after an optional parameter.");
      }
    }
 else     if (!optionalFound) {
      optionalFound=true;
    }
  }
  this.parameters=editableParameters;
}
