{
  PerformanceMonitor.startActivity("GenerateMesh");
  ChunkMesh mesh=new ChunkMesh();
  Chunk[] chunks={miniatureChunk};
  WorldView localWorldView=new WorldView(chunks,Region3i.createFromCenterExtents(Vector3i.zero(),Vector3i.zero()),Vector3i.zero());
  localWorldView.setChunkSize(new Vector3i(MiniatureChunk.SIZE_X,MiniatureChunk.SIZE_Y,MiniatureChunk.SIZE_Z));
  for (int x=0; x < MiniatureChunk.SIZE_X; x++) {
    for (int z=0; z < MiniatureChunk.SIZE_Z; z++) {
      for (int y=0; y < MiniatureChunk.SIZE_Y; y++) {
        Block block=miniatureChunk.getBlock(x,y,z);
        if (block == null || block.isInvisible())         continue;
        generateBlockVertices(localWorldView,mesh,x,y,z,0.0f,0.0f);
      }
    }
  }
  generateOptimizedBuffers(localWorldView,mesh);
  _statVertexArrayUpdateCount++;
  PerformanceMonitor.endActivity();
  return mesh;
}
