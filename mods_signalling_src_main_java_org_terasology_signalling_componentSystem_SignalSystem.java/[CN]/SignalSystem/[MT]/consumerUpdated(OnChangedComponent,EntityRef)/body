{
  if (block.hasComponent(BlockComponent.class)) {
    Vector3i location=new Vector3i(block.getComponent(BlockComponent.class).getPosition());
    ImmutableBlockLocation blockLocation=new ImmutableBlockLocation(location);
    final SignalConsumerComponent consumerComponent=block.getComponent(SignalConsumerComponent.class);
    final byte oldConnectionSides=signalConsumers.get(blockLocation).connectionSides;
    byte newConnectionSides=consumerComponent.connectionSides;
    NetworkNode node=toNode(location,newConnectionSides,SignalNetworkNode.Type.CONSUMER);
    if (oldConnectionSides != newConnectionSides) {
      signalConsumers.put(node.location,node);
      SignalNetworkNode oldNode=toNode(location,oldConnectionSides,SignalNetworkNode.Type.CONSUMER);
      consumerSignalInNetworks.put(node,Maps.<Network,NetworkSignals>newHashMap());
      signalNetwork.updateLeafBlock(oldNode,node);
      consumerSignalInNetworks.remove(oldNode);
    }
    consumersToRecalculate.add(node);
  }
}
