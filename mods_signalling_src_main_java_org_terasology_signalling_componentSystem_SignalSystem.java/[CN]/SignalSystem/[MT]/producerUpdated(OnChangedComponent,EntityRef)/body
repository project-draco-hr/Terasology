{
  logger.debug("Producer updated: " + block.getParentPrefab());
  if (block.hasComponent(BlockComponent.class)) {
    Vector3i location=new Vector3i(block.getComponent(BlockComponent.class).getPosition());
    ImmutableBlockLocation blockLocation=new ImmutableBlockLocation(location);
    final SignalProducerComponent producerComponent=block.getComponent(SignalProducerComponent.class);
    final byte oldConnectionSides=signalProducers.get(blockLocation).connectionSides;
    byte newConnectionSides=producerComponent.connectionSides;
    NetworkNode node=toNode(location,newConnectionSides,SignalNetworkNode.Type.PRODUCER);
    NetworkNode oldNode=toNode(location,oldConnectionSides,SignalNetworkNode.Type.PRODUCER);
    if (oldConnectionSides != newConnectionSides) {
      producerSignalStrengths.put(node,producerComponent.signalStrength);
      signalProducers.put(node.location,node);
      signalNetwork.updateLeafBlock(oldNode,node);
      producerSignalStrengths.remove(oldNode);
    }
 else {
      int oldSignalStrength=producerSignalStrengths.get(oldNode);
      int newSignalStrength=producerComponent.signalStrength;
      if (oldSignalStrength != newSignalStrength) {
        producerSignalStrengths.put(node,newSignalStrength);
        producersSignalsChanged.add(node);
      }
    }
  }
}
