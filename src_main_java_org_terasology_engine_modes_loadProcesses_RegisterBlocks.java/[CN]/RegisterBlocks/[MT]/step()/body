{
  NetworkSystem networkSystem=CoreRegistry.get(NetworkSystem.class);
  BlockManager blockManager;
  if (networkSystem.getMode().isAuthority()) {
    blockManager=new BlockManagerAuthority(worldInfo.getBlockIdMap());
    blockManager.subscribe(CoreRegistry.get(NetworkSystem.class));
  }
 else {
    blockManager=new BlockManagerClient(networkSystem.getServer().getInfo().getRegisterBlockFamilyList(),worldInfo.getBlockIdMap());
  }
  blockManager.buildAtlas();
  CoreRegistry.put(BlockManager.class,blockManager);
  return true;
}
