{
  ComponentSystemManager componentSystemManager=CoreRegistry.get(ComponentSystemManager.class);
  for (  ComponentSystem sys : componentSystemManager.iterateAll()) {
    sys.preSave();
  }
  checkAndRemoveCompletedSaveTransactions();
  saveThreadManger.clearQueue();
  SaveTransaction saveTransaction=createSaveTransaction();
  saveThreadManger.offer(saveTransaction);
  saveTransactions.add(saveTransaction);
  for (  ComponentSystem sys : componentSystemManager.iterateAll()) {
    sys.postSave();
  }
}
