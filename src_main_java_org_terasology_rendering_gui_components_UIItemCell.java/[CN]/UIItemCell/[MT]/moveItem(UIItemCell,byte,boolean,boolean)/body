{
  EntityRef item=getFromTransferSlot();
  InventoryComponent ownerInventory=ownerEntity.getComponent(InventoryComponent.class);
  if (item.exists()) {
    boolean success=false;
    if (!success) {
      success=moveItemPlace(targetCell,amount);
    }
    if (!success) {
      success=moveItemMerge(targetCell,amount);
    }
    if (!success && swap) {
      success=moveItemSwap(targetCell);
    }
    if (!success && dropOnFail) {
      dropitem();
    }
    targetCell.ownerEntity.saveComponent(ownerInventory);
    if (targetCell.itemEntity.exists() && !targetCell.itemLabel.isVisible()) {
      targetCell.setLabelVisibility(true);
    }
  }
}
