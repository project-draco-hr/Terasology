{
  familyByUri.put(family.getURI(),family);
  for (  Block block : family.getBlocks()) {
    byte id=idByUri.get(block.getURI());
    if (id == 0) {
      logger.info("Assigning block id");
      id=(byte)nextId++;
      idByUri.put(block.getURI(),id);
    }
    block.setId(id);
    logger.info("Registering block {} to id {}",block,block.getId());
    blocksById.put(block.getId(),block);
    blocksByUri.put(block.getURI(),block);
    if (!block.getEntityPrefab().isEmpty()) {
      blocksByPrefabName.put(block.getEntityPrefab(),block);
    }
  }
}
