{
  reset();
  for (  Map.Entry<String,Byte> entry : knownBlockMappings.entrySet()) {
    idByUri.put(new BlockUri(entry.getKey()),(byte)entry.getValue());
  }
  nextId=idByUri.size();
  BlockLoader.LoadBlockDefinitionResults blockDefinitions=blockLoader.loadBlockDefinitions();
  for (  BlockFamily family : blockDefinitions.families) {
    if (knownBlockMappings.containsKey(family.getURI().toString())) {
      addBlockFamily(family,true);
    }
 else {
      addBlockFamily(family);
    }
  }
  for (  BlockLoader.ShapelessFamily shapelessFamily : blockDefinitions.shapelessDefinitions) {
    addShapelessBlockFamily(shapelessFamily.uri,shapelessFamily.categories);
  }
  blockLoader.buildAtlas();
  bindBlocks(knownBlockMappings);
}
