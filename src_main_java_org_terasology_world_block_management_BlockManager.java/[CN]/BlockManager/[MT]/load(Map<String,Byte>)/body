{
  reset();
  for (  Map.Entry<String,Byte> entry : knownBlockMappings.entrySet()) {
    idByUri.put(new BlockUri(entry.getKey()),(byte)entry.getValue());
  }
  nextId=idByUri.size();
  BlockLoader.LoadBlockDefinitionResults blockDefinitions=blockLoader.loadBlockDefinitions();
  for (  BlockFamily family : blockDefinitions.families) {
    if (knownBlockMappings.containsKey(family.getURI().toString())) {
      registerBlockFamily(family);
    }
 else {
      addBlockFamily(family);
    }
  }
  for (  BlockUri shapelessFamily : blockDefinitions.shapelessDefinitions) {
    shapelessBlockDefinition.add(shapelessFamily);
  }
  blockLoader.buildAtlas();
  bindBlocks(knownBlockMappings);
}
