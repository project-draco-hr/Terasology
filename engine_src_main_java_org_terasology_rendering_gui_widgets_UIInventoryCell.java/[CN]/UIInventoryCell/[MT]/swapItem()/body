{
  if (ghost) {
    InventoryComponent ghostInventory=inventoryEntity.getComponent(InventoryComponent.class);
    EntityRef transferSlot=getTransferEntity().getComponent(InventoryComponent.class).itemSlots.get(0);
    EntityManager entityManager=CoreRegistry.get(EntityManager.class);
    ghostInventory.itemSlots.set(slot,entityManager.copy(transferSlot));
  }
 else {
    if (getTransferItem().exists()) {
      inventoryManager.moveItem(getTransferEntity(),0,inventoryEntity,slot);
    }
 else {
      inventoryManager.moveItem(inventoryEntity,slot,getTransferEntity(),0);
    }
  }
}
