{
  final Vector3i blockPosition=side.getAdjacentPos(replacedBlockPosition);
  boolean destroyBlock=false;
  Block blockAtPosition=worldProvider.getBlock(blockPosition);
  if (side == Side.TOP && blockAtPosition.isSupportRequired()) {
    destroyBlock=true;
  }
 else   if (blockAtPosition.getBlockFamily() instanceof AttachedToSurfaceFamily && ((AttachedToSurfaceFamily)blockAtPosition.getBlockFamily()).getSideAttachedTo(blockAtPosition) == side) {
    destroyBlock=true;
  }
 else {
    EntityRef blockEntity=blockEntityRegistry.getExistingBlockEntityAt(blockPosition);
    if (blockEntity.exists()) {
      BlockSupportRequiredComponent supportComponent=blockEntity.getComponent(BlockSupportRequiredComponent.class);
      if (supportComponent != null) {
        if (side.isHorizontal() && supportComponent.sideAllowed && !hasSupport(blockPosition,supportComponent)) {
          destroyBlock=true;
        }
 else         if (!side.isHorizontal() && (supportComponent.topAllowed || supportComponent.bottomAllowed) && !hasSupport(blockPosition,supportComponent)) {
          destroyBlock=true;
        }
      }
    }
 else {
      BlockSupportRequiredComponent supportComponent=blockAtPosition.getEntity().getComponent(BlockSupportRequiredComponent.class);
      if (supportComponent != null) {
        if (side.isHorizontal() && supportComponent.sideAllowed && !hasSupport(blockPosition,supportComponent)) {
          destroyBlock=true;
        }
 else         if (!side.isHorizontal() && (supportComponent.topAllowed || supportComponent.bottomAllowed) && !hasSupport(blockPosition,supportComponent)) {
          destroyBlock=true;
        }
      }
    }
  }
  if (destroyBlock) {
    blockEntityRegistry.getBlockEntityAt(blockPosition).send(new DestroyEvent(gatheringEntity,EntityRef.NULL,prefabManager.getPrefab("engine:supportRemovedDamage")));
  }
}
