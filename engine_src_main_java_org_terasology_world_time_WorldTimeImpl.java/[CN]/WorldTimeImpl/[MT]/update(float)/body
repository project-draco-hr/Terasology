{
  long deltaMs=time.getDeltaInMs();
  if (deltaMs > 0) {
    deltaMs=(long)(deltaMs * WORLD_TIME_MULTIPLIER);
    long startTime=worldTime.getAndAdd(deltaMs);
    long endTime=startTime + deltaMs;
    long timeInDay=startTime % DAY_LENGTH;
    if (timeInDay < 0) {
      timeInDay=DAY_LENGTH + timeInDay;
    }
    if (timeInDay < MIDDAY_TIME) {
      if (timeInDay + deltaMs >= MIDDAY_TIME) {
        getWorldEntity().send(new OnMiddayEvent(MS_TO_DAYS * endTime,endTime));
      }
    }
 else     if (timeInDay < DUSK_TIME) {
      if (timeInDay + deltaMs >= DUSK_TIME) {
        getWorldEntity().send(new OnDuskEvent(MS_TO_DAYS * endTime,endTime));
      }
    }
 else     if (timeInDay < MIDNIGHT_TIME) {
      if (timeInDay + deltaMs >= MIDNIGHT_TIME) {
        getWorldEntity().send(new OnMidnightEvent(MS_TO_DAYS * endTime,endTime));
      }
    }
 else     if (timeInDay < DAWN_TIME) {
      if (timeInDay + deltaMs >= DAWN_TIME) {
        getWorldEntity().send(new OnDawnEvent(MS_TO_DAYS * endTime,endTime));
      }
    }
  }
}
