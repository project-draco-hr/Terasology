{
  if (worldProvider == null)   return;
  BlockComponent blockComp=entity.getComponent(BlockComponent.class);
  Block oldBlock=worldProvider.getBlock(blockComp.getPosition());
  worldProvider.setBlock(blockComp.getPosition(),BlockManager.getInstance().getAir(),oldBlock);
  Block upperBlock=worldProvider.getBlock(blockComp.getPosition().x,blockComp.getPosition().y + 1,blockComp.getPosition().z);
  if (upperBlock.isSupportRequired()) {
    worldProvider.setBlock(blockComp.getPosition().x,blockComp.getPosition().y + 1,blockComp.getPosition().z,BlockManager.getInstance().getAir(),upperBlock);
  }
  entity.send(new PlaySoundEvent(Assets.getSound("engine:RemoveBlock"),0.6f));
  if (oldBlock.getEntityMode() == BlockEntityMode.PERSISTENT) {
    entity.removeComponent(HealthComponent.class);
    entity.removeComponent(BlockComponent.class);
  }
  if ((oldBlock.isDirectPickup()) && event.getInstigator().exists()) {
    EntityRef item;
    if (oldBlock.getEntityMode() == BlockEntityMode.PERSISTENT) {
      item=blockItemFactory.newInstance(oldBlock.getBlockFamily(),entity);
    }
 else {
      item=blockItemFactory.newInstance(oldBlock.getBlockFamily());
    }
    if (!inventoryManager.giveItem(event.getInstigator(),item)) {
      item.destroy();
      EntityRef block=droppedBlockFactory.newInstance(blockComp.getPosition().toVector3f(),oldBlock.getBlockFamily(),20);
      block.send(new ImpulseEvent(random.randomVector3f(30)));
    }
  }
 else {
    EntityRef block;
    if (oldBlock.getEntityMode() == BlockEntityMode.PERSISTENT) {
      block=droppedBlockFactory.newInstance(blockComp.getPosition().toVector3f(),oldBlock.getBlockFamily(),20,entity);
    }
 else {
      block=droppedBlockFactory.newInstance(blockComp.getPosition().toVector3f(),oldBlock.getBlockFamily(),20);
    }
    block.send(new ImpulseEvent(random.randomVector3f(30)));
  }
  if (oldBlock.getEntityMode() != BlockEntityMode.PERSISTENT) {
    entity.destroy();
  }
}
