{
switch (exp) {
case 0:
    return 1;
case 1:
  return base;
case 2:
return base * base;
case 3:
return base * base * base;
}
if (exp < 0) {
if (base == 0) {
throw new ArithmeticException("0^" + exp + " causes division by zero");
}
if (base == 1) {
return 1;
}
if (base == -1) {
if (exp % 2 == 0) {
return 1;
}
return -1;
}
return 0;
}
int temp=base;
exp--;
while (true) {
if ((exp & 1) != 0) {
base*=temp;
}
exp>>=1;
if (exp <= 0) {
break;
}
temp*=temp;
}
return base;
}
