{
  ChunkImpl[] chunks=new ChunkImpl[region.sizeX() * region.sizeY() * region.sizeZ()];
  for (  Vector3i chunkPos : region) {
    ChunkImpl chunk=nearCache.get(chunkPos);
    if (chunk == null || !chunk.isReady()) {
      return null;
    }
    chunkPos.sub(region.minX(),region.minY(),region.minZ());
    int index=TeraMath.calculate3DArrayIndex(chunkPos,region.size());
    chunks[index]=chunk;
  }
  return new ChunkViewCoreImpl(chunks,region,offset);
}
