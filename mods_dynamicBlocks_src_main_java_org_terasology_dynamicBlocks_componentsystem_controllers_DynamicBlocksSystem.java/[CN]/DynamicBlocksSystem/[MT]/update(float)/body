{
  for (  EntityRef entity : entityManager.iteratorEntities(DynamicBlockComponent.class,LocationComponent.class)) {
    DynamicBlockComponent loco=entity.getComponent(DynamicBlockComponent.class);
    LocationComponent location=entity.getComponent(LocationComponent.class);
    Vector3f worldPos=location.getWorldPosition();
    if (!worldProvider.isBlockActive(worldPos))     continue;
    if (!localPlayer.isValid())     return;
    if (standingOn(entity)) {
      Vector3f movementDirection=localPlayer.getViewDirection();
      float speed=movementDirection.length();
      movementDirection=new Vector3f(movementDirection.x,0,movementDirection.z);
      movementDirection.normalize();
      movementDirection.scale(speed);
      Vector3f desiredVelocity=new Vector3f(movementDirection);
      desiredVelocity.scale(loco.getMaximumSpeed());
      entity.send(new CharacterMoveInputEvent(0,0,desiredVelocity,false,false));
    }
 else {
      entity.send(new CharacterMoveInputEvent(0,0,new Vector3f(),false,false));
    }
  }
}
