{
  byte blockId=_chunk.getBlock(x,y,z);
  Block block=BlockManager.getInstance().getBlock(blockId);
  ChunkMesh.RENDER_TYPE renderType=ChunkMesh.RENDER_TYPE.BILLBOARD_AND_TRANSLUCENT;
  if (!block.isTranslucent())   renderType=ChunkMesh.RENDER_TYPE.OPAQUE;
  if (block.getTitle().equals("Water") || block.getTitle().equals("Ice"))   renderType=ChunkMesh.RENDER_TYPE.WATER_AND_ICE;
  boolean drawFront, drawBack, drawLeft, drawRight, drawTop, drawBottom;
  byte blockToCheckId=_chunk.getParent().getBlock(_chunk.getBlockWorldPosX(x),y + 1,_chunk.getBlockWorldPosZ(z));
  drawTop=isSideVisibleForBlockTypes(blockToCheckId,blockId);
  blockToCheckId=_chunk.getParent().getBlock(_chunk.getBlockWorldPosX(x),y,_chunk.getBlockWorldPosZ(z - 1));
  drawFront=isSideVisibleForBlockTypes(blockToCheckId,blockId);
  blockToCheckId=_chunk.getParent().getBlock(_chunk.getBlockWorldPosX(x),y,_chunk.getBlockWorldPosZ(z + 1));
  drawBack=isSideVisibleForBlockTypes(blockToCheckId,blockId);
  blockToCheckId=_chunk.getParent().getBlock(_chunk.getBlockWorldPosX(x - 1),y,_chunk.getBlockWorldPosZ(z));
  drawLeft=isSideVisibleForBlockTypes(blockToCheckId,blockId);
  blockToCheckId=_chunk.getParent().getBlock(_chunk.getBlockWorldPosX(x + 1),y,_chunk.getBlockWorldPosZ(z));
  drawRight=isSideVisibleForBlockTypes(blockToCheckId,blockId);
  if (y > 0) {
    blockToCheckId=_chunk.getParent().getBlock(_chunk.getBlockWorldPosX(x),y - 1,_chunk.getBlockWorldPosZ(z));
    drawBottom=isSideVisibleForBlockTypes(blockToCheckId,blockId);
  }
 else {
    drawBottom=false;
  }
  Block.BLOCK_FORM blockForm=block.getBlockForm();
  if (blockForm == Block.BLOCK_FORM.LOWERED_BLOCK) {
    blockToCheckId=_chunk.getParent().getBlock(_chunk.getBlockWorldPosX(x),y - 1,_chunk.getBlockWorldPosZ(z - 1));
    drawFront=isSideVisibleForBlockTypes(blockToCheckId,blockId) || drawFront;
    blockToCheckId=_chunk.getParent().getBlock(_chunk.getBlockWorldPosX(x),y - 1,_chunk.getBlockWorldPosZ(z + 1));
    drawBack=isSideVisibleForBlockTypes(blockToCheckId,blockId) || drawBack;
    blockToCheckId=_chunk.getParent().getBlock(_chunk.getBlockWorldPosX(x - 1),y - 1,_chunk.getBlockWorldPosZ(z));
    drawLeft=isSideVisibleForBlockTypes(blockToCheckId,blockId) || drawLeft;
    blockToCheckId=_chunk.getParent().getBlock(_chunk.getBlockWorldPosX(x + 1),y - 1,_chunk.getBlockWorldPosZ(z));
    drawRight=isSideVisibleForBlockTypes(blockToCheckId,blockId) || drawRight;
    blockToCheckId=_chunk.getParent().getBlock(_chunk.getBlockWorldPosX(x),y + 1,_chunk.getBlockWorldPosZ(z));
    drawTop=(BlockManager.getInstance().getBlock(blockToCheckId).getBlockForm() != Block.BLOCK_FORM.LOWERED_BLOCK) || drawTop;
  }
  if (drawTop) {
    Vector3f p1=new Vector3f(-0.5f,0.5f,0.5f);
    Vector3f p2=new Vector3f(0.5f,0.5f,0.5f);
    Vector3f p3=new Vector3f(0.5f,0.5f,-0.5f);
    Vector3f p4=new Vector3f(-0.5f,0.5f,-0.5f);
    Vector3f norm=new Vector3f(0,1,0);
    Vector4f colorOffset=block.calcColorOffsetFor(Block.SIDE.FRONT,temp,hum);
    Vector3f texOffset=new Vector3f(block.calcTextureOffsetFor(Block.SIDE.TOP).x,block.calcTextureOffsetFor(Block.SIDE.TOP).y,0f);
    generateVerticesForBlockSide(mesh,x,y,z,p1,p2,p3,p4,norm,colorOffset,texOffset,renderType,blockForm);
  }
  if (drawFront) {
    Vector3f p1=new Vector3f(-0.5f,0.5f,-0.5f);
    Vector3f p2=new Vector3f(0.5f,0.5f,-0.5f);
    Vector3f p3=new Vector3f(0.5f,-0.5f,-0.5f);
    Vector3f p4=new Vector3f(-0.5f,-0.5f,-0.5f);
    Vector3f norm=new Vector3f(0,0,-1);
    Vector4f colorOffset=block.calcColorOffsetFor(Block.SIDE.FRONT,temp,hum);
    Vector3f texOffset=new Vector3f(block.calcTextureOffsetFor(Block.SIDE.FRONT).x,block.calcTextureOffsetFor(Block.SIDE.FRONT).y,0f);
    generateVerticesForBlockSide(mesh,x,y,z,p1,p2,p3,p4,norm,colorOffset,texOffset,renderType,blockForm);
  }
  if (drawBack) {
    Vector3f p1=new Vector3f(-0.5f,-0.5f,0.5f);
    Vector3f p2=new Vector3f(0.5f,-0.5f,0.5f);
    Vector3f p3=new Vector3f(0.5f,0.5f,0.5f);
    Vector3f p4=new Vector3f(-0.5f,0.5f,0.5f);
    Vector3f norm=new Vector3f(0,0,1);
    Vector4f colorOffset=block.calcColorOffsetFor(Block.SIDE.FRONT,temp,hum);
    Vector3f texOffset=new Vector3f(block.calcTextureOffsetFor(Block.SIDE.BACK).x,block.calcTextureOffsetFor(Block.SIDE.BACK).y,0f);
    generateVerticesForBlockSide(mesh,x,y,z,p1,p2,p3,p4,norm,colorOffset,texOffset,renderType,blockForm);
  }
  if (drawLeft) {
    Vector3f p1=new Vector3f(-0.5f,-0.5f,-0.5f);
    Vector3f p2=new Vector3f(-0.5f,-0.5f,0.5f);
    Vector3f p3=new Vector3f(-0.5f,0.5f,0.5f);
    Vector3f p4=new Vector3f(-0.5f,0.5f,-0.5f);
    Vector3f norm=new Vector3f(-1,0,0);
    Vector4f colorOffset=block.calcColorOffsetFor(Block.SIDE.FRONT,temp,hum);
    Vector3f texOffset=new Vector3f(block.calcTextureOffsetFor(Block.SIDE.LEFT).x,block.calcTextureOffsetFor(Block.SIDE.LEFT).y,0f);
    generateVerticesForBlockSide(mesh,x,y,z,p1,p2,p3,p4,norm,colorOffset,texOffset,renderType,blockForm);
  }
  if (drawRight) {
    Vector3f p1=new Vector3f(0.5f,0.5f,-0.5f);
    Vector3f p2=new Vector3f(0.5f,0.5f,0.5f);
    Vector3f p3=new Vector3f(0.5f,-0.5f,0.5f);
    Vector3f p4=new Vector3f(0.5f,-0.5f,-0.5f);
    Vector3f norm=new Vector3f(1,0,0);
    Vector4f colorOffset=block.calcColorOffsetFor(Block.SIDE.FRONT,temp,hum);
    Vector3f texOffset=new Vector3f(block.calcTextureOffsetFor(Block.SIDE.RIGHT).x,block.calcTextureOffsetFor(Block.SIDE.RIGHT).y,0f);
    generateVerticesForBlockSide(mesh,x,y,z,p1,p2,p3,p4,norm,colorOffset,texOffset,renderType,blockForm);
  }
  if (drawBottom) {
    Vector3f p1=new Vector3f(-0.5f,-0.5f,-0.5f);
    Vector3f p2=new Vector3f(0.5f,-0.5f,-0.5f);
    Vector3f p3=new Vector3f(0.5f,-0.5f,0.5f);
    Vector3f p4=new Vector3f(-0.5f,-0.5f,0.5f);
    Vector3f norm=new Vector3f(0,-1,0);
    Vector4f colorOffset=block.calcColorOffsetFor(Block.SIDE.FRONT,temp,hum);
    Vector3f texOffset=new Vector3f(block.calcTextureOffsetFor(Block.SIDE.BOTTOM).x,block.calcTextureOffsetFor(Block.SIDE.BOTTOM).y,0f);
    generateVerticesForBlockSide(mesh,x,y,z,p1,p2,p3,p4,norm,colorOffset,texOffset,renderType,blockForm);
  }
}
