{
  long time=timer.getTimeInMs();
  if (repeating && getState() == ButtonState.DOWN && mode.isActivatedOnPress() && time - lastActivateTime > repeatTime) {
    lastActivateTime=time;
    if (!CoreRegistry.get(GUIManager.class).isConsumingInput()) {
      boolean consumed=triggerOnRepeat(delta,target);
      if (!consumed) {
        buttonEvent.prepare(id,ButtonState.REPEAT,delta);
        buttonEvent.setTarget(target,targetBlockPos,hitPosition,hitNormal);
        for (        EntityRef entity : inputEntities) {
          entity.send(buttonEvent);
          if (buttonEvent.isCancelled()) {
            break;
          }
        }
      }
    }
  }
}
