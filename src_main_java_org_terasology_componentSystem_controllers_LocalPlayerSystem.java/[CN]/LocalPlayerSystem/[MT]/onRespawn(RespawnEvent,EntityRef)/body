{
  LocalPlayerComponent localPlayerComponent=entity.getComponent(LocalPlayerComponent.class);
  if (localPlayerComponent.isDead) {
    localPlayerComponent.isDead=false;
    entity.saveComponent(localPlayerComponent);
  }
  LocationComponent locationComponent=entity.getComponent(LocationComponent.class);
  PlayerComponent playerComponent=entity.getComponent(PlayerComponent.class);
  if (playerComponent != null && locationComponent != null) {
    locationComponent.setWorldPosition(playerComponent.spawnPosition);
    entity.saveComponent(locationComponent);
  }
  HealthComponent healthComponent=entity.getComponent(HealthComponent.class);
  if (healthComponent != null) {
    healthComponent.currentHealth=healthComponent.maxHealth;
    entity.send(new HealthChangedEvent(entity,healthComponent.currentHealth,healthComponent.maxHealth));
    entity.saveComponent(healthComponent);
  }
  CharacterMovementComponent characterMovementComponent=entity.getComponent(CharacterMovementComponent.class);
  if (characterMovementComponent != null) {
    characterMovementComponent.setVelocity(new Vector3f(0,0,0));
    entity.saveComponent(characterMovementComponent);
  }
}
