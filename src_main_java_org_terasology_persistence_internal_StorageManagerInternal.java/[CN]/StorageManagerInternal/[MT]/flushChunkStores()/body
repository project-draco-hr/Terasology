{
  storageTaskMaster.shutdown(new ShutdownTask(),true);
  try {
    Path chunksPath=PathManager.getInstance().getCurrentSavePath().resolve(WORLDS_PATH).resolve(TerasologyConstants.MAIN_WORLD);
    Files.createDirectories(chunksPath);
    for (    Map.Entry<Vector3i,byte[]> chunkStoreEntry : compressedChunkStore.entrySet()) {
      Path chunkPath=chunksPath.resolve(getChunkFilename(chunkStoreEntry.getKey()));
      try (OutputStream out=new BufferedOutputStream(Files.newOutputStream(chunkPath))){
        out.write(chunkStoreEntry.getValue());
      }
     }
  }
  finally {
    storageTaskMaster.restart();
  }
}
