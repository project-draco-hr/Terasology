{
  ChunkStore store=chunkStores.get(chunkPos);
  if (store == null) {
    Path chunkPath=PathManager.getInstance().getCurrentSavePath().resolve(WORLDS_PATH).resolve(TerasologyConstants.MAIN_WORLD).resolve(getChunkFilename(chunkPos));
    if (Files.isRegularFile(chunkPath)) {
      try (InputStream in=new BufferedInputStream(Files.newInputStream(chunkPath))){
        TIntSet validRefs=null;
        StoreMetadata table=storeMetadata.get(new ChunkStoreId(chunkPos));
        if (table != null) {
          validRefs=table.getExternalReferences();
        }
        EntityData.ChunkStore chunkData=EntityData.ChunkStore.parseFrom(in);
        store=new ChunkStoreInternal(chunkData,validRefs,this,entityManager);
      }
 catch (      IOException e) {
        logger.error("Failed to load chunk {}",chunkPos,e);
      }
    }
  }
  return store;
}
