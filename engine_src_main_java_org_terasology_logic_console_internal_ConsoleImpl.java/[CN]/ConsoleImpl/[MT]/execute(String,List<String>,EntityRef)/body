{
  if (commandName.isEmpty()) {
    return false;
  }
  CommandInfo cmd=findBestCommand(commandName,params.size());
  if (cmd == null) {
    if (commandRegistry.containsKey(commandName)) {
      addErrorMessage("Incorrect number of parameters. Try:");
      for (      CommandInfo ci : commandRegistry.get(commandName)) {
        addMessage(ci.getUsage());
      }
    }
 else {
      addErrorMessage("Unknown command '" + commandName + "'");
    }
    return false;
  }
  if (cmd.isRunOnServer() && !networkSystem.getMode().isAuthority()) {
    callingClient.send(new CommandEvent(commandName,params));
    return true;
  }
 else {
    try {
      String result=cmd.execute(params,callingClient);
      if (result != null && !result.isEmpty()) {
        if (callingClient.exists()) {
          callingClient.send(new ConsoleMessageEvent(result));
        }
 else {
          addMessage(result);
        }
      }
      return true;
    }
 catch (    InvalidCommandCallException e) {
      String msgText=e.getLocalizedMessage();
      if (msgText != null && !msgText.isEmpty()) {
        if (callingClient.exists()) {
          callingClient.send(new ConsoleMessageEvent(e.getLocalizedMessage()));
        }
 else {
          addErrorMessage(e.getLocalizedMessage());
        }
      }
      return false;
    }
  }
}
