{
  if (running) {
    pendingStateChanges.add(new ChangeState(newState));
  }
 else {
    doPurgeStates();
    doPushState(newState);
  }
}
