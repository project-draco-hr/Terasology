{
  if (_displayLists[_blockType] == 0) {
    _displayLists[_blockType]=glGenLists(1);
    glNewList(_displayLists[_blockType],GL11.GL_COMPILE);
    drawParticle();
    glEndList();
  }
  BlockParticleEmitter pE=(BlockParticleEmitter)getParent();
  double lightValueSun=((double)pE.getParent().getWorldProvider().getLightAtPosition(_position,Chunk.LIGHT_TYPE.SUN));
  lightValueSun=(lightValueSun / 15.0) * pE.getParent().getDaylight();
  double lightValueBlock=pE.getParent().getWorldProvider().getLightAtPosition(_position,Chunk.LIGHT_TYPE.BLOCK);
  lightValueBlock=lightValueBlock / 15.0;
  float lightValue=(float)Math.max(lightValueSun,lightValueBlock) * _lightOffset;
  int light=GL20.glGetUniformLocation(ShaderManager.getInstance().getShader("particle"),"light");
  int texOffsetX=GL20.glGetUniformLocation(ShaderManager.getInstance().getShader("particle"),"texOffsetX");
  int texOffsetY=GL20.glGetUniformLocation(ShaderManager.getInstance().getShader("particle"),"texOffsetY");
  GL20.glUniform1f(light,lightValue);
  GL20.glUniform1f(texOffsetX,_texOffsetX);
  GL20.glUniform1f(texOffsetY,_texOffsetY);
  glCallList(_displayLists[_blockType]);
}
