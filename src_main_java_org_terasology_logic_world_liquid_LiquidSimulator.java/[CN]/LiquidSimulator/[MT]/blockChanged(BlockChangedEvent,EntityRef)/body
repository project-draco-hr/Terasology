{
  if (event.getNewType().isLiquid()) {
    blockQueue.offer(event.getBlockPosition());
  }
 else   if (event.getNewType() == BlockManager.getInstance().getAir()) {
    Block block=fillWithLiquid(event.getBlockPosition());
    if (block.isLiquid()) {
      world.setBlock(event.getBlockPosition(),block,event.getNewType());
      event.cancel();
    }
  }
 else   if (event.getOldType().isLiquid()) {
    Vector3i belowPos=new Vector3i(event.getBlockPosition());
    belowPos.y-=1;
    if (world.getBlock(belowPos).isLiquid()) {
      blockQueue.offer(belowPos);
    }
    for (    Side side : Side.horizontalSides()) {
      Vector3i adjPos=new Vector3i(event.getBlockPosition());
      adjPos.add(side.getVector3i());
      if (world.getBlock(adjPos).isLiquid()) {
        blockQueue.offer(belowPos);
      }
    }
  }
}
