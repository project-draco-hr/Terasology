{
  Vector3i belowBlockPos=new Vector3i(blockPos.x,blockPos.y - 1,blockPos.z);
  Block type=world.getBlock(blockPos);
  if (!checkValidForLiquid(blockPos,type)) {
    world.setBlock(blockPos,air,type);
    if (world.getBlock(belowBlockPos).equals(type)) {
      blockQueue.offer(belowBlockPos);
    }
    for (    Side side : Side.horizontalSides()) {
      Vector3i adjPos=new Vector3i(blockPos);
      adjPos.add(side.getVector3i());
      if (world.getBlock(adjPos).equals(type)) {
        blockQueue.offer(adjPos);
      }
    }
    return;
  }
  Block belowType=world.getBlock(belowBlockPos);
  if (belowType.equals(air) || belowType.getBlockForm() == Block.BLOCK_FORM.BILLBOARD) {
    world.setBlock(belowBlockPos,type,belowType);
  }
  for (  Side side : Side.horizontalSides()) {
    Vector3i adjPos=new Vector3i(blockPos);
    adjPos.add(side.getVector3i());
    Block adjType=world.getBlock(adjPos);
    if ((adjType.equals(air) || adjType.getBlockForm() == Block.BLOCK_FORM.BILLBOARD) && checkValidForLiquid(adjPos,type)) {
      world.setBlock(adjPos,type,adjType);
    }
  }
  if (grass.equals(belowType) || snow.equals(belowType)) {
    world.setBlock(belowBlockPos,dirt,belowType);
  }
}
