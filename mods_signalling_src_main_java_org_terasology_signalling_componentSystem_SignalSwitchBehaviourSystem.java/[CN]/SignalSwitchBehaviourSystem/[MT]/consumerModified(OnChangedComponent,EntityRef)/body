{
  if (entity.hasComponent(BlockComponent.class)) {
    SignalConsumerStatusComponent consumerStatusComponent=entity.getComponent(SignalConsumerStatusComponent.class);
    Vector3i blockLocation=new Vector3i(entity.getComponent(BlockComponent.class).getPosition());
    Block block=worldProvider.getBlock(blockLocation);
    BlockFamily blockFamily=block.getBlockFamily();
    if (block == lampTurnedOff && consumerStatusComponent.hasSignal) {
      logger.info("Lamp turning on");
      worldProvider.setBlock(blockLocation,lampTurnedOn,block);
    }
 else     if (block == lampTurnedOn && !consumerStatusComponent.hasSignal) {
      logger.info("Lamp turning off");
      worldProvider.setBlock(blockLocation,lampTurnedOff,block);
    }
 else     if (blockFamily == signalOrGate || blockFamily == signalAndGate || blockFamily == signalXorGate) {
      signalChangedForNormalGate(entity,consumerStatusComponent);
    }
 else     if (blockFamily == signalNandGate) {
      signalChangedForNotGate(entity,consumerStatusComponent);
    }
 else     if (blockFamily == signalOnDelayGate) {
      signalChangedForDelayOnGate(entity,consumerStatusComponent);
    }
 else     if (blockFamily == signalOffDelayGate) {
      signalChangedForDelayOffGate(entity,consumerStatusComponent);
    }
  }
}
