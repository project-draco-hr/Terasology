{
  List<URL> urls=Lists.newArrayList();
  for (  Mod mod : getActiveMods()) {
    if (mod.isCodeMod()) {
      urls.add(mod.getModClasspathUrl());
    }
  }
  if (activeModClassLoader != null) {
    try {
      activeModClassLoader.close();
    }
 catch (    IOException e) {
      logger.error("Failed to close activeModClassLoader",e);
    }
  }
  activeModClassLoader=new URLClassLoader(urls.toArray(new URL[urls.size()]),getClass().getClassLoader());
  for (  Mod mod : getActiveMods()) {
    mod.setActiveClassLoader(activeModClassLoader);
  }
  activeModReflections=new Reflections(new ConfigurationBuilder().addClassLoader(getClass().getClassLoader()).addClassLoader(activeModClassLoader));
  activeModReflections.merge(getEngineReflections());
  for (  Mod mod : getActiveMods()) {
    if (mod.isCodeMod()) {
      activeModReflections.merge(mod.getReflections());
    }
  }
}
