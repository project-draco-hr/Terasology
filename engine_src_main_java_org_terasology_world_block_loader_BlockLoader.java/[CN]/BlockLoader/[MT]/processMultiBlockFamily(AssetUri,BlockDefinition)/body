{
  List<BlockFamily> result=Lists.newArrayList();
  for (  String shapeString : blockDef.shapes) {
    BlockShape shape=(BlockShape)Assets.get(AssetType.SHAPE,shapeString);
    if (shape != null) {
      BlockUri familyUri;
      if (shape.equals(cubeShape)) {
        familyUri=new BlockUri(blockDefUri.getModuleName(),blockDefUri.getAssetName());
      }
 else {
        familyUri=new BlockUri(blockDefUri.getModuleName(),blockDefUri.getAssetName(),shape.getURI().getModuleName(),shape.getURI().getAssetName());
      }
      blockDef.shape=shapeString;
      if (shape.isCollisionYawSymmetric()) {
        Block block=constructSingleBlock(blockDefUri,blockDef);
        result.add(new SymmetricFamily(familyUri,block,blockDef.categories));
      }
 else {
        Map<Side,Block> blockMap=Maps.newEnumMap(Side.class);
        constructHorizontalBlocks(blockDefUri,blockDef,blockMap);
        result.add(new HorizontalBlockFamily(familyUri,blockMap,blockDef.categories));
      }
    }
  }
  return result;
}
