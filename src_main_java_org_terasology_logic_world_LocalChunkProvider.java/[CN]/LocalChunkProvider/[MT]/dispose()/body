{
  for (int i=0; i < REQUEST_CHUNK_THREADS; ++i) {
    reviewChunkQueue.offer(new ChunkRequest(ChunkRequest.RequestType.EXIT,Region3i.EMPTY));
  }
  for (int i=0; i < CHUNK_PROCESSING_THREADS; ++i) {
    chunkTasksQueue.offer(new ShutdownTask());
  }
  reviewThreads.shutdown();
  chunkProcessingThreads.shutdown();
  try {
    if (!reviewThreads.awaitTermination(1,TimeUnit.SECONDS)) {
      logger.log(Level.WARNING,"Timed out awaiting chunk review thread termination");
    }
    if (!chunkProcessingThreads.awaitTermination(1,TimeUnit.SECONDS)) {
      logger.log(Level.WARNING,"Timed out awaiting chunk processing thread termination");
    }
  }
 catch (  InterruptedException e) {
    logger.log(Level.WARNING,"Interrupted awaiting chunk thread termination");
  }
  for (  Chunk chunk : nearCache.values()) {
    farStore.put(chunk);
    chunk.dispose();
  }
  nearCache.clear();
}
