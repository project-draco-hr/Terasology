{
  AccessController.doPrivileged(new PrivilegedAction<Object>(){
    @Override public Object run(){
      for (      Field field : ReflectionUtils.getAllFields(provider.getClass(),ReflectionUtils.withAnnotation(Requires.class))) {
        if (field.getType().equals(implementedInterface)) {
          try {
            field.setAccessible(true);
            field.set(provider,previous);
          }
 catch (          IllegalAccessException e) {
            logger.error("Failed to inject value {} into field {}",previous,field,e);
          }
        }
      }
      return null;
    }
  }
);
}
