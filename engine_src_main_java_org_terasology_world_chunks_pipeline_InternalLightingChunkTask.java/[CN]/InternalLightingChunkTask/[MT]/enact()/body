{
  Chunk chunk=getProvider().getChunkForProcessing(getPosition());
  if (chunk == null) {
    return;
  }
  chunk.lock();
  try {
    if (chunk.isDisposed() || chunk.getChunkState() != Chunk.State.INTERNAL_LIGHT_GENERATION_PENDING) {
      return;
    }
    InternalLightProcessor.generateInternalLighting(chunk);
    chunk.deflate();
    chunk.setChunkState(Chunk.State.COMPLETE);
    getProvider().onChunkIsReady(chunk.getPos());
  }
  finally {
    chunk.unlock();
  }
}
