{
  Texture texture=getTexture(value);
  if (marginTop + texture.getHeight() + marginBottom > canvas.size().y) {
    int iconHeight=canvas.size().y - marginTop - marginBottom;
    canvas.drawTexture(texture,Rect2i.createFromMinAndSize(marginLeft,marginTop,texture.getWidth(),iconHeight));
  }
 else {
    int iconVerticalPosition=(canvas.size().y - texture.getHeight()) / 2;
    canvas.drawTexture(texture,Rect2i.createFromMinAndSize(marginLeft,iconVerticalPosition,texture.getWidth(),texture.getHeight()));
  }
  String text=getString(value);
  int iconWidth=marginLeft + texture.getWidth() + marginRight;
  Rect2i textRegion=Rect2i.createFromMinAndSize(iconWidth,0,canvas.getRegion().width() - iconWidth,canvas.getRegion().height());
  if (wrap) {
    canvas.drawText(text,textRegion);
  }
 else {
    int maxTextWidth=canvas.size().x - iconWidth;
    Font font=canvas.getCurrentStyle().getFont();
    if (font.getWidth(text) <= maxTextWidth) {
      canvas.drawText(text,textRegion);
    }
 else {
      String shortText="...";
      StringBuilder sb=new StringBuilder(text);
      while (sb.length() > 0) {
        shortText=sb.toString() + "...";
        if (font.getWidth(shortText) <= maxTextWidth) {
          break;
        }
        sb.setLength(sb.length() - 1);
      }
      canvas.drawText(shortText,textRegion);
    }
  }
}
