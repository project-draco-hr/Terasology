{
  ModuleManager moduleManager=ModuleManagerFactory.create();
  Multimap<InputCategory,String> categories=ArrayListMultimap.create();
  Multimap<String,Input> keys=ArrayListMultimap.create();
  Map<String,String> desc=new HashMap<String,String>();
  for (  Class<?> holdingType : moduleManager.getEnvironment().getTypesAnnotatedWith(InputCategory.class)) {
    InputCategory inputCategory=holdingType.getAnnotation(InputCategory.class);
    categories.put(inputCategory,null);
    for (    String button : inputCategory.ordering()) {
      categories.put(inputCategory,button);
    }
  }
  for (  Class<?> buttonEvent : moduleManager.getEnvironment().getTypesAnnotatedWith(RegisterBindButton.class)) {
    DefaultBinding defBinding=buttonEvent.getAnnotation(DefaultBinding.class);
    RegisterBindButton info=buttonEvent.getAnnotation(RegisterBindButton.class);
    String cat=info.category();
    String id="engine:" + info.id();
    desc.put(id,info.description());
    if (cat.isEmpty()) {
      InputCategory inputCategory=findEntry(categories,id);
      if (inputCategory == null) {
        System.out.println("Invalid category for: " + info.id());
      }
    }
 else {
      InputCategory inputCategory=findCategory(categories,cat);
      if (inputCategory != null) {
        categories.put(inputCategory,id);
      }
 else {
        System.out.println("Invalid category for: " + info.id());
      }
    }
    if (defBinding != null) {
      Input input=defBinding.type().getInput(defBinding.id());
      keys.put(id,input);
    }
 else {
      DefaultBindings multiBinding=buttonEvent.getAnnotation(DefaultBindings.class);
      if (multiBinding != null && multiBinding.value().length == 2) {
        DefaultBinding[] bindings=multiBinding.value();
        Input primary=bindings[0].type().getInput(bindings[0].id());
        Input secondary=bindings[1].type().getInput(bindings[1].id());
        keys.put(id,primary);
        keys.put(id,secondary);
      }
    }
  }
  for (  InputCategory row : categories.keySet()) {
    System.out.println("# " + row.displayName());
    for (    String entry : categories.get(row)) {
      if (entry != null) {
        System.out.println(desc.get(entry) + ": " + keys.get(entry));
      }
    }
  }
}
