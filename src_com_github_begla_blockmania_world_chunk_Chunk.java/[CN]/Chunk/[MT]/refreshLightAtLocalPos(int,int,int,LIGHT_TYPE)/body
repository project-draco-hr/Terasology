{
  int blockPosX=getBlockWorldPosX(x);
  int blockPosZ=getBlockWorldPosZ(z);
  byte bType=getBlock(x,y,z);
  if (!Block.getBlockForType(bType).isBlockTypeTranslucent()) {
    setLight(x,y,z,(byte)0,type);
  }
 else {
    byte val=getParent().getLight(blockPosX,y,blockPosZ,type);
    byte val1=getParent().getLight(blockPosX + 1,y,blockPosZ,type);
    byte val2=getParent().getLight(blockPosX - 1,y,blockPosZ,type);
    byte val3=getParent().getLight(blockPosX,y,blockPosZ + 1,type);
    byte val4=getParent().getLight(blockPosX,y,blockPosZ - 1,type);
    byte val5=getParent().getLight(blockPosX,y + 1,blockPosZ,type);
    byte val6=getParent().getLight(blockPosX,y - 1,blockPosZ,type);
    byte max=(byte)(Math.max(Math.max(Math.max(val1,val2),Math.max(val3,val4)),Math.max(val5,val6)) - 1);
    if (max < 0) {
      max=0;
    }
    byte res=(byte)Math.max(max,val);
    setLight(x,y,z,res,type);
  }
}
