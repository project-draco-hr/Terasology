{
  NetData.ServerInfoMessage serverInfo=server.getInfo();
  Map<Class<? extends Component>,Integer> componentIdTable=Maps.newHashMap();
  for (  NetData.SerializationInfo info : serverInfo.getComponentList()) {
    ComponentMetadata<?> metadata=entitySystemLibrary.getComponentLibrary().getMetadata(info.getName());
    if (metadata != null) {
      componentIdTable.put(metadata.getType(),info.getId());
      for (int i=0; i < info.getFieldIdCount(); ++i) {
        FieldMetadata field=metadata.getField(info.getFieldName(i));
        if (field != null) {
          metadata.setFieldId(field,info.getFieldId(i));
        }
 else {
          logger.error("Server has unknown field '{}' on component '{}'",info.getFieldName(i),info.getName());
        }
      }
    }
 else {
      logger.error("Server has unknown component '{}'",info.getName());
    }
  }
  entitySerializer.setComponentIdMapping(componentIdTable);
  Map<Class<? extends Event>,Integer> eventIdTable=Maps.newHashMap();
  for (  NetData.SerializationInfo info : serverInfo.getEventList()) {
    EventMetadata<?> metadata=entitySystemLibrary.getEventLibrary().getMetadata(info.getName());
    if (metadata != null) {
      eventIdTable.put(metadata.getType(),info.getId());
      for (int i=0; i < info.getFieldIdCount(); ++i) {
        FieldMetadata field=metadata.getField(info.getFieldName(i));
        if (field != null) {
          metadata.setFieldId(field,info.getFieldId(i));
        }
 else {
          logger.error("Server has unknown field '{}' on event '{}'",info.getFieldName(i),info.getName());
        }
      }
    }
 else {
      logger.error("Server has unknown event '{}'",info.getName());
    }
  }
  eventSerializer.setIdMapping(eventIdTable);
}
