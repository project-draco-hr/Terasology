{
  if (mode != NetworkMode.NONE) {
    if (entityManager != null) {
      if (!newClients.isEmpty()) {
        List<Client> newPlayers=Lists.newArrayListWithExpectedSize(newClients.size());
        newClients.drainTo(newPlayers);
        for (        Client client : newPlayers) {
          processNewClient(client);
        }
      }
      if (!disconnectedClients.isEmpty()) {
        List<Client> removedPlayers=Lists.newArrayListWithExpectedSize(disconnectedClients.size());
        disconnectedClients.drainTo(removedPlayers);
        for (        Client client : removedPlayers) {
          processRemovedClient(client);
        }
      }
      long currentTimer=timer.getRawTimeInMs();
      boolean netTick=false;
      if (currentTimer > nextNetworkTick) {
        nextNetworkTick+=NET_TICK_RATE;
        netTick=true;
      }
      for (      Client client : clientList) {
        client.update(netTick);
      }
      if (server != null) {
        server.update(netTick);
      }
    }
  }
}
