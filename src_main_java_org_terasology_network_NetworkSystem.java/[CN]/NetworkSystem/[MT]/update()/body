{
  if (mode != NetworkMode.NONE) {
    if (entityManager != null) {
      if (remoteWorldProvider != null) {
        List<Chunk> chunks=Lists.newArrayListWithExpectedSize(chunkQueue.size());
        chunkQueue.drainTo(chunks);
        for (        Chunk chunk : chunks) {
          remoteWorldProvider.receiveChunk(chunk);
        }
      }
      if (!newClients.isEmpty()) {
        List<ClientPlayer> newPlayers=Lists.newArrayListWithExpectedSize(newClients.size());
        newClients.drainTo(newPlayers);
        for (        ClientPlayer client : newPlayers) {
          processNewClient(client);
        }
      }
      for (      ClientPlayer client : clientPlayerList) {
        client.update();
      }
      processMessages();
    }
  }
}
