{
  if (mode != NetworkMode.NONE) {
    if (entityManager != null) {
      if (!newClients.isEmpty()) {
        List<ClientPlayer> newPlayers=Lists.newArrayListWithExpectedSize(newClients.size());
        newClients.drainTo(newPlayers);
        for (        ClientPlayer client : newPlayers) {
          processNewClient(client);
        }
      }
      for (      ClientPlayer client : clientPlayerList) {
        client.update();
      }
      if (server != null) {
        server.update();
      }
    }
  }
}
