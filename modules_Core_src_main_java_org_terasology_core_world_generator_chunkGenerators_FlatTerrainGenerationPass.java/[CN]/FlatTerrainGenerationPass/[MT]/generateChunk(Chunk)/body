{
  Region3i chunkRegion=chunk.getRegion();
  if (surfaceHeight >= chunkRegion.min().y) {
    for (int x=0; x < chunk.getChunkSizeX(); x++) {
      for (int z=0; z < chunk.getChunkSizeZ(); z++) {
        final WorldBiomeProvider.Biome type=biomeProvider.getBiomeAt(chunk.getBlockWorldPosX(x),chunk.getBlockWorldPosZ(z));
        for (int y=0; y < chunk.getChunkSizeY() && y + chunkRegion.min().y < surfaceHeight + 1; y++) {
          int worldY=y + +chunkRegion.min().y;
          if (worldY < surfaceHeight) {
switch (type) {
case FOREST:
              chunk.setBlock(x,y,z,dirt);
            break;
case PLAINS:
          chunk.setBlock(x,y,z,dirt);
        break;
case MOUNTAINS:
      chunk.setBlock(x,y,z,stone);
    break;
case SNOW:
  chunk.setBlock(x,y,z,snow);
break;
case DESERT:
chunk.setBlock(x,y,z,sand);
break;
}
}
 else if (worldY == surfaceHeight) {
switch (type) {
case FOREST:
chunk.setBlock(x,y,z,grass);
break;
case PLAINS:
chunk.setBlock(x,y,z,grass);
break;
case MOUNTAINS:
chunk.setBlock(x,y,z,stone);
break;
case SNOW:
chunk.setBlock(x,y,z,snow);
break;
case DESERT:
chunk.setBlock(x,y,z,sand);
break;
}
}
}
}
}
}
}
