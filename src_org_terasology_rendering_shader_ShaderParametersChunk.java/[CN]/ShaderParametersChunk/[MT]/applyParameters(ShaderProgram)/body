{
  Terasology tera=Terasology.getInstance();
  GL13.glActiveTexture(GL13.GL_TEXTURE1);
  TextureManager.getInstance().bindTexture("custom_lava_still");
  GL13.glActiveTexture(GL13.GL_TEXTURE2);
  TextureManager.getInstance().bindTexture("water_normal");
  GL13.glActiveTexture(GL13.GL_TEXTURE3);
  TextureManager.getInstance().bindTexture("effects");
  GL13.glActiveTexture(GL13.GL_TEXTURE0);
  TextureManager.getInstance().bindTexture("terrain");
  program.setInt("textureLava",1);
  program.setInt("textureWaterNormal",2);
  program.setInt("textureEffects",3);
  program.setInt("textureAtlas",0);
  if (tera.getActiveWorldRenderer() != null)   program.setFloat("daylight",(float)tera.getActiveWorldRenderer().getDaylight());
  if (tera.getActivePlayer() != null) {
    program.setInt("swimming",tera.getActivePlayer().isSwimming() ? 1 : 0);
    program.setInt("carryingTorch",tera.getActivePlayer().isCarryingTorch() ? 1 : 0);
  }
  if (tera.getActiveWorldProvider() != null) {
    program.setFloat("time",(float)tera.getActiveWorldProvider().getTime());
  }
  program.setFloat1("wavingCoordinates",BlockManager.getInstance().calcCoordinatesForWavingBlocks());
  program.setFloat2("grassCoordinate",BlockManager.getInstance().calcCoordinate("Grass"));
  program.setFloat2("waterCoordinate",BlockManager.getInstance().calcCoordinate("Water"));
  program.setFloat2("lavaCoordinate",BlockManager.getInstance().calcCoordinate("Lava"));
}
