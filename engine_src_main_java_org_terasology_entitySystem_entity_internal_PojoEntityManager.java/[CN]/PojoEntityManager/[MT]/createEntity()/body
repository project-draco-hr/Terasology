{
  if (!freedIds.isEmpty()) {
    TLongIterator iterator=freedIds.iterator();
    long id=iterator.next();
    iterator.remove();
    loadedIds.add(id);
    return id;
  }
  if (nextEntityId == NULL_ID) {
    nextEntityId++;
  }
  loadedIds.add(nextEntityId);
  return nextEntityId++;
}
