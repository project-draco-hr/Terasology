{
  potion=entity.getComponent(PotionComponent.class);
  EntityManager entityManager=CoreRegister.get(EntityManager.class);
  EntityRef item=entityManager.create("core:emptyVial");
  HealthComponent health=event.getTarget().getComponent(HealthComponent.class);
  if (potion.type.equals(PotionComponent.PotionType.Red) && health != null) {
    health.currentHealth=health.maxHealth;
    event.getTarget().saveComponent(health);
    event.getTarget().send(new ReceiveItemEvent(item));
    ItemComponent itemComp=item.getComponent(ItemComponent.class);
    if (itemComp != null && !itemComp.container.exists()) {
      item.destroy();
    }
  }
}
