{
  int size=atlasSize / (1 << mipMapLevel);
  int textureSize=tileSize / (1 << mipMapLevel);
  int tilesPerDim=atlasSize / tileSize;
  BufferedImage result=new BufferedImage(size,size,BufferedImage.TYPE_INT_ARGB);
  Graphics g=result.getGraphics();
  if (tiles.size() > MAX_TILES) {
    logger.error("Too many tiles, culling overflow");
  }
  for (int index=0; index < tiles.size() && index < MAX_TILES; ++index) {
    TileData tile=tiles.get(index);
    int posX=(index) % tilesPerDim;
    int posY=(index) / tilesPerDim;
    g.drawImage(tile.getImage().getScaledInstance(textureSize,textureSize,Image.SCALE_SMOOTH),posX * textureSize,posY * textureSize,null);
  }
  return result;
}
