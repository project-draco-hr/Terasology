{
  if (config.getRendering().isRenderNearest()) {
    SetMultimap<Material,EntityRef> entitiesToRender=HashMultimap.create();
    for (    EntityRef entity : Arrays.asList(opaqueMeshSorter.getNearest(config.getRendering().getMeshLimit()))) {
      MeshComponent meshComp=entity.getComponent(MeshComponent.class);
      if (meshComp != null && meshComp.material != null) {
        entitiesToRender.put(meshComp.material,entity);
      }
    }
    renderOpaque(entitiesToRender);
  }
 else {
    renderOpaque(opaqueMesh);
  }
}
