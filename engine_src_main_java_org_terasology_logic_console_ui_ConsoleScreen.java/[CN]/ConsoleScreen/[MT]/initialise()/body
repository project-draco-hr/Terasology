{
  final ScrollableArea scrollArea=find("scrollArea",ScrollableArea.class);
  scrollArea.moveToBottom();
  List<CommandInfo> commands=console.getCommandList();
  Collection<String> commandNames=Collections2.transform(commands,new Function<CommandInfo,String>(){
    @Override public String apply(    CommandInfo input){
      return input.getName();
    }
  }
);
  commandLine=find("commandLine",UICommandEntry.class);
  getManager().setFocus(commandLine);
  commandLine.setTabCompletionEngine(new CyclingTabCompletionEngine(console,commandNames));
  commandLine.bindCommandHistory(new ReadOnlyBinding<List<String>>(){
    @Override public List<String> get(){
      return console.getPreviousCommands();
    }
  }
);
  commandLine.subscribe(new ActivateEventListener(){
    @Override public void onActivated(    UIWidget widget){
      console.execute(commandLine.getText(),localPlayer.getClientEntity());
      commandLine.setText("");
      scrollArea.moveToBottom();
    }
  }
);
  final UIText history=find("messageHistory",UIText.class);
  history.setReadOnly(true);
  history.bindText(new ReadOnlyBinding<String>(){
    @Override public String get(){
      StringBuilder messageList=new StringBuilder();
      Iterator<Message> messageIterator=console.getMessages().iterator();
      while (messageIterator.hasNext()) {
        Message message=messageIterator.next();
        messageList.append(FontColor.getColored(message.getMessage(),message.getType().getColor()));
        messageList.append(Message.NEW_LINE);
      }
      return messageList.toString();
    }
  }
);
}
