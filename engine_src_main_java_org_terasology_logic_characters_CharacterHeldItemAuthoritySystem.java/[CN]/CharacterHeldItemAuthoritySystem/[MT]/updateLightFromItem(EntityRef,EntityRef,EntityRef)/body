{
  byte oldLuminance=getLuminance(oldItem);
  byte newLuminance=getLuminance(newItem);
  LightComponent newItemLight=newItem.getComponent(LightComponent.class);
  if (newLuminance == 0 || newItemLight == null) {
    entity.removeComponent(LightComponent.class);
  }
 else {
    LightComponent light=entity.getComponent(LightComponent.class);
    if (light == null) {
      light=new LightComponent();
      light.lightColorAmbient=newItemLight.lightColorAmbient;
      light.lightColorDiffuse=newItemLight.lightColorDiffuse;
      light.lightDiffuseIntensity=newItemLight.lightDiffuseIntensity;
      light.lightAmbientIntensity=newItemLight.lightAmbientIntensity;
      light.lightAttenuationRange=1f;
      light.lightAttenuationFalloff=0.1f;
      entity.addOrSaveComponent(light);
    }
  }
}
