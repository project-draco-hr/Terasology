{
  if (cs == null) {
    throw new IllegalStateException("Can't access assets: CodeSource is null");
  }
  URL url=cs.getLocation();
  try {
    File codePath=new File(url.toURI());
    if (codePath.isFile()) {
      source=new ArchiveSource(id,codePath);
    }
 else {
      source=new DirectorySource(id,new File(codePath,"org/terasology/data"));
    }
  }
 catch (  Throwable e) {
    throw new IllegalStateException("Error loading assets: " + e.getMessage(),e);
  }
}
