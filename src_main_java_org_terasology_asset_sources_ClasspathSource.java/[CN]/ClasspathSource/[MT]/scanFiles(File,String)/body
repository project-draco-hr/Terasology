{
  for (  File child : file.listFiles()) {
    if (child.isDirectory()) {
      this.scanFiles(child,basePath);
    }
 else     if (child.isFile()) {
      String key=child.getAbsolutePath().replace(File.separatorChar,'/');
      if (basePath != null) {
        key=key.substring(basePath.length() + 1);
      }
      AssetUri uri=getUri(key);
      if (uri != null) {
        try {
          assets.put(uri,child.toURI().toURL());
          assetsByType.put(uri.getAssetType(),uri);
        }
 catch (        MalformedURLException e) {
          logger.warning("Failed to load asset " + key + " - "+ e.getMessage());
        }
      }
    }
  }
}
