{
  if (Files.isRegularFile(Config.getConfigFile())) {
    try {
      config=Config.load(Config.getConfigFile());
    }
 catch (    IOException e) {
      logger.error("Failed to load config",e);
      config=new Config();
    }
  }
 else {
    config=new Config();
  }
  if (!config.getDefaultModSelection().hasModule("core")) {
    config.getDefaultModSelection().addModule("core");
  }
  if (config.getSecurity().getServerPrivateCertificate() == null) {
    CertificateGenerator generator=new CertificateGenerator();
    CertificatePair serverIdentity=generator.generateSelfSigned();
    config.getSecurity().setServerCredentials(serverIdentity.getPublicCert(),serverIdentity.getPrivateCert());
    config.save();
  }
  logger.info("Video Settings: " + config.getRendering().toString());
  logger.info("Video Debug Settings: " + config.getRendering().getDebug().toString());
  CoreRegistry.putPermanently(Config.class,config);
}
