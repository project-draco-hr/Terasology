{
  logger.info("Shutting down Terasology...");
  Iterator<EngineSubsystem> iter=getSubsystems().descendingIterator();
  while (iter.hasNext()) {
    EngineSubsystem subsystem=iter.next();
    subsystem.shutdown(config);
  }
  config.save();
  if (currentState != null) {
    currentState.dispose();
    currentState=null;
  }
  terminateThreads();
}
