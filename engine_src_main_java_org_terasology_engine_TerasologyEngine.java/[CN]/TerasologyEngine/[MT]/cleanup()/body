{
  logger.info("Shutting down Terasology...");
  changeStatus(StandardGameStatus.SHUTTING_DOWN);
  Iterator<EngineSubsystem> shutdownIter=subsystems.descendingIterator();
  while (shutdownIter.hasNext()) {
    EngineSubsystem subsystem=shutdownIter.next();
    subsystem.shutdown(config);
  }
  config.save();
  if (currentState != null) {
    currentState.dispose();
    currentState=null;
  }
  Iterator<EngineSubsystem> disposeIter=subsystems.descendingIterator();
  while (disposeIter.hasNext()) {
    EngineSubsystem subsystem=disposeIter.next();
    try {
      subsystem.dispose();
    }
 catch (    RuntimeException t) {
      logger.error("Unable to dispose subsystem {}",subsystem,t);
    }
  }
}
