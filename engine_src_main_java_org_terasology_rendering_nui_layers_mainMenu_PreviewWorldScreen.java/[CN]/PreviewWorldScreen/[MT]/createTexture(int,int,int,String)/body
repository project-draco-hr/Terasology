{
  int size=4 * width * height;
  final int offX=-width / 2;
  final int offY=-height / 2;
  ByteBuffer buf=ByteBuffer.allocateDirect(size);
  for (int y=0; y < height; ++y) {
    for (int x=0; x < width; ++x) {
      int px=(x + offX) * scale;
      int py=(y + offY) * scale;
      Rect2i area=Rect2i.createFromMinAndSize(px,py,scale,scale);
      Color c=previewGenerator.get(layerName,area);
      c.addToBuffer(buf);
    }
  }
  buf.flip();
  ByteBuffer[] data=new ByteBuffer[]{buf};
  AssetUri uri=new AssetUri(AssetType.TEXTURE,"engine:terrainPreview");
  TextureData texData=new TextureData(width,height,data,Texture.WrapMode.CLAMP,Texture.FilterMode.LINEAR);
  return Assets.generateAsset(uri,texData,Texture.class);
}
