{
  super.onOpened();
  CoreRegistry.put(WorldGeneratorPluginLibrary.class,new TempWorldGeneratorPluginLibrary());
  WorldGeneratorInfo info=worldGeneratorManager.getWorldGeneratorInfo(config.getWorldGeneration().getDefaultGenerator());
  try {
    DependencyResolver resolver=new DependencyResolver(moduleManager.getRegistry());
    Name moduleName=info.getUri().getModuleName();
    ResolutionResult result=resolver.resolve(moduleName);
    try (ModuleEnvironment environment=moduleManager.loadEnvironment(result.getModules(),false)){
      worldGenerator=searchForWorldGenerator(info.getUri(),environment);
      worldGenerator.setWorldSeed(seed.getText());
      previewGen=new FacetLayerPreview(environment,worldGenerator);
    }
   }
 catch (  Exception e) {
    worldGenerator=null;
    logger.error("Unable to load world generator: " + info.getUri().toString() + " for a 2d preview",e);
  }
}
