{
  float offsetX=_chunk.getPosition().x * Configuration.CHUNK_DIMENSIONS.x;
  float offsetY=_chunk.getPosition().y * Configuration.CHUNK_DIMENSIONS.y;
  float offsetZ=_chunk.getPosition().z * Configuration.CHUNK_DIMENSIONS.z;
  TFloatArrayList color=mesh._vertexElements[0].color;
  TFloatArrayList normals=mesh._vertexElements[0].normals;
  TFloatArrayList tex=mesh._vertexElements[0].tex;
  TFloatArrayList quads=mesh._vertexElements[0].quads;
  if (renderType == RENDER_TYPE.TRANS) {
    color=mesh._vertexElements[1].color;
    normals=mesh._vertexElements[1].normals;
    tex=mesh._vertexElements[1].tex;
    quads=mesh._vertexElements[1].quads;
  }
  if (norm.z == 1 || norm.x == -1) {
    tex.add(texOffset.x);
    tex.add(texOffset.y + 0.0624f);
    tex.add(texOffset.x + 0.0624f);
    tex.add(texOffset.y + 0.0624f);
    tex.add(texOffset.x + 0.0624f);
    tex.add(texOffset.y);
    tex.add(texOffset.x);
    tex.add(texOffset.y);
  }
 else {
    tex.add(texOffset.x);
    tex.add(texOffset.y);
    tex.add(texOffset.x + 0.0624f);
    tex.add(texOffset.y);
    tex.add(texOffset.x + 0.0624f);
    tex.add(texOffset.y + 0.0624f);
    tex.add(texOffset.x);
    tex.add(texOffset.y + 0.0624f);
  }
  float shadowIntensity=calcAmbientOcclusion(new Vector3f(p1.x + x + offsetX,p1.y + y + offsetY,p1.z + z + offsetZ));
  color.add(colorOffset.x);
  color.add(colorOffset.y);
  color.add(colorOffset.z);
  color.add(colorOffset.w);
  normals.add(norm.x);
  normals.add(norm.y);
  normals.add(norm.z);
  addLightTexCoordFor(mesh,x,y,z,(int)norm.x,(int)norm.y,(int)norm.z,renderType,shadowIntensity);
  quads.add(p1.x + x + offsetX);
  quads.add(p1.y + y + offsetY);
  quads.add(p1.z + z + offsetZ);
  shadowIntensity=calcAmbientOcclusion(new Vector3f(p2.x + x + offsetX,p2.y + y + offsetY,p2.z + z + offsetZ));
  color.add(colorOffset.x);
  color.add(colorOffset.y);
  color.add(colorOffset.z);
  color.add(colorOffset.w);
  normals.add(norm.x);
  normals.add(norm.y);
  normals.add(norm.z);
  addLightTexCoordFor(mesh,x,y,z,(int)norm.x,(int)norm.y,(int)norm.z,renderType,shadowIntensity);
  quads.add(p2.x + x + offsetX);
  quads.add(p2.y + y + offsetY);
  quads.add(p2.z + z + offsetZ);
  shadowIntensity=calcAmbientOcclusion(new Vector3f(p3.x + x + offsetX,p3.y + y + offsetY,p3.z + z + offsetZ));
  color.add(colorOffset.x);
  color.add(colorOffset.y);
  color.add(colorOffset.z);
  color.add(colorOffset.w);
  normals.add(norm.x);
  normals.add(norm.y);
  normals.add(norm.z);
  addLightTexCoordFor(mesh,x,y,z,(int)norm.x,(int)norm.y,(int)norm.z,renderType,shadowIntensity);
  quads.add(p3.x + x + offsetX);
  quads.add(p3.y + y + offsetY);
  quads.add(p3.z + z + offsetZ);
  shadowIntensity=calcAmbientOcclusion(new Vector3f(p4.x + x + offsetX,p4.y + y + offsetY,p4.z + z + offsetZ));
  color.add(colorOffset.x);
  color.add(colorOffset.y);
  color.add(colorOffset.z);
  color.add(colorOffset.w);
  normals.add(norm.x);
  normals.add(norm.y);
  normals.add(norm.z);
  addLightTexCoordFor(mesh,x,y,z,(int)norm.x,(int)norm.y,(int)norm.z,renderType,shadowIntensity);
  quads.add(p4.x + x + offsetX);
  quads.add(p4.y + y + offsetY);
  quads.add(p4.z + z + offsetZ);
}
