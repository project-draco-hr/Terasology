{
  DefaultDocumentRenderStyle defaultDocumentRenderStyle=new DefaultDocumentRenderStyle(defaultFont,defaultColor);
  DocumentRenderStyle documentRenderStyle=getDocumentRenderStyle(defaultDocumentRenderStyle,documentData);
  int x=region.minX() + documentRenderStyle.getDocumentIndentLeft();
  int y=region.minY() + documentRenderStyle.getDocumentIndentTop();
  int availableWidth=region.width() - documentRenderStyle.getDocumentIndentLeft() - documentRenderStyle.getDocumentIndentRight();
  Color backgroundColor=documentRenderStyle.getBackgroundColor();
  if (backgroundColor != null) {
    canvas.drawFilledRectangle(canvas.getRegion(),backgroundColor);
  }
  y+=documentRenderStyle.getDocumentIndentTop();
  ParagraphRenderStyle lastRenderStyle=null;
  boolean first=true;
  for (  ParagraphData paragraphData : documentData.getParagraphs()) {
    if (lastRenderStyle != null) {
      y+=lastRenderStyle.getParagraphIndentBottom(false);
    }
    ParagraphRenderStyle paragraphRenderStyle=getParagraphRenderStyle(documentRenderStyle,paragraphData);
    int paragraphBorderWidth=availableWidth - paragraphRenderStyle.getParagraphIndentLeft() - paragraphRenderStyle.getParagraphIndentRight();
    int paragraphWidth=paragraphBorderWidth - paragraphRenderStyle.getParagraphBackgroundIndentLeft() - paragraphRenderStyle.getParagraphBackgroundIndentRight();
    ParagraphRenderable paragraphContents=paragraphData.getParagraphContents();
    int paragraphHeight=paragraphContents.getPreferredHeight(paragraphRenderStyle,paragraphWidth);
    int paragraphBorderHeight=paragraphHeight + paragraphRenderStyle.getParagraphBackgroundIndentTop() + paragraphRenderStyle.getParagraphBackgroundIndentBottom();
    Rect2i paragraphBorderRegion=Rect2i.createFromMinAndSize(x + paragraphRenderStyle.getParagraphIndentLeft(),y + paragraphRenderStyle.getParagraphIndentTop(first),paragraphBorderWidth,paragraphBorderHeight);
    Color paragraphBackground=paragraphRenderStyle.getParagraphBackground();
    if (paragraphBackground != null) {
      canvas.drawFilledRectangle(paragraphBorderRegion,paragraphBackground);
    }
    Rect2i paragraphRegion=Rect2i.createFromMinAndSize(x + paragraphRenderStyle.getParagraphIndentLeft() + paragraphRenderStyle.getParagraphBackgroundIndentLeft(),y + paragraphRenderStyle.getParagraphIndentTop(first) + paragraphRenderStyle.getParagraphBackgroundIndentTop(),paragraphWidth,paragraphHeight);
    paragraphContents.render(canvas,paragraphRegion,paragraphRenderStyle,paragraphRenderStyle.getHorizontalAlignment(),register);
    y+=paragraphRenderStyle.getParagraphIndentTop(first);
    y+=paragraphBorderHeight;
    lastRenderStyle=paragraphRenderStyle;
    first=false;
  }
}
