{
  int id=idIterator.next();
  EntityData.Entity.Builder entity=EntityData.Entity.newBuilder();
  entity.setId(id);
  for (  Component component : iterateComponents(id)) {
    EntityData.Component componentData=serializeComponent(component);
    if (componentData != null) {
      entity.addComponent(componentData);
    }
  }
  return entity.build();
}
