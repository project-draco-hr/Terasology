{
  Prefab prefab=prefabManager.createPrefab("Test");
  prefab.setComponent(new StringComponent("Value"));
  EntityRef entity=entityManager.create(prefab);
  StringComponent comp=entity.getComponent(StringComponent.class);
  comp.value="Delta";
  entity.saveComponent(comp);
  EntityData.Entity entityData=entityPersisterHelper.serializeEntity(entity);
  assertEquals(entity.getId(),entityData.getId());
  assertEquals(prefab.getName(),entityData.getParentPrefab());
  assertEquals(1,entityData.getComponentCount());
  assertEquals(0,entityData.getRemovedComponentCount());
  EntityData.Component componentData=entityData.getComponent(0);
  assertEquals("String",componentData.getType());
  assertEquals(Lists.newArrayList(EntityData.NameValue.newBuilder().setName("value").setValue(EntityData.Value.newBuilder().addString("Delta").build()).build()),componentData.getFieldList());
}
