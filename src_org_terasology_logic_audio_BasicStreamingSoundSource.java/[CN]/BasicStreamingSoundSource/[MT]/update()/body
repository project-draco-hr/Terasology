{
  int buffersProcessed=AL10.alGetSourcei(this.getSourceId(),AL10.AL_BUFFERS_PROCESSED);
  while (buffersProcessed-- > 0) {
    int buffer=AL10.alSourceUnqueueBuffers(this.getSourceId());
    if (((AbstractStreamingSound)audio).updateBuffer(buffer)) {
      AL10.alSourceQueueBuffers(this.getSourceId(),buffer);
    }
 else {
      _playing=false;
      continue;
    }
    OpenALException.checkState("Buffer refill");
  }
  int state=AL10.alGetSourcei(getSourceId(),AL10.AL_SOURCE_STATE);
  if (_playing && state != AL10.AL_PLAYING) {
    AL10.alSourcePlay(this.getSourceId());
  }
  super.update();
}
