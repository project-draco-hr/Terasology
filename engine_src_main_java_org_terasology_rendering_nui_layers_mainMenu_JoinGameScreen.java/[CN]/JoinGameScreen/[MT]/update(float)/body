{
  super.update(delta);
  if (joinServerTask != null && joinServerTask.isDone()) {
    getManager().popScreen();
    if (!joinServerTask.isCancelled()) {
      try {
        JoinStatus joinStatus=joinServerTask.get();
        if (joinStatus.getStatus() != JoinStatus.Status.FAILED) {
          engine.changeState(new StateLoading(joinStatus));
        }
 else {
          getManager().pushScreen(MessagePopup.ASSET_URI,MessagePopup.class).setMessage("Failed to Join","Could not connect to server - " + joinStatus.getErrorMessage());
        }
      }
 catch (      InterruptedException|ExecutionException e) {
        logger.warn("Could not join server",e);
      }
    }
    joinServerTask=null;
  }
}
