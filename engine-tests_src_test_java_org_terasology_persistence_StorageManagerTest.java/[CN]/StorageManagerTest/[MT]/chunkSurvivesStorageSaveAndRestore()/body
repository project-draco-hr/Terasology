{
  Chunk chunk=new ChunkImpl(CHUNK_POS);
  chunk.setBlock(0,0,0,testBlock);
  ChunkStore chunkStore=esm.createChunkStoreForSave(chunk);
  chunkStore.save();
  esm.createGlobalStoreForSave().save();
  esm.flush();
  EngineEntityManager newEntityManager=new EntitySystemBuilder().build(moduleManager,networkSystem,new ReflectionReflectFactory());
  StorageManager newSM=new StorageManagerInternal(moduleManager,newEntityManager,false);
  newSM.loadGlobalStore();
  ChunkStore restored=newSM.loadChunkStore(CHUNK_POS);
  assertNotNull(restored);
  assertEquals(CHUNK_POS,restored.getChunkPosition());
  assertNotNull(restored.getChunk());
  assertEquals(testBlock,restored.getChunk().getBlock(0,0,0));
}
