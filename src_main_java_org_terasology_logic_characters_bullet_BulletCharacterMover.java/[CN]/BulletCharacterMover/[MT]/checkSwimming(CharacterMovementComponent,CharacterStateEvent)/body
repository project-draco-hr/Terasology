{
  Vector3f worldPos=state.getPosition();
  Vector3f top=new Vector3f(worldPos);
  Vector3f bottom=new Vector3f(worldPos);
  top.y+=0.25f * movementComp.height;
  bottom.y-=0.25f * movementComp.height;
  boolean topUnderwater=worldProvider.getBlock(top).isLiquid();
  boolean bottomUnderwater=worldProvider.getBlock(bottom).isLiquid();
  boolean newSwimming=topUnderwater && bottomUnderwater;
  if (!newSwimming && state.getMode() == MovementMode.SWIMMING && state.getVelocity().y > 0) {
    state.getVelocity().y+=8;
  }
  state.setMode((newSwimming) ? MovementMode.SWIMMING : MovementMode.WALKING);
}
