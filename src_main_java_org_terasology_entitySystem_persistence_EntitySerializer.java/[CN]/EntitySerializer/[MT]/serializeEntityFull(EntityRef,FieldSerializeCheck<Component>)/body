{
  EntityData.Entity.Builder entity=EntityData.Entity.newBuilder();
  if (!ignoringEntityId) {
    entity.setId(entityRef.getId());
  }
  for (  Component component : entityRef.iterateComponents()) {
    if (component.getClass().equals(EntityInfoComponent.class))     continue;
    EntityData.Component componentData=componentSerializer.serialize(component,fieldCheck);
    if (componentData != null) {
      entity.addComponent(componentData);
    }
  }
  return entity.build();
}
