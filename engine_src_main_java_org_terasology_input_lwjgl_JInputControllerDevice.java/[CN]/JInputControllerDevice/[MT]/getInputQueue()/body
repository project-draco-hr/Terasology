{
  Queue<ControllerAction> result=new ArrayDeque<>();
  Event event=new Event();
  Iterator<Info> it=controllers.values().iterator();
  while (it.hasNext()) {
    Info info=it.next();
    Controller c=info.controller;
    if (c.poll()) {
      EventQueue queue=c.getEventQueue();
      while (queue.getNextEvent(event)) {
        ControllerAction action=convertEvent(info,event);
        if (action != null) {
          result.add(action);
        }
      }
    }
 else {
      removeController(c);
    }
  }
  return result;
}
