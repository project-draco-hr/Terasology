{
  for (  Vector3i pos : Region3i.createFromMinMax(new Vector3i(WORLD_MIN.x,NewChunk.SIZE_Y - 1,WORLD_MIN.z),new Vector3i(WORLD_MAX.x,NewChunk.SIZE_Y - 1,WORLD_MAX.z))) {
    view.setBlock(pos,dirt,air);
  }
  view.setBlock(new Vector3i(8,NewChunk.SIZE_Y - 1,8),air,dirt);
  propagator.update(8,NewChunk.SIZE_Y - 1,8,air,dirt);
  view.setBlock(new Vector3i(14,NewChunk.SIZE_Y - 1,8),air,dirt);
  propagator.update(14,NewChunk.SIZE_Y - 1,8,air,dirt);
  view.setBlock(new Vector3i(8,NewChunk.SIZE_Y - 1,8),dirt,air);
  propagator.update(8,NewChunk.SIZE_Y - 1,8,dirt,air);
  for (  Vector3i pos : Region3i.createFromMinMax(WORLD_MIN,new Vector3i(WORLD_MAX.x,WORLD_MAX.y - 1,WORLD_MAX.z))) {
    int expected=Math.max(NewChunk.MAX_LIGHT - TeraMath.fastAbs(pos.x - 14) - TeraMath.fastAbs(pos.z - 8),0);
    assertEquals(pos.toString(),expected,view.getSunlight(pos));
  }
}
