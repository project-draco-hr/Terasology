{
  int shaderId=GL20.glCreateShader(type);
  StringBuilder shader=Shader.createShaderBuilder();
  if (type == GL20.GL_FRAGMENT_SHADER)   shader.append(Shader.getIncludedFunctionsFragment()).append("\n");
 else   shader.append(Shader.getIncludedFunctionsVertex()).append("\n");
  String filename=_title;
  if (type == GL20.GL_FRAGMENT_SHADER) {
    filename+="_frag.glsl";
  }
 else   if (type == GL20.GL_VERTEX_SHADER) {
    filename+="_vert.glsl";
  }
  logger.log(Level.INFO,"Loading shader {0} ({1}, type = {2})",new String[]{_title,filename,String.valueOf(type)});
  shader.append(readShader(filename));
  if (type == GL20.GL_FRAGMENT_SHADER) {
    _fragmentProgram=shaderId;
  }
 else   if (type == GL20.GL_VERTEX_SHADER) {
    _vertexProgram=shaderId;
  }
  GL20.glShaderSource(shaderId,shader.toString());
  GL20.glCompileShader(shaderId);
  printLogInfo(shaderId);
}
