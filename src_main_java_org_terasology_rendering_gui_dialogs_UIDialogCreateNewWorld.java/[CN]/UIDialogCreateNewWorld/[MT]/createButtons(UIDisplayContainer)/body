{
  okButton=new UIButton(new Vector2f(128f,32f),UIButton.ButtonType.NORMAL);
  okButton.getLabel().setText("Play");
  okButton.setPosition(new Vector2f(getSize().x / 2 - okButton.getSize().x - 16f,getSize().y - okButton.getSize().y - 10));
  okButton.setVisible(true);
  okButton.addClickListener(new ClickListener(){
    @Override public void click(    UIDisplayElement element,    int button){
      if (inputWorldTitle.getText().isEmpty()) {
        getGUIManager().showMessage("Error","Please enter a world name");
        return;
      }
 else       if ((new File(PathManager.getInstance().getWorldSavePath(inputWorldTitle.getText()),WorldInfo.DEFAULT_FILE_NAME)).exists()) {
        getGUIManager().showMessage("Error","A World with this name already exists");
        return;
      }
      CoreRegistry.put(GameType.class,(GameType)typeOfGame.getSelection().getValue());
      if (inputSeed.getText().length() > 0) {
        org.terasology.logic.manager.Config.getInstance().setDefaultSeed(inputSeed.getText());
      }
 else {
        FastRandom random=new FastRandom();
        org.terasology.logic.manager.Config.getInstance().setDefaultSeed(random.randomCharacterString(32));
      }
      if (inputWorldTitle.getText().length() > 0) {
        org.terasology.logic.manager.Config.getInstance().setWorldTitle(inputWorldTitle.getText());
      }
 else {
        org.terasology.logic.manager.Config.getInstance().setWorldTitle(getWorldName());
      }
      List<String> chunkList=new ArrayList<String>();
switch (chunkGenerator.getSelectionIndex()) {
case 1:
        chunkList.add(FlatTerrainGenerator.class.getName());
      chunkList.add(FloraGenerator.class.getName());
    chunkList.add(LiquidsGenerator.class.getName());
  chunkList.add(ForestGenerator.class.getName());
break;
case 2:
chunkList.add(MultiTerrainGenerator.class.getName());
chunkList.add(FloraGenerator.class.getName());
chunkList.add(LiquidsGenerator.class.getName());
chunkList.add(ForestGenerator.class.getName());
break;
case 3:
chunkList.add(BasicHMTerrainGenerator.class.getName());
chunkList.add(FloraGenerator.class.getName());
chunkList.add(LiquidsGenerator.class.getName());
chunkList.add(ForestGenerator.class.getName());
break;
default :
chunkList.add(PerlinTerrainGenerator.class.getName());
chunkList.add(FloraGenerator.class.getName());
chunkList.add(LiquidsGenerator.class.getName());
chunkList.add(ForestGenerator.class.getName());
break;
}
String[] chunksListArr=chunkList.toArray(new String[chunkList.size()]);
org.terasology.logic.manager.Config.getInstance().setChunkGenerator(chunksListArr);
CoreRegistry.get(Config.class).getDefaultModConfig().copy(modConfig);
CoreRegistry.get(Config.class).save();
CoreRegistry.get(GameEngine.class).changeState(new StateLoading(new WorldInfo(org.terasology.logic.manager.Config.getInstance().getWorldTitle(),org.terasology.logic.manager.Config.getInstance().getDefaultSeed(),org.terasology.logic.manager.Config.getInstance().getDayNightLengthInMs() / 4,chunksListArr,CoreRegistry.get(GameType.class).getClass().toString(),modConfig),NetworkMode.SERVER));
}
}
);
cancelButton=new UIButton(new Vector2f(128f,32f),UIButton.ButtonType.NORMAL);
cancelButton.setPosition(new Vector2f(okButton.getPosition().x + okButton.getSize().x + 16f,okButton.getPosition().y));
cancelButton.getLabel().setText("Cancel");
cancelButton.setVisible(true);
cancelButton.addClickListener(new ClickListener(){
@Override public void click(UIDisplayElement element,int button){
close();
}
}
);
parent.addDisplayElement(okButton);
parent.addDisplayElement(cancelButton);
}
