{
  CoreRegistry.put(ComponentSystemManager.class,new ComponentSystemManager());
  CoreRegistry.put(BlockManager.class,new BlockManagerAuthority());
  entityManager.clear();
  mockTimer=mock(Timer.class);
  networkSystem=new NetworkSystemImpl(mockTimer);
  client=mock(NetClient.class);
  NetworkComponent clientNetComp=new NetworkComponent();
  clientNetComp.replicateMode=NetworkComponent.ReplicateMode.OWNER;
  clientEntity=entityManager.create(clientNetComp);
  when(client.getEntity()).thenReturn(clientEntity);
  networkSystem.mockHost();
  networkSystem.connectToEntitySystem(entityManager,CoreRegistry.get(EntitySystemLibrary.class),mock(BlockEntityRegistry.class));
  networkSystem.registerNetworkEntity(clientEntity);
}
