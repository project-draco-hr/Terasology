{
  Map<Class<? extends Component>,Integer> componentIdTable=Maps.newHashMap();
  for (  ComponentMetadata<?> componentMetadata : componentLibrary) {
    int index=componentIdTable.size();
    componentIdTable.put(componentMetadata.getType(),index);
    world.addComponentClass(ComponentUtil.getComponentClassName(componentMetadata.getType()));
  }
  entitySerializer.setComponentIdMapping(componentIdTable);
  prefabSerializer.setComponentIdMapping(componentIdTable);
}
