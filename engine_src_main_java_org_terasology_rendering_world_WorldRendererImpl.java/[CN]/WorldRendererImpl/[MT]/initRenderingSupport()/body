{
  buffersManager=new FrameBuffersManager();
  context.put(FrameBuffersManager.class,buffersManager);
  graphicState=new GraphicState(buffersManager);
  postProcessor=new PostProcessor(buffersManager,graphicState);
  context.put(PostProcessor.class,postProcessor);
  buffersManager.setGraphicState(graphicState);
  buffersManager.setPostProcessor(postProcessor);
  buffersManager.initialize();
  shaderManager.initShaders();
  postProcessor.initializeMaterials();
  initMaterials();
  shadowMapNode=new ShadowMapNode(context,getMaterial("engine:prog.shadowMap"),playerCamera,this);
  renderingPipeline.add(shadowMapNode);
  renderableWorld.setShadowMapCamera(shadowMapNode.camera);
}
