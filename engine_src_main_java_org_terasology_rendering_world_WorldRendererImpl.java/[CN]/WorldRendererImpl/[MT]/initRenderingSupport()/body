{
  buffersManager=new FrameBuffersManager();
  context.put(FrameBuffersManager.class,buffersManager);
  graphicState=new GraphicState(buffersManager);
  postProcessor=new PostProcessor(buffersManager,graphicState);
  context.put(PostProcessor.class,postProcessor);
  buffersManager.setGraphicState(graphicState);
  buffersManager.setPostProcessor(postProcessor);
  buffersManager.initialize();
  shaderManager.initShaders();
  postProcessor.initializeMaterials();
  initMaterials();
  context.put(WorldRenderer.class,this);
  context.put(RenderQueuesHelper.class,renderQueues);
  shadowMapNode=new ShadowMapNode(context,getMaterial("engine:prog.shadowMap"),playerCamera);
  worldReflectionNode=new WorldReflectionNode(context,playerCamera,chunkShader);
  renderingPipeline=Lists.newArrayList();
  renderingPipeline.add(shadowMapNode);
  renderingPipeline.add(worldReflectionNode);
  renderableWorld.setShadowMapCamera(shadowMapNode.camera);
}
