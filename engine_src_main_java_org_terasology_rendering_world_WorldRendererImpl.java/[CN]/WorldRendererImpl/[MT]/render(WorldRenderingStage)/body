{
  preRenderUpdate(renderingStage);
  renderShadowMap();
  renderWorldReflection();
  graphicState.enableWireframeIf(renderingDebugConfig.isWireframe());
  graphicState.initialClearing();
  graphicState.preRenderSetupSceneOpaque();
  renderBackdrop();
  try (Activity ignored=PerformanceMonitor.startActivity("Render World")){
    renderObjectsOpaque();
    renderChunksOpaque();
    renderChunksAlphaReject();
    renderOverlays();
    renderFirstPersonView();
    graphicState.postRenderCleanupSceneOpaque();
    renderLightGeometry();
    renderChunksRefractiveReflective();
  }
   graphicState.disableWireframeIf(renderingDebugConfig.isWireframe());
  PerformanceMonitor.startActivity("Pre-post composite");
  buffersManager.createOrUpdateFullscreenFbos();
  postProcessor.generateOutline();
  postProcessor.generateAmbientOcclusionPasses();
  postProcessor.generatePrePostComposite();
  PerformanceMonitor.endActivity();
  renderSimpleBlendMaterials();
  PerformanceMonitor.startActivity("Post-Processing");
  postProcessor.generateLightShafts();
  postProcessor.initialPostProcessing();
  postProcessor.downsampleSceneAndUpdateExposure();
  postProcessor.generateToneMappedScene();
  postProcessor.generateBloomPasses();
  postProcessor.generateBlurPasses();
  postProcessor.finalPostProcessing(renderingStage);
  PerformanceMonitor.endActivity();
  playerCamera.updatePrevViewProjectionMatrix();
}
