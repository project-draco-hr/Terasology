{
  if (value != null && value.size() > 0) {
    try {
      T sample=value.get(0);
      TypeInfo info=typeMap.get(sample.getClass());
      if (info == null) {
        throw new IOException("Unsupported type : " + sample.getClass());
      }
      output.writeShort(listInfo.getId());
      output.writeUTF(name);
      output.writeShort(info.getId());
      output.writeInt(value.size());
      for (      T val : value) {
        info.write(output,val,this);
      }
    }
 catch (    Exception ex) {
      logger.log(Level.SEVERE,"Error writing data",ex);
      errored=true;
    }
  }
}
