{
  taskList.clear();
  Map intranodesStateChanges=Maps.newHashMap();
  for (  Object object : intermediateList) {
    if (object instanceof StateChange) {
      intranodesStateChanges.put(object.getClass(),object);
    }
 else {
      for (      Object stateChange : intranodesStateChanges.values()) {
        taskList.add(((StateChange)stateChange).generateTask());
      }
      intranodesStateChanges.clear();
      taskList.add(((Node)object).generateTask());
    }
  }
}
