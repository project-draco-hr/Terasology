{
  DisplayDevice displayDevice=CoreRegistry.get(DisplayDevice.class);
  boolean isHeadless=displayDevice.isHeadless();
  Set<Class<?>> systems=reflections.getTypesAnnotatedWith(RegisterSystem.class);
  for (  Class<?> system : systems) {
    if (!ComponentSystem.class.isAssignableFrom(system)) {
      logger.error("Cannot load {}, must be a subclass of ComponentSystem",system.getSimpleName());
      continue;
    }
    RegisterSystem registerInfo=system.getAnnotation(RegisterSystem.class);
    if (registerInfo.value().isValidFor(netMode,isHeadless)) {
      String id=moduleName + ":" + system.getSimpleName();
      logger.debug("Registering system {}",id);
      try {
        ComponentSystem newSystem=(ComponentSystem)system.newInstance();
        InjectionHelper.share(newSystem);
        register(newSystem,id);
        logger.debug("Loaded system {}",id);
      }
 catch (      InstantiationException|IllegalAccessException e) {
        logger.error("Failed to load system {}",id,e);
      }
    }
  }
}
