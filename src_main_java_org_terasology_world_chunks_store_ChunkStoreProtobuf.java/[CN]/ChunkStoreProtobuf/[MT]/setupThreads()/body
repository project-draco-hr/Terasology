{
  if (compressionThreads == null) {
    running.set(true);
    compressionThreads=Executors.newFixedThreadPool(NUM_DISPOSAL_THREADS);
    for (int i=0; i < NUM_DISPOSAL_THREADS; ++i) {
      compressionThreads.execute(new Runnable(){
        @Override public void run(){
          Thread.currentThread().setPriority(Thread.MIN_PRIORITY);
          while (running.get()) {
            try {
              Chunk chunk=compressionQueue.poll(500,TimeUnit.MILLISECONDS);
              if (chunk != null) {
                saveChunk(chunk);
              }
            }
 catch (            InterruptedException e) {
              logger.error("Thread interrupted",e);
            }
catch (            Exception e) {
              logger.error("Error in thread",e);
            }
          }
          boolean remaining=true;
          do {
            Chunk chunk=compressionQueue.poll();
            if (chunk != null) {
              saveChunk(chunk);
            }
 else {
              remaining=false;
            }
          }
 while (remaining);
          logger.debug("Thread shutdown safely");
        }
      }
);
    }
  }
}
