{
  Vector3i pos=chunk.getPos();
  if (chunk.getChunkState() == Chunk.State.INTERNAL_LIGHT_GENERATION_PENDING) {
    if (CoreRegistry.get(NetworkSystem.class).getMode().isAuthority()) {
      for (      Vector3i adjPos : Region3i.createFromCenterExtents(pos,ChunkConstants.LOCAL_REGION_EXTENTS)) {
        if (!adjPos.equals(pos)) {
          Chunk adjChunk=provider.getChunkForProcessing(adjPos);
          if (adjChunk == null || adjChunk.getChunkState().compareTo(Chunk.State.INTERNAL_LIGHT_GENERATION_PENDING) < 0) {
            return;
          }
        }
      }
    }
    logger.debug("Queueing for internal light generation {}",pos);
    pipeline.doTask(new InternalLightingChunkTask(pipeline,pos,provider));
  }
}
