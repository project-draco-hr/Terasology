{
  ModuleManager moduleManager=CoreRegistry.get(ModuleManager.class);
  moduleManager.disableAllModules();
  for (  ModuleIdentifier moduleId : gameManifest.getModules()) {
    Module module=moduleManager.getModule(moduleId.getId(),moduleId.getVersion());
    if (module != null) {
      moduleManager.enableModule(module);
    }
 else {
      CoreRegistry.get(GameEngine.class).changeState(new StateMainMenu("Missing required module: " + moduleId));
      return true;
    }
  }
  ApplyModulesUtil.applyModules();
  return true;
}
