{
  Vector3d playerPosition=Terasology.getInstance().getActivePlayer().getPosition();
  for (  EntityRef entity : manager.iteratorEntities(MeshComponent.class,LocationComponent.class)) {
    LocationComponent location=entity.getComponent(LocationComponent.class);
    MeshComponent meshComp=entity.getComponent(MeshComponent.class);
    glPushMatrix();
    glTranslated(location.position.x - playerPosition.x,location.position.y - playerPosition.y,location.position.z - playerPosition.z);
    AxisAngle4f rot=new AxisAngle4f();
    rot.set(location.rotation);
    glRotatef(rot.angle,rot.x,rot.y,rot.z);
    glScalef(location.scale,location.scale,location.scale);
    ShaderProgram shader=ShaderManager.getInstance().getShaderProgram("gelatinousCube");
    shader.enable();
    shader.setFloat4("colorOffset",meshComp.color.x,meshComp.color.y,meshComp.color.z,meshComp.color.w);
    shader.setFloat("light",worldRenderer.getRenderingLightValueAt(location.position));
    mesh.render();
    glPopMatrix();
  }
}
