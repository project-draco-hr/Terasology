{
  List<NetData.BlockChangeMessage> blockChanges=Lists.newArrayListWithExpectedSize(queuedOutgoingBlockChanges.size());
  queuedOutgoingBlockChanges.drainTo(blockChanges);
  message.addAllBlockChange(blockChanges);
  message.addAllEvent(queuedOutgoingEvents);
  queuedOutgoingEvents.clear();
}
