{
  _visibleChunks.clear();
  int updateCounter=0;
  for (int i=0; i < _chunksInProximity.size(); i++) {
    Chunk c=_chunksInProximity.get(i);
    if (isChunkVisible(c)) {
      c.setVisible(true);
      _visibleChunks.add(c);
      if (c.isDirty() || c.isLightDirty()) {
        if (_chunkUpdateManager.queueChunkUpdate(c,ChunkUpdateManager.UPDATE_TYPE.DEFAULT)) {
          continue;
        }
        continue;
      }
      if (updateCounter < MAX_CHUNK_UPDATES_PER_ITERATION) {
        if (c.generateVBOs()) {
          updateCounter++;
        }
        c.update();
      }
      continue;
    }
    c.setVisible(false);
  }
}
