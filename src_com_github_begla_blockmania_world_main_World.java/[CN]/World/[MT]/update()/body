{
  _worldProvider.getRenderingReferencePoint().set(_player.getPosition());
  updateTick();
  _skysphere.update();
  _player.update();
  _mobManager.updateAll();
  _bulletPhysicsRenderer.resetChunks();
  updateChunksInProximity();
  updateVisibleChunks();
  for (int i=0; i < 16 && i < _chunksInProximity.size(); i++) {
    if (_chunksInProximity.get(i).getActiveChunkMesh() != null) {
      if (_chunksInProximity.get(i).getActiveChunkMesh()._bulletMeshShape != null) {
        Vector3f position=new Vector3f(_chunksInProximity.get(i).getPosition());
        position.x*=Chunk.getChunkDimensionX();
        position.y*=Chunk.getChunkDimensionY();
        position.z*=Chunk.getChunkDimensionZ();
        _bulletPhysicsRenderer.addStaticChunk(position,_chunksInProximity.get(i).getActiveChunkMesh()._bulletMeshShape);
      }
    }
  }
  _bulletPhysicsRenderer.update();
  for (int i=0; i < _chunksInProximity.size(); i++) {
    Chunk c=_chunksInProximity.get(i);
    if (c.isVisible()) {
      if (c.isDirty() || c.isLightDirty()) {
        if (_chunkUpdateManager.queueChunkUpdate(c,ChunkUpdateManager.UPDATE_TYPE.DEFAULT)) {
          continue;
        }
        break;
      }
      c.update();
    }
  }
  _blockParticleEmitter.update();
  _worldProvider.getChunkProvider().flushCache();
  _worldTimeEventManager.fireWorldTimeEvents();
}
