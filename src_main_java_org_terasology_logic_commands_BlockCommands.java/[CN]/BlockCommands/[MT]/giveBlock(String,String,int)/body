{
  BlockManager blockManager=CoreRegistry.get(BlockManager.class);
  List<BlockUri> resolvedBlockUris=blockManager.resolveBlockUri(uri);
  if (resolvedBlockUris.isEmpty()) {
    MessageManager.getInstance().addMessage("No block found for '" + uri + "'");
    return;
  }
 else   if (resolvedBlockUris.size() > 1) {
    StringBuilder builder=new StringBuilder();
    builder.append("Non-unique block name, possible matches: ");
    Joiner.on(", ").appendTo(builder,resolvedBlockUris);
    MessageManager.getInstance().addMessage(builder.toString());
    return;
  }
  List<AssetUri> resolvedShapeUris=resolveShapeUri(shapeUri);
  if (resolvedShapeUris.isEmpty()) {
    MessageManager.getInstance().addMessage("No shape found for '" + shapeUri + "'");
    return;
  }
 else   if (resolvedShapeUris.size() > 1) {
    StringBuilder builder=new StringBuilder();
    builder.append("Non-unique shape name, possible matches: ");
    Iterator<AssetUri> shapeUris=resolvedShapeUris.iterator();
    while (shapeUris.hasNext()) {
      builder.append(shapeUris.next().getSimpleString());
      if (shapeUris.hasNext()) {
        builder.append(", ");
      }
    }
    return;
  }
  BlockUri blockUri=new BlockUri(resolvedBlockUris.get(0).toString() + BlockUri.PACKAGE_SEPARATOR + resolvedShapeUris.get(0).getSimpleString());
  if (blockUri.isValid()) {
    giveBlock(blockManager.getBlockFamily(blockUri),quantity);
    return;
  }
  MessageManager.getInstance().addMessage("Invalid block or shape");
}
