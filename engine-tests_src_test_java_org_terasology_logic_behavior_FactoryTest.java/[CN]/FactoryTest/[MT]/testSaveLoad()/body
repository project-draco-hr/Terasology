{
  AssetManager assetManager=mock(AssetManager.class);
  context.put(AssetManager.class,assetManager);
  BehaviorNodeFactory nodeFactory=mock(BehaviorNodeFactory.class);
  context.put(BehaviorNodeFactory.class,nodeFactory);
  BehaviorTreeLoader loader=new BehaviorTreeLoader();
  BehaviorTreeData data=buildSample();
  ByteArrayOutputStream os=new ByteArrayOutputStream(10000);
  loader.save(os,data);
  byte[] jsonExpected=os.toByteArray();
  data=loader.load(null,new ByteArrayInputStream(jsonExpected),null,null);
  os=new ByteArrayOutputStream(10000);
  loader=new BehaviorTreeLoader();
  loader.save(os,data);
  byte[] jsonActual=os.toByteArray();
  Assert.assertArrayEquals(jsonActual,jsonExpected);
}
