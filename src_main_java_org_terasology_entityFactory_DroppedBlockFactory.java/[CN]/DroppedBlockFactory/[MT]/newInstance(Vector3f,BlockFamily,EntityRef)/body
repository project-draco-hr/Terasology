{
  if (blockFamily.getArchetypeBlock().isTranslucent()) {
    return EntityRef.NULL;
  }
  Prefab prefab=CoreRegistry.get(PrefabManager.class).getPrefab("core:droppedBlock");
  if (prefab != null && prefab.getComponent(LocationComponent.class) != null) {
    EntityRef blockEntity=CoreRegistry.get(EntityManager.class).create(prefab,location);
    MeshComponent blockMesh=blockEntity.getComponent(MeshComponent.class);
    BlockPickupComponent blockPickup=blockEntity.getComponent(BlockPickupComponent.class);
    blockPickup.blockFamily=blockFamily;
    blockPickup.placedEntity=placedEntity;
    blockMesh.mesh=blockFamily.getArchetypeBlock().getMesh();
    blockEntity.saveComponent(blockMesh);
    blockEntity.saveComponent(blockPickup);
    return blockEntity;
  }
  return EntityRef.NULL;
}
